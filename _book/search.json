[
  {
    "objectID": "01_TT_202201.html",
    "href": "01_TT_202201.html",
    "title": "2  Exploration and vizualization of Starbuck coffee use",
    "section": "",
    "text": "3 Load data\nThe data are loaded directly from the TidyTuesday github page.\nHere are some explorative commands you can use:\n- star-df opens the dataset and shows you the variables. - names(star_df)gives you the names of the 15 variables. - glimpse(star_df)shows you the number of rows (often particpants) and columns (often variables) and also informs you about the kind of variables. - dim(star_df) informs you about number of rows and columns.\n- sum(is.na(star_df)) show you the number of missing variables.\nWhen you want to look at a specific subset with the product_name brewed coffee for example you can define this as:.\nCan you plot between calories(y) and total_fat_g (x)? Show the diffence on whip_char'and show it for the sixmilk-labs` you recoded.\nSave the plot on your computer as a png-file. Here is place in a projectmap and a submap images which I made on my computer. Change the path if necessary for your computer.\nFor counting frequencies you always can use different methods. We show some of them.\nThis is the R base-way for counting the variable whipfor example.\nThis is the grouping-way.\nThis is a better way (thanks Wim!).\nHere we do some basic cleaning. We select six variables and look only at variables of which the size is grande. We call this dataset star_clean.\nLet us plot it on different ways.The first three are similar.\nThen we plot the coffee of which the whipis 1.\nFor the next plot we first change the class of the variable milk into a character variable and save it as a different dataset.\nWe plot this new dataset on three different ways."
  },
  {
    "objectID": "01_TT_202201.html#introduction",
    "href": "01_TT_202201.html#introduction",
    "title": "2  Exploration and vizualization of Starbuck coffee use",
    "section": "2.1 Introduction",
    "text": "2.1 Introduction\nOn 11 January 2022 and 25 January 2022 Sam Langton gave NSCR Tidy Tuesday presentations on the exploration and visualization of Starbuck coffee use data.In this document both presentations are combined.\n[^1]. Here you can find it on the NSCR- website. Here is the First presentation. Here is the Second presentation"
  },
  {
    "objectID": "01_TT_202201.html#load-libraries.",
    "href": "01_TT_202201.html#load-libraries.",
    "title": "2  Exploration and vizualization of Starbuck coffee use",
    "section": "2.2 Load libraries.",
    "text": "2.2 Load libraries.\n\nlibrary(readr)\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(stringr)\nlibrary(ggplot2)"
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "1  Introduction",
    "section": "",
    "text": "This is a book created from markdown and executable code.\nSee Knuth (1984) for additional discussion of literate programming.\n\n1 + 1\n\n[1] 2\n\n\n\n\n\n\nKnuth, Donald E. 1984. “Literate Programming.” Comput. J. 27 (2): 97–111. https://doi.org/10.1093/comjnl/27.2.97."
  },
  {
    "objectID": "summary.html",
    "href": "summary.html",
    "title": "3  Summary",
    "section": "",
    "text": "In summary, this book has no content whatsoever.\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "References",
    "section": "",
    "text": "Knuth, Donald E. 1984. “Literate Programming.” Comput.\nJ. 27 (2): 97–111. https://doi.org/10.1093/comjnl/27.2.97."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "TT_book",
    "section": "",
    "text": "Preface\nThis is a Quarto book.\nTo learn more about Quarto books visit https://quarto.org/docs/books.\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "09_TT_202211.html",
    "href": "09_TT_202211.html",
    "title": "4  Student mobility in Europe",
    "section": "",
    "text": "5 Introduction\nIn this workshop, Wim Bernasco explores a Tidy Tuesday dataset about the European Union Erasmus+ student mobility program. This dataset was used in the main Tidy Tuesday of week 10 in 2022. For more information on this data, including the codebook, see the RForDataScience GitHub registry.\nIn this workshop, the focus is on exploring, analyzing, and maybe visualizing student streams between countries. Different descriptive questions will be answered:\nHere you find the link to the NSC-R Tidy Tuesday page.\n\n\n6 Get started\nInstall uninstalled packages tidyverse, here and tidytuesdayR.\n\nif (! require(\"tidyverse\")) install.packages(\n  pkgs = \"tidyverse\", repos = \"http://cran.us.r-project.org\"\n)\n\n\n  There is a binary version available but the source version is later:\n       binary source needs_compilation\ngargle  1.2.1  1.3.0             FALSE\n\npackage 'ps' successfully unpacked and MD5 sums checked\npackage 'rematch' successfully unpacked and MD5 sums checked\npackage 'processx' successfully unpacked and MD5 sums checked\npackage 'backports' successfully unpacked and MD5 sums checked\npackage 'assertthat' successfully unpacked and MD5 sums checked\npackage 'blob' successfully unpacked and MD5 sums checked\npackage 'DBI' successfully unpacked and MD5 sums checked\npackage 'data.table' successfully unpacked and MD5 sums checked\npackage 'uuid' successfully unpacked and MD5 sums checked\npackage 'cellranger' successfully unpacked and MD5 sums checked\npackage 'ids' successfully unpacked and MD5 sums checked\npackage 'rematch2' successfully unpacked and MD5 sums checked\npackage 'timechange' successfully unpacked and MD5 sums checked\npackage 'callr' successfully unpacked and MD5 sums checked\npackage 'selectr' successfully unpacked and MD5 sums checked\npackage 'broom' successfully unpacked and MD5 sums checked\npackage 'dbplyr' successfully unpacked and MD5 sums checked\npackage 'dtplyr' successfully unpacked and MD5 sums checked\npackage 'forcats' successfully unpacked and MD5 sums checked\npackage 'googledrive' successfully unpacked and MD5 sums checked\npackage 'googlesheets4' successfully unpacked and MD5 sums checked\npackage 'haven' successfully unpacked and MD5 sums checked\npackage 'lubridate' successfully unpacked and MD5 sums checked\npackage 'modelr' successfully unpacked and MD5 sums checked\npackage 'readxl' successfully unpacked and MD5 sums checked\npackage 'reprex' successfully unpacked and MD5 sums checked\npackage 'rvest' successfully unpacked and MD5 sums checked\npackage 'xml2' successfully unpacked and MD5 sums checked\npackage 'tidyverse' successfully unpacked and MD5 sums checked\n\nThe downloaded binary packages are in\n    C:\\Users\\Gebruiker\\AppData\\Local\\Temp\\RtmpKAjge1\\downloaded_packages\n\nif (! require(\"here\")) install.packages(\n  pkgs = \"here\", repos = \"http://cran.us.r-project.org\"\n)\n\npackage 'here' successfully unpacked and MD5 sums checked\n\nThe downloaded binary packages are in\n    C:\\Users\\Gebruiker\\AppData\\Local\\Temp\\RtmpKAjge1\\downloaded_packages\n\nif (! require(\"tidytuesdayR\")) install.packages(\n  pkgs = \"tidytuesdayR\", repos = \"http://cran.us.r-project.org\"\n)\n\npackage 'tidytuesdayR' successfully unpacked and MD5 sums checked\n\nThe downloaded binary packages are in\n    C:\\Users\\Gebruiker\\AppData\\Local\\Temp\\RtmpKAjge1\\downloaded_packages\n\nif (! require(\"broom\")) install.packages(\n  pkgs = \"broom\", repos = \"http://cran.us.r-project.org\"\n)\nif (! require(\"circlize\")) install.packages(\n  pkgs = \"circlize\", repos = \"http://cran.us.r-project.org\"\n)\n\npackage 'GlobalOptions' successfully unpacked and MD5 sums checked\npackage 'shape' successfully unpacked and MD5 sums checked\npackage 'circlize' successfully unpacked and MD5 sums checked\n\nThe downloaded binary packages are in\n    C:\\Users\\Gebruiker\\AppData\\Local\\Temp\\RtmpKAjge1\\downloaded_packages\n\nif (! require(\"igraph\")) install.packages(\n  pkgs = \"igraph\", repos = \"http://cran.us.r-project.org\"\n)\n\npackage 'igraph' successfully unpacked and MD5 sums checked\n\nThe downloaded binary packages are in\n    C:\\Users\\Gebruiker\\AppData\\Local\\Temp\\RtmpKAjge1\\downloaded_packages\n\n\nLoad the required libraries\n\nlibrary(tidyverse)\nlibrary(broom)\nlibrary(here)\nlibrary(tidytuesdayR)\nlibrary(circlize)\nlibrary(igraph)\n\nLoad the datafile For information see\n\n\n\n\n\n\nNote\n\n\n\nThe ‘participants’ field is a frequency weight!\n\n\nOpen the dataset\n\ntuesdata <- tt_load(2022, week = 10)\n\n--- Compiling #TidyTuesday Information for 2022-03-08 ----\n\n\n--- There is 1 file available ---\n\n\n--- Starting Download ---\n\n\n\n    Downloading file 1 of 1: `erasmus.csv`\n\n\n--- Download complete ---\n\nerasmus <- tuesdata$erasmus\n\nThere are two additional ‘helper’ datafiles used used in this script: country_names.csv: The full names and EU-status of the countries adjacency.csv : Pairs of countries that are adjacent (share borders)\nI will address some of the following descriptive questions:\n- How many students studied abroad?\n- What are the top-10 receiving countries?\n- What are the top-10 sending countries?\n- Which are the 10 most frequent origin-destination country combinations?\n- Are reverse flows (the flow from A to B and the flow from B to A) correlated?\nThe following modeling questions will be answered:\n- How does total number of students from country A to country B depend on the total number of student from A and the total number of students from B?\n- Do adjacent countries attract more or less students than non-adjacent countries?\nIf time permits some visualization questions will be answered:\n- Are there some ways of visualizing mobility data?\n\n\n7 Exploration and preparation\nFirst we explore the data:\n\nerasmus |> names()\n\n [1] \"project_reference\"                   \"academic_year\"                      \n [3] \"mobility_start_month\"                \"mobility_end_month\"                 \n [5] \"mobility_duration\"                   \"activity_mob\"                       \n [7] \"field_of_education\"                  \"participant_nationality\"            \n [9] \"education_level\"                     \"participant_gender\"                 \n[11] \"participant_profile\"                 \"special_needs\"                      \n[13] \"fewer_opportunities\"                 \"group_leader\"                       \n[15] \"participant_age\"                     \"sending_country_code\"               \n[17] \"sending_city\"                        \"sending_organization\"               \n[19] \"sending_organisation_erasmus_code\"   \"receiving_country_code\"             \n[21] \"receiving_city\"                      \"receiving_organization\"             \n[23] \"receiving_organisation_erasmus_code\" \"participants\"                       \n\nerasmus |> glimpse()\n\nRows: 164,635\nColumns: 24\n$ project_reference                   <chr> \"2014-1-AT02-KA347-000139\", \"2014-~\n$ academic_year                       <chr> \"2014-2015\", \"2014-2015\", \"2014-20~\n$ mobility_start_month                <chr> \"2014-11\", \"2014-11\", \"2014-11\", \"~\n$ mobility_end_month                  <chr> \"2014-11\", \"2014-11\", \"2014-11\", \"~\n$ mobility_duration                   <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1~\n$ activity_mob                        <chr> \"National youth meetings\", \"Nation~\n$ field_of_education                  <chr> \"? Unknown ?\", \"? Unknown ?\", \"? U~\n$ participant_nationality             <chr> \"AT\", \"AT\", \"AT\", \"AT\", \"AT\", \"AT\"~\n$ education_level                     <chr> \"??? - ? Unknown ?\", \"??? - ? Unkn~\n$ participant_gender                  <chr> \"Female\", \"Female\", \"Female\", \"Mal~\n$ participant_profile                 <chr> \"Learner\", \"Learner\", \"Learner\", \"~\n$ special_needs                       <chr> \"No\", \"No\", \"No\", \"No\", \"No\", \"No\"~\n$ fewer_opportunities                 <chr> \"Yes\", \"Yes\", \"Yes\", \"Yes\", \"Yes\",~\n$ group_leader                        <chr> \"No\", \"No\", \"No\", \"No\", \"No\", \"No\"~\n$ participant_age                     <dbl> 13, 14, 15, 14, 15, 15, 16, 17, 18~\n$ sending_country_code                <chr> \"AT\", \"AT\", \"AT\", \"AT\", \"AT\", \"AT\"~\n$ sending_city                        <chr> \"Dornbirn\", \"Dornbirn\", \"Dornbirn\"~\n$ sending_organization                <chr> \"bOJA - Bundesweites Netzwerk Offe~\n$ sending_organisation_erasmus_code   <chr> \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\",~\n$ receiving_country_code              <chr> \"AT\", \"AT\", \"AT\", \"AT\", \"AT\", \"AT\"~\n$ receiving_city                      <chr> \"Dornbirn\", \"Dornbirn\", \"Dornbirn\"~\n$ receiving_organization              <chr> \"bOJA - Bundesweites Netzwerk Offe~\n$ receiving_organisation_erasmus_code <chr> \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\",~\n$ participants                        <dbl> 2, 3, 3, 4, 2, 2, 1, 3, 1, 2, 1, 2~\n\nerasmus |> count(participants)\n\n# A tibble: 99 x 2\n   participants      n\n          <dbl>  <int>\n 1            1 118352\n 2            2  22804\n 3            3   8756\n 4            4   4642\n 5            5   2572\n 6            6   1775\n 7            7   1125\n 8            8    874\n 9            9    668\n10           10    502\n# ... with 89 more rows\n\n\nFirst check number of rows\n\nerasmus |> dim()\n\n[1] 164635     24\n\n\nNumber of rows after ‘expansion’. Expansion expands a frequency-weighted datafile to a regular file where each row represents a single student exchange trip.\n\nerasmus |> \n  uncount(participants) |>\n  dim()\n\n[1] 309751     23\n\n\nFrom which countries do participants come?\n\nerasmus |> \n  count(sending_country_code)\n\n# A tibble: 54 x 2\n   sending_country_code     n\n   <chr>                <int>\n 1 AL                     132\n 2 AM                     127\n 3 AT                    3484\n 4 AZ                      54\n 5 BA                      83\n 6 BE                    3279\n 7 BG                    4412\n 8 BY                      69\n 9 CY                    1886\n10 CZ                    6086\n# ... with 44 more rows\n\n\nTo which country do participants go?\n\nerasmus |>\n  count(receiving_country_code)\n\n# A tibble: 34 x 2\n   receiving_country_code     n\n   <chr>                  <int>\n 1 AT                      3451\n 2 BE                      4008\n 3 BG                      4120\n 4 CY                      1981\n 5 CZ                      6107\n 6 DE                     17000\n 7 DK                      1484\n 8 EE                      3637\n 9 EL                      2042\n10 ES                     11188\n# ... with 24 more rows\n\n\nAdd names to the codes. There are several options to do this. - Option 1: Explicit in-script recoding\n\nerasmus |>\n  mutate(sending_country_name =\n           case_when(sending_country_code == \"AT\" ~ \"Austria\",\n                     sending_country_code == \"BE\" ~ \"Belgium\",\n                     sending_country_code == \"BG\" ~ \"Bulgaria\",\n                     sending_country_code == \"CY\" ~ \"Cyprus\",\n                     sending_country_code == \"CZ\" ~ \"Czechia\",\n                     sending_country_code == \"DE\" ~ \"Germany\",\n                     sending_country_code == \"DK\" ~ \"Denkmark\"\n                     # .........\n           )) |>\n  count(sending_country_name)\n\n# A tibble: 8 x 2\n  sending_country_name      n\n  <chr>                 <int>\n1 Austria                3484\n2 Belgium                3279\n3 Bulgaria               4412\n4 Cyprus                 1886\n5 Czechia                6086\n6 Denkmark               1426\n7 Germany               17155\n8 <NA>                 126907\n\n\n\nOption 2: Join with look-up table in a separate CSV file\n\n\ncountry_labels <- read_csv(here(\"C:/Users/Gebruiker/Desktop/TidyTuesday/TT_20221115/country_names.csv\"))\n\nRows: 37 Columns: 3\n-- Column specification --------------------------------------------------------\nDelimiter: \",\"\nchr (3): country_name, country_code, country_status\n\ni Use `spec()` to retrieve the full column specification for this data.\ni Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\n\nerasmus |>\n  left_join(country_labels, \n            by=c(\"receiving_country_code\" = \"country_code\")) |>\n  rename(receiving_country_name = country_name,\n         receiving_country_status = country_status)\n\n# A tibble: 164,635 x 26\n   project_ref~1 acade~2 mobil~3 mobil~4 mobil~5 activ~6 field~7 parti~8 educa~9\n   <chr>         <chr>   <chr>   <chr>     <dbl> <chr>   <chr>   <chr>   <chr>  \n 1 2014-1-AT02-~ 2014-2~ 2014-11 2014-11       1 Nation~ ? Unkn~ AT      ??? - ~\n 2 2014-1-AT02-~ 2014-2~ 2014-11 2014-11       1 Nation~ ? Unkn~ AT      ??? - ~\n 3 2014-1-AT02-~ 2014-2~ 2014-11 2014-11       1 Nation~ ? Unkn~ AT      ??? - ~\n 4 2014-1-AT02-~ 2014-2~ 2014-11 2014-11       1 Nation~ ? Unkn~ AT      ??? - ~\n 5 2014-1-AT02-~ 2014-2~ 2014-11 2014-11       1 Nation~ ? Unkn~ AT      ??? - ~\n 6 2014-1-AT02-~ 2014-2~ 2014-12 2014-12       1 Nation~ ? Unkn~ AT      ??? - ~\n 7 2014-1-AT02-~ 2014-2~ 2014-12 2014-12       1 Nation~ ? Unkn~ AT      ??? - ~\n 8 2014-1-AT02-~ 2014-2~ 2014-12 2014-12       1 Nation~ ? Unkn~ AT      ??? - ~\n 9 2014-1-AT02-~ 2014-2~ 2014-12 2014-12       1 Nation~ ? Unkn~ AT      ??? - ~\n10 2014-1-AT02-~ 2014-2~ 2014-12 2014-12       1 Nation~ ? Unkn~ AT      ??? - ~\n# ... with 164,625 more rows, 17 more variables: participant_gender <chr>,\n#   participant_profile <chr>, special_needs <chr>, fewer_opportunities <chr>,\n#   group_leader <chr>, participant_age <dbl>, sending_country_code <chr>,\n#   sending_city <chr>, sending_organization <chr>,\n#   sending_organisation_erasmus_code <chr>, receiving_country_code <chr>,\n#   receiving_city <chr>, receiving_organization <chr>,\n#   receiving_organisation_erasmus_code <chr>, participants <dbl>, ...\n\n\nCombining some of the above transformations we created a clean file\n\nlabeled_erasmus_full <- \n  erasmus |>\n  # Keep only a subset of columns/variables\n  select(sending_country_code, receiving_country_code, \n         participant_gender, academic_year, activity_mob, participants) |>\n  # insert names of receiving countries by linking to country codes\n  left_join(country_labels, \n            by=c(\"receiving_country_code\" = \"country_code\")) |>\n  # make sure the column names are clear \n  rename(receiving_country_name = country_name,\n         receiving_country_status = country_status) |> \n  # insert names of sending countries by linking to country codes\n  left_join(country_labels, \n            by=c(\"sending_country_code\" = \"country_code\")) |>\n  # make sure the column names are clear \n  rename(sending_country_name = country_name,\n         sending_country_status = country_status) |> \n  # exclude countries outside EU and with no affiliation to EU\n  filter(sending_country_status %in% c(\"EU\", \"EFTA\", \"UK\", \"Candidate\"),\n         receiving_country_status %in% c(\"EU\", \"EFTA\", \"UK\", \"Candidate\")) |>\n  # exclude the (many!) within-country exchanges\n  filter(sending_country_code != receiving_country_code) |>\n  # Only international mobility program\n  filter(activity_mob == \"Transnational youth meetings\") |>\n  # Every row becomes an individual international student trip \n  uncount(participants) \n\n\n\n8 Descriptive questions\nHow many students are there?\n\nlabeled_erasmus_full |>\n  dim()\n\n[1] 15693     9\n\n\nWhere did they come from?\n\nlabeled_erasmus_full |> \n  count(sending_country_name) |>\n  print(n=Inf)\n\n# A tibble: 36 x 2\n   sending_country_name     n\n   <chr>                <int>\n 1 Albania                169\n 2 Austria                565\n 3 Belgium                662\n 4 Bulgaria               526\n 5 Croatia                323\n 6 Cyprus                 121\n 7 Czechia                531\n 8 Denmark                296\n 9 Estonia                292\n10 Finland                307\n11 France                 622\n12 Germany               1314\n13 Greece                 483\n14 Hungary                473\n15 Iceland                 25\n16 Ireland                225\n17 Italy                 1098\n18 Latvia                 386\n19 Liechtenstein            6\n20 Lithuania              411\n21 Luxembourg             166\n22 Malta                   58\n23 Montenegro              27\n24 Netherlands            630\n25 North Macedonia        185\n26 Norway                 133\n27 Poland                 837\n28 Portugal               468\n29 Romania                745\n30 Serbia                 343\n31 Slovakia               370\n32 Slovenia               268\n33 Spain                  819\n34 Sweden                 495\n35 Turkey                 553\n36 United Kingdom         761\n\n\nVisualization as a bar graph\n\nlabeled_erasmus_full |> \n  count(sending_country_name) |>  \n  ggplot() + \n  geom_col(aes(x=sending_country_name, y=n))\n\n\n\n\nWhere do students come from, horizontal\n\n\n\n\nWith vertical labels labels\n\nlabeled_erasmus_full |> \n  count(sending_country_name) |>  \n  ggplot() + \n  geom_col(aes(x=sending_country_name, y=n)) +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))\n\n\n\n\nWhere do students come from, vertical\n\n\n\n\nOrder by frequency.\n\nlabeled_erasmus_full |> \n  count(sending_country_code) |>  \n  arrange(-n) |>\n    # Converting character variable to factor variable\n    mutate(sending_country_code=factor(sending_country_code,\n                                     levels = unique(sending_country_code),\n                                     ordered = T)) |>\n  ggplot() + \n  geom_col(aes(x=sending_country_code, y=n)) +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))\n\n\n\n\nWhere do students come from, ordered\n\n\n\n\nWhere did they go to?\n\nlabeled_erasmus_full |> \n  count(receiving_country_name) |>\n  arrange(-n) |>\n  print(n=Inf)\n\n# A tibble: 31 x 2\n   receiving_country_name     n\n   <chr>                  <int>\n 1 France                  2403\n 2 Belgium                 1428\n 3 Spain                   1204\n 4 Germany                 1095\n 5 Italy                   1017\n 6 Netherlands              765\n 7 Luxembourg               607\n 8 Estonia                  524\n 9 Czechia                  518\n10 Lithuania                495\n11 Austria                  485\n12 United Kingdom           483\n13 Greece                   444\n14 Romania                  423\n15 Turkey                   371\n16 Slovenia                 355\n17 Croatia                  343\n18 Denmark                  340\n19 Poland                   340\n20 Portugal                 296\n21 Norway                   286\n22 Sweden                   250\n23 Cyprus                   214\n24 Ireland                  186\n25 Latvia                   165\n26 Malta                    163\n27 Bulgaria                 149\n28 Hungary                  116\n29 North Macedonia          111\n30 Slovakia                  67\n31 Finland                   50\n\n\n\nlabeled_erasmus_full |> \n  count(receiving_country_name) |>\n  arrange(-n) |>\n  print(n=Inf)\n\n# A tibble: 31 x 2\n   receiving_country_name     n\n   <chr>                  <int>\n 1 France                  2403\n 2 Belgium                 1428\n 3 Spain                   1204\n 4 Germany                 1095\n 5 Italy                   1017\n 6 Netherlands              765\n 7 Luxembourg               607\n 8 Estonia                  524\n 9 Czechia                  518\n10 Lithuania                495\n11 Austria                  485\n12 United Kingdom           483\n13 Greece                   444\n14 Romania                  423\n15 Turkey                   371\n16 Slovenia                 355\n17 Croatia                  343\n18 Denmark                  340\n19 Poland                   340\n20 Portugal                 296\n21 Norway                   286\n22 Sweden                   250\n23 Cyprus                   214\n24 Ireland                  186\n25 Latvia                   165\n26 Malta                    163\n27 Bulgaria                 149\n28 Hungary                  116\n29 North Macedonia          111\n30 Slovakia                  67\n31 Finland                   50\n\n\nLet us visualise this also, vertical and ordered.\n\nlabeled_erasmus_full |> \n  count(receiving_country_code) |>  \n  arrange(-n) |>\n  mutate(receiving_country_code=factor(receiving_country_code,\n                                       levels = unique(receiving_country_code),\n                                       ordered = T)) |>\n  ggplot() + \n  geom_col(aes(x=receiving_country_code, y=n)) +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))\n\n\n\n\nHow many students do countries receive, ordered\n\n\n\n\nTop 10 Where did they go to.\n\nlabeled_erasmus_full |> \n  count(receiving_country_name) |>\n  arrange(-n) |> \n  head(n=10)\n\n# A tibble: 10 x 2\n   receiving_country_name     n\n   <chr>                  <int>\n 1 France                  2403\n 2 Belgium                 1428\n 3 Spain                   1204\n 4 Germany                 1095\n 5 Italy                   1017\n 6 Netherlands              765\n 7 Luxembourg               607\n 8 Estonia                  524\n 9 Czechia                  518\n10 Lithuania                495\n\n\nTop 10 Where did they come from\n\nlabeled_erasmus_full |> \n  count(sending_country_name) |>\n  arrange(-n) |> \n  head(n=10)\n\n# A tibble: 10 x 2\n   sending_country_name     n\n   <chr>                <int>\n 1 Germany               1314\n 2 Italy                 1098\n 3 Poland                 837\n 4 Spain                  819\n 5 United Kingdom         761\n 6 Romania                745\n 7 Belgium                662\n 8 Netherlands            630\n 9 France                 622\n10 Austria                565\n\n\nTop 10 origin-destination combinations\n\nlabeled_erasmus_full |> \n  count(sending_country_name, receiving_country_name) |>\n  arrange(-n) |> \n  head(n=10)\n\n# A tibble: 10 x 3\n   sending_country_name receiving_country_name     n\n   <chr>                <chr>                  <int>\n 1 Germany              France                   305\n 2 Italy                France                   268\n 3 Germany              Belgium                  235\n 4 Belgium              France                   198\n 5 Italy                Spain                    170\n 6 Spain                France                   149\n 7 United Kingdom       France                   131\n 8 Spain                Italy                    123\n 9 Poland               France                   122\n10 France               Belgium                  120\n\n\n# Intermezzo \n(Cartesian product = cross-product = all combinations) \n\nTiny dataset of team members\n\n::: {.cell}\n\n```{.r .cell-code}\nteam_members <- tibble(name = c( \"Alex\", \"Asier\", \"Franziska\", \"Sam\", \"Wim\")) \n# Tiny datset of available days\nsessions <- tibble(day = c(\"Monday\", \"Tuesday\", \"Thursday\"))\n:::\nMake all combinations of team members and available days\n\nfull_join(team_members, sessions, by = as.character())\n\nWarning: Using `by = character()` to perform a cross join was deprecated in dplyr 1.1.0.\ni Please use `cross_join()` instead.\n\n\n# A tibble: 15 x 2\n   name      day     \n   <chr>     <chr>   \n 1 Alex      Monday  \n 2 Alex      Tuesday \n 3 Alex      Thursday\n 4 Asier     Monday  \n 5 Asier     Tuesday \n 6 Asier     Thursday\n 7 Franziska Monday  \n 8 Franziska Tuesday \n 9 Franziska Thursday\n10 Sam       Monday  \n11 Sam       Tuesday \n12 Sam       Thursday\n13 Wim       Monday  \n14 Wim       Tuesday \n15 Wim       Thursday\n\n\nSame results, but more transparent code.\n\n\nthanks to Nick van Doormaal for this suggestion\n\nexpand_grid(team_members, sessions)\n\n# A tibble: 15 x 2\n   name      day     \n   <chr>     <chr>   \n 1 Alex      Monday  \n 2 Alex      Tuesday \n 3 Alex      Thursday\n 4 Asier     Monday  \n 5 Asier     Tuesday \n 6 Asier     Thursday\n 7 Franziska Monday  \n 8 Franziska Tuesday \n 9 Franziska Thursday\n10 Sam       Monday  \n11 Sam       Tuesday \n12 Sam       Thursday\n13 Wim       Monday  \n14 Wim       Tuesday \n15 Wim       Thursday\n\nfull_join(team_members, team_members, by = as.character()) |>\n  filter(name.x != name.y)\n\n# A tibble: 20 x 2\n   name.x    name.y   \n   <chr>     <chr>    \n 1 Alex      Asier    \n 2 Alex      Franziska\n 3 Alex      Sam      \n 4 Alex      Wim      \n 5 Asier     Alex     \n 6 Asier     Franziska\n 7 Asier     Sam      \n 8 Asier     Wim      \n 9 Franziska Alex     \n10 Franziska Asier    \n11 Franziska Sam      \n12 Franziska Wim      \n13 Sam       Alex     \n14 Sam       Asier    \n15 Sam       Franziska\n16 Sam       Wim      \n17 Wim       Alex     \n18 Wim       Asier    \n19 Wim       Franziska\n20 Wim       Sam      \n\n\n\nCreate all possible combinations of sending and receiving country names.\n\n::: {.cell}\n\n```{.r .cell-code}\npossible_mobility_names <- \n  full_join(country_labels, country_labels,\n            by = as.character()) |>\n  select(sending_country_name   = country_name.x,\n         receiving_country_name = country_name.y,\n         sending_country_code   = country_code.x,\n         receiving_country_code = country_code.y) |>\n  filter(sending_country_name != receiving_country_name)\n:::\nErasmus student mobility flows including zero flows\n\nflows_erasmus_full_zeros <-\n  labeled_erasmus_full |> \n  group_by(sending_country_name, receiving_country_name) |>\n  # Origin, destination, count\n  count() |>\n  rename(exchanges = n) |>\n  # join with all combinations to include zero-flow pairs\n  right_join(possible_mobility_names) |> \n  # change the NAs (= zero-flow) into 0\n  replace_na(list(exchanges=0))\n\nJoining with `by = join_by(sending_country_name, receiving_country_name)`\n\n\nNumber of exchanges frequencies reversed: 581 zero flows, 37 1-person flow\n\nflows_erasmus_full_zeros |>\n  ungroup() |>\n  count(exchanges) |>\n  arrange(exchanges) |>\n  print(n=40)\n\n# A tibble: 98 x 2\n   exchanges     n\n       <int> <int>\n 1         0   581\n 2         1    37\n 3         2    37\n 4         3    48\n 5         4    35\n 6         5    42\n 7         6    30\n 8         7    32\n 9         8    29\n10         9    19\n11        10    28\n12        11    20\n13        12    27\n14        13    14\n15        14    18\n16        15    20\n17        16    15\n18        17    15\n19        18    13\n20        19    15\n21        20    16\n22        21    10\n23        22    13\n24        23    14\n25        24     9\n26        25    13\n27        26     7\n28        27     7\n29        28     7\n30        29    13\n31        30     8\n32        31     9\n33        32     4\n34        33     7\n35        34     4\n36        35     4\n37        36     6\n38        37     6\n39        38     4\n40        39     3\n# ... with 58 more rows\n\n\nLet us make a histogram of this distribution\n\nflows_erasmus_full_zeros |>\n  ggplot() +\n  geom_histogram(aes(x=exchanges), binwidth = 5)\n\n\n\n\nHistogram of student mobility flow\n\n\n\n\n\nreverse_flows_erasmus_full_zeros <-\n  flows_erasmus_full_zeros |>\n  rename(sending_country_name = receiving_country_name,\n         receiving_country_name = sending_country_name,\n         reverse_exchanges = exchanges)\n\n\nfull_join(flows_erasmus_full_zeros, reverse_flows_erasmus_full_zeros,\n          by = (c(\"sending_country_name\", \"receiving_country_name\"))) |> \n  ungroup() |>\n  select(exchanges, reverse_exchanges) |>\n  cor() |> \n  as_tibble()\n\n# A tibble: 2 x 2\n  exchanges reverse_exchanges\n      <dbl>             <dbl>\n1     1                 0.463\n2     0.463             1    \n\n\nThis scatterplot is by design symetric in the diagonal\n\nfull_join(flows_erasmus_full_zeros, reverse_flows_erasmus_full_zeros,\n          by = (c(\"sending_country_name\", \"receiving_country_name\"))) |> \n  ungroup() |>\n  select(exchanges, reverse_exchanges) |>\n  ggplot() +\n  geom_point(aes(y=exchanges, x=reverse_exchanges) )\n\n\n\n\nRelation between exchanges\n\n\n\n\n\n\n9 Modeling\nRead the neighbor relations between countries\n\nadjacency <- read_csv(here(\"C:/Users/Gebruiker/Desktop/TidyTuesday/TT_20221115/adjacency.csv\")) |>\n  rename(sending_country_name = country_name,\n         receiving_country_name = neighbor) |>\n  # mark the rows that indicate shared borders\n  mutate(adjacent = 1) |>\n  # merge with the data that include all possible mobility streams\n  right_join(possible_mobility_names,\n             by=c(\"sending_country_name\",\"receiving_country_name\")) |>\n  # Set non-adjacent to 0\n  mutate(adjacent = replace_na(adjacent, 0)) \n\nRows: 120 Columns: 2\n-- Column specification --------------------------------------------------------\nDelimiter: \",\"\nchr (2): country_name, neighbor\n\ni Use `spec()` to retrieve the full column specification for this data.\ni Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\n\nmodel_data <- \n  flows_erasmus_full_zeros |> \n  inner_join(adjacency, \n            by = c(\"sending_country_name\",\"receiving_country_name\")) |>  \n  group_by(sending_country_name) |>\n  # total outflow from country\n  mutate(outflow = sum(exchanges)) |>\n  group_by(receiving_country_name) |>\n  # total inflow into country\n  mutate(inflow = sum(exchanges)) \n\nNumber of student exchanges from A to B as a function of total numbers of outgoing students from A and of total numbers of visiting students in B\n\nmodel_01 <- lm(formula = exchanges ~  inflow + outflow ,          , \n               data = model_data)\ntidy(model_01)\n\n# A tibble: 3 x 5\n  term        estimate std.error statistic   p.value\n  <chr>          <dbl>     <dbl>     <dbl>     <dbl>\n1 (Intercept) -12.2      0.942       -13.0 2.49e- 36\n2 inflow        0.0281   0.00100      27.9 1.63e-135\n3 outflow       0.0285   0.00161      17.7 2.55e- 63\n\nglance(model_01)\n\n# A tibble: 1 x 12\n  r.squared adj.r.s~1 sigma stati~2   p.value    df logLik    AIC    BIC devia~3\n      <dbl>     <dbl> <dbl>   <dbl>     <dbl> <dbl>  <dbl>  <dbl>  <dbl>   <dbl>\n1     0.448     0.447  17.5    539. 2.98e-172     2 -5703. 11415. 11436. 408538.\n# ... with 2 more variables: df.residual <int>, nobs <int>, and abbreviated\n#   variable names 1: adj.r.squared, 2: statistic, 3: deviance\n\n\nAdd adjacency\n\nmodel_02 <- lm(formula = exchanges ~  inflow + outflow + adjacent, \n               data = model_data)\ntidy(model_02)\n\n# A tibble: 4 x 5\n  term        estimate std.error statistic   p.value\n  <chr>          <dbl>     <dbl>     <dbl>     <dbl>\n1 (Intercept) -12.9     0.881        -14.7 2.03e- 45\n2 inflow        0.0274  0.000939      29.1 1.27e-144\n3 outflow       0.0265  0.00151       17.5 3.93e- 62\n4 adjacent     23.0     1.64          14.0 9.76e- 42\n\nglance(model_02)\n\n# A tibble: 1 x 12\n  r.squared adj.r.s~1 sigma stati~2   p.value    df logLik    AIC    BIC devia~3\n      <dbl>     <dbl> <dbl>   <dbl>     <dbl> <dbl>  <dbl>  <dbl>  <dbl>   <dbl>\n1     0.519     0.518  16.4    478. 1.36e-210     3 -5612. 11233. 11259. 355879.\n# ... with 2 more variables: df.residual <int>, nobs <int>, and abbreviated\n#   variable names 1: adj.r.squared, 2: statistic, 3: deviance\n\n\nStudents appear to fancy visiting nearby countries abroad!\n\n\n10 Visualization\nVisualization 1: Chord diagram (using library circlize)\nFull country names\n\nflows_erasmus_full_zeros |> \n  filter(exchanges > 0) |>\n  arrange(-exchanges) |> \n  chordDiagram()\n\n\n\n\nChord diagram\n\n\n\n\nUse the 2-letter abbreviations of countries here.\n\nflows_erasmus_full_zeros |> \n  filter(exchanges > 0) |>\n  arrange(-exchanges) |> \n  # without ungroup() the .._country_name columns will\n  # be retained\n  ungroup() |>\n  select(sending_country_code, receiving_country_code,\n         exchanges) |>\n  chordDiagram()\n\n\n\n\nChord diagram with 2-letter abbreviations\n\n\n\n\nOnly flows over 100\n\nflows_erasmus_full_zeros |> \n  filter(exchanges > 100) |>\n  arrange(-exchanges) |> \n  ungroup() |>\n  select(sending_country_code, receiving_country_code,\n         exchanges) |>\n  chordDiagram()\n\n\n\n\nChord diagram with only flows over 100\n\n\n\n\nVisulaization 2: Network representation We can also represent the countries as nodes in a network, with the student flows representing the links between them. Use package igraph here.\n\nflows_erasmus_full_zeros |>\n  filter(exchanges > 100) |>\n  graph_from_data_frame(directed = TRUE, \n                      vertices=country_labels) |>\n  plot(vertex.size=5)\n\n\n\n\nNetwork representation\n\n\n\n\nNo isolates\n\nflows_erasmus_full_zeros |>\n  filter(exchanges > 75) |>\n  graph_from_data_frame(directed = TRUE) |>\n  plot(vertex.size=5)\nflows_erasmus_full_zeros |>\n  filter(exchanges > 100) |>\n  graph_from_data_frame(directed = TRUE) |>\n  plot(vertex.size=5)\n\n\n\n\n\n\nNo isolates\n\n\n\n\n\n\n\nNo isolates\n\n\n\n\n\n\nFor alternative methods of visualizing mobility while maintaining the geographic relations, see Andrew Wheeler’s 2015 paper in Cartography and Geographic Information Science, at (behind paywall), here"
  },
  {
    "objectID": "02_TT_202202.html",
    "href": "02_TT_202202.html",
    "title": "3  Research of Board Games",
    "section": "",
    "text": "4 Introduction\nThe dataset for this Tidy Tuesday is about board games! Asier Moneva explores the following research questions: “What are the top 3 best-selling board games by game type?” and “How do board game sales relate to online user ratings?”\n\n\n5 Load packages\n\nlibrary(dplyr)\nlibrary(ggplot2)\n\nToday’s data are relational, which means there are multiple datasets (rating, details) that can be linked through some identifier or id variable or ‘key’.\n\n\n6 Import data\n\nratings <- readr::read_csv(\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-01-25/ratings.csv\")\n\n\ndetails <- readr::read_csv(\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-01-25/details.csv\")\n\n\n\n7 Explore data\nSo let’s have a quick look at the data.\n\nglimpse(ratings)\n\nRows: 21,831\nColumns: 10\n$ num           <dbl> 105, 189, 428, 72, 103, 191, 100, 3, 15, 35, 30, 182, 13~\n$ id            <dbl> 30549, 822, 13, 68448, 36218, 9209, 178900, 167791, 1733~\n$ name          <chr> \"Pandemic\", \"Carcassonne\", \"Catan\", \"7 Wonders\", \"Domini~\n$ year          <dbl> 2008, 2000, 1995, 2010, 2008, 2004, 2015, 2016, 2015, 20~\n$ rank          <dbl> 106, 190, 429, 73, 104, 192, 101, 4, 16, 36, 31, 183, 14~\n$ average       <dbl> 7.59, 7.42, 7.14, 7.74, 7.61, 7.41, 7.60, 8.42, 8.11, 7.~\n$ bayes_average <dbl> 7.487, 7.309, 6.970, 7.634, 7.499, 7.305, 7.508, 8.274, ~\n$ users_rated   <dbl> 108975, 108738, 108024, 89982, 81561, 76171, 74419, 7421~\n$ url           <chr> \"/boardgame/30549/pandemic\", \"/boardgame/822/carcassonne~\n$ thumbnail     <chr> \"https://cf.geekdo-images.com/S3ybV1LAp-8SnHIXLLjVqA__mi~\n\nglimpse(details)\n\nRows: 21,631\nColumns: 23\n$ num                     <dbl> 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, ~\n$ id                      <dbl> 30549, 822, 13, 68448, 36218, 9209, 178900, 16~\n$ primary                 <chr> \"Pandemic\", \"Carcassonne\", \"Catan\", \"7 Wonders~\n$ description             <chr> \"In Pandemic, several virulent diseases have b~\n$ yearpublished           <dbl> 2008, 2000, 1995, 2010, 2008, 2004, 2015, 2016~\n$ minplayers              <dbl> 2, 2, 3, 2, 2, 2, 2, 1, 2, 1, 3, 2, 1, 2, 2, 2~\n$ maxplayers              <dbl> 4, 5, 4, 7, 4, 5, 8, 5, 2, 5, 5, 4, 5, 5, 5, 4~\n$ playingtime             <dbl> 45, 45, 120, 30, 30, 60, 15, 120, 30, 150, 150~\n$ minplaytime             <dbl> 45, 30, 60, 30, 30, 30, 15, 120, 30, 30, 90, 3~\n$ maxplaytime             <dbl> 45, 45, 120, 30, 30, 60, 15, 120, 30, 150, 150~\n$ minage                  <dbl> 8, 7, 10, 10, 13, 8, 14, 12, 10, 12, 12, 10, 1~\n$ boardgamecategory       <chr> \"['Medical']\", \"['City Building', 'Medieval', ~\n$ boardgamemechanic       <chr> \"['Action Points', 'Cooperative Game', 'Hand M~\n$ boardgamefamily         <chr> \"['Components: Map (Global Scale)', 'Component~\n$ boardgameexpansion      <chr> \"['Pandemic: Gen Con 2016 Promos – Z-Force Tea~\n$ boardgameimplementation <chr> \"['Pandemic Legacy: Season 0', 'Pandemic Legac~\n$ boardgamedesigner       <chr> \"['Matt Leacock']\", \"['Klaus-Jürgen Wrede']\", ~\n$ boardgameartist         <chr> \"['Josh Cappel', 'Christian Hanisch', 'Régis M~\n$ boardgamepublisher      <chr> \"['Z-Man Games', 'Albi', 'Asmodee', 'Asmodee I~\n$ owned                   <dbl> 168364, 161299, 167733, 120466, 106956, 105748~\n$ trading                 <dbl> 2508, 1716, 2018, 1567, 2009, 930, 1110, 538, ~\n$ wanting                 <dbl> 625, 582, 485, 1010, 655, 692, 340, 2011, 924,~\n$ wishing                 <dbl> 9344, 7383, 5890, 12105, 8621, 6620, 5764, 192~\n\n\nYou see that the number of observations do not match!\nExplore whether both datasets have identical id\n\nidentical(details$id, ratings$id)\n\n[1] FALSE\n\n\nCount how many id are missing.\n\ntable(ratings$id %in% details$id)\n\n\nFALSE  TRUE \n  200 21631 \n\n\nFind which id are present in both datasets. Results not show here because of too long output.\n\nintersect(details$id, ratings$id)\n\nFind which id are absent in the dataset with the least observations\n\nsetdiff(ratings$id, details$id)\n\n  [1] 298130 286790   2415  12369  25999 304051 262554  67499  16268 236881\n [11] 102750  15391  10889   4875 165190 225303  18536 192323 143663  18704\n [21]  33125 297139   7578  32922 143459 237088 311004 195158  12624 201917\n [31]  34403  18061   5043  15049  23733 225828   6913 176633 198541  64608\n [41]   3610  29268 244268 177566  38836 275284  10544 284617 191292  96626\n [51]   8741   7752 136856  12900  30335 189615 183344  36238  39663 314125\n [61] 325678 246310 109827  19475  31412  69233   5649  98978   3814 140973\n [71] 265039  39278 188968 144378 303676  20533  13094   9860 310880 304666\n [81] 279649  40804   8249 245060 246895  10246  14698 172088   6124  20647\n [91] 264654 299690 147457  23616 258761 311990 132616 154841   8356 216360\n[101]  12169 226237 118561  49050 282410   2493   9398   9578   9512  24079\n[111]   3398 147616   7368 170390  36993  23999 316090  11674   9454  34129\n[121] 252901  10105 287304 164428  41611 232874   1550 252373   3909 145206\n[131]  36366 308870  24857 210350   6839 125585   9113 145400 239523  16830\n[141]  19304  40886  21437 328866 244528 252374  17996  22354 283849  14128\n[151] 305270 237834 137366  38524   3338   1221 319593   3830 102150  10154\n[161] 208800 214486  32324  86443 162888 221208 241611  17433   9736  18687\n[171] 104770   8426 247135 233284  11421  13918  31585   2103 210292 276641\n[181] 289055  15427  24994  47475  66276 205156   3047   8700 306072  14377\n[191]   1191 251026  19044 282389 296644 284839 144874 179124 150429  35499\n\n\nMerge data\n\ndf <- inner_join(ratings, details, by = \"id\")\n\nExplore data\n\nglimpse(df)\n\nRows: 21,631\nColumns: 32\n$ num.x                   <dbl> 105, 189, 428, 72, 103, 191, 100, 3, 15, 35, 3~\n$ id                      <dbl> 30549, 822, 13, 68448, 36218, 9209, 178900, 16~\n$ name                    <chr> \"Pandemic\", \"Carcassonne\", \"Catan\", \"7 Wonders~\n$ year                    <dbl> 2008, 2000, 1995, 2010, 2008, 2004, 2015, 2016~\n$ rank                    <dbl> 106, 190, 429, 73, 104, 192, 101, 4, 16, 36, 3~\n$ average                 <dbl> 7.59, 7.42, 7.14, 7.74, 7.61, 7.41, 7.60, 8.42~\n$ bayes_average           <dbl> 7.487, 7.309, 6.970, 7.634, 7.499, 7.305, 7.50~\n$ users_rated             <dbl> 108975, 108738, 108024, 89982, 81561, 76171, 7~\n$ url                     <chr> \"/boardgame/30549/pandemic\", \"/boardgame/822/c~\n$ thumbnail               <chr> \"https://cf.geekdo-images.com/S3ybV1LAp-8SnHIX~\n$ num.y                   <dbl> 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, ~\n$ primary                 <chr> \"Pandemic\", \"Carcassonne\", \"Catan\", \"7 Wonders~\n$ description             <chr> \"In Pandemic, several virulent diseases have b~\n$ yearpublished           <dbl> 2008, 2000, 1995, 2010, 2008, 2004, 2015, 2016~\n$ minplayers              <dbl> 2, 2, 3, 2, 2, 2, 2, 1, 2, 1, 3, 2, 1, 2, 2, 2~\n$ maxplayers              <dbl> 4, 5, 4, 7, 4, 5, 8, 5, 2, 5, 5, 4, 5, 5, 5, 4~\n$ playingtime             <dbl> 45, 45, 120, 30, 30, 60, 15, 120, 30, 150, 150~\n$ minplaytime             <dbl> 45, 30, 60, 30, 30, 30, 15, 120, 30, 30, 90, 3~\n$ maxplaytime             <dbl> 45, 45, 120, 30, 30, 60, 15, 120, 30, 150, 150~\n$ minage                  <dbl> 8, 7, 10, 10, 13, 8, 14, 12, 10, 12, 12, 10, 1~\n$ boardgamecategory       <chr> \"['Medical']\", \"['City Building', 'Medieval', ~\n$ boardgamemechanic       <chr> \"['Action Points', 'Cooperative Game', 'Hand M~\n$ boardgamefamily         <chr> \"['Components: Map (Global Scale)', 'Component~\n$ boardgameexpansion      <chr> \"['Pandemic: Gen Con 2016 Promos – Z-Force Tea~\n$ boardgameimplementation <chr> \"['Pandemic Legacy: Season 0', 'Pandemic Legac~\n$ boardgamedesigner       <chr> \"['Matt Leacock']\", \"['Klaus-Jürgen Wrede']\", ~\n$ boardgameartist         <chr> \"['Josh Cappel', 'Christian Hanisch', 'Régis M~\n$ boardgamepublisher      <chr> \"['Z-Man Games', 'Albi', 'Asmodee', 'Asmodee I~\n$ owned                   <dbl> 168364, 161299, 167733, 120466, 106956, 105748~\n$ trading                 <dbl> 2508, 1716, 2018, 1567, 2009, 930, 1110, 538, ~\n$ wanting                 <dbl> 625, 582, 485, 1010, 655, 692, 340, 2011, 924,~\n$ wishing                 <dbl> 9344, 7383, 5890, 12105, 8621, 6620, 5764, 192~\n\n\nLooks like there are some duplicated variables!\nNot really\n\nidentical(df$year, df$yearpublished)\n\n[1] FALSE\n\n\nWhat is the difference?\n\nwhich(df$year != df$yearpublished)\n\n [1]   209   297   881  1030  2239  3623  4089  4723 15507 16494 21623\n\n\nAh, I see!\n\ndf$year[21623]\n\n[1] 3000\n\ndf$yearpublished[21623]\n\n[1] -3000\n\n\nNope. Very different. Can these be row numbers (e.g. spreadsheet)?\n\nidentical(df$num.x, df$num.y)\n\n[1] FALSE\n\n\nAlmost, but nope.\n\nidentical(df$name, df$primary)\n\n[1] FALSE\n\nwhich(df$name != df$primary)\n\n[1]  7222 10903 12599 13233 19925\n\n\nLooks like there is some sort of syntax issue in primary\n\ndf$name[19925]\n\n[1] \"Admiral Ackbar \\\"It's a TRAP!\\\" GAME\"\n\ndf$primary[19925]\n\n[1] \"Admiral Ackbar \\\"It\\\\'s a TRAP!\\\" GAME\"\n\n\nBingo!\n\nidentical(df$playingtime, df$maxplaytime)\n\n[1] TRUE\n\n\nLet’s drop the duplicated variable\n\ndf <- df %>% \n  select(\n    - playingtime,\n    - primary\n  )\n\nLooks like we are good now! Imagine the following:\n\nWe want to buy a board game for a friend, but we don’t know which one to get.\nWe know our friend likes to play alone with his girlfriend sometimes, but some Other times he likes to invite friends over to play.\n\nWhat are the top 3 best-selling board games by game type?\n\nHow do board game sales relate to online user ratings?\nWhat are the top 3 best-selling board games by game type?\n\n\ndf <- df %>% \n  # Create new variable to define type of game based on number of players\n  mutate(minplayers_fct = case_when(\n    minplayers < 2 ~ \"single player\",\n    minplayers == 2 ~ \"two players\",\n    minplayers > 2 ~ \"multiplayer\"\n  ))\n\n\ndf %>% \n  # Select only relevant variables\n  select(\n    name,\n    minplayers_fct,\n    owned\n  ) %>% \n  group_by(minplayers_fct) %>% \n  slice_max(owned, n = 3) %>% \n  knitr::kable()\n\n\n\n\nname\nminplayers_fct\nowned\n\n\n\n\nCatan\nmultiplayer\n167733\n\n\nMunchkin\nmultiplayer\n78849\n\n\nDixit\nmultiplayer\n76535\n\n\nTerraforming Mars\nsingle player\n101872\n\n\nScythe\nsingle player\n86371\n\n\nWingspan\nsingle player\n83920\n\n\nPandemic\ntwo players\n168364\n\n\nCarcassonne\ntwo players\n161299\n\n\n7 Wonders\ntwo players\n120466\n\n\n\n\n\nWe have identified the best-sellers for each category, but best-sellers might be a product of marketing rather than an indicator of good quality. It might be the case that players buy the product because of good marketing but then find the game boring, too complicated, etc.\nHow do board game sales relate to online user ratings?\n\n\n8 Plot data\n\ndf %>% \n  ggplot(mapping = aes(\n    x = average,\n    y = owned,\n    # Examine if there are clear patterns by number of players\n    color = minplayers_fct\n  )) +\n  geom_point(alpha = .5) +\n  # There seems to be three outliers that are best-sellers and also have high \n  # ratings\n  ggrepel::geom_text_repel(\n    data = df %>% filter(owned > 150000),\n    mapping = aes(label = name),\n    color = \"black\"\n    ) +\n  scale_x_continuous(limits = c(0, 10)) +\n  scale_color_viridis_d() +\n  labs(\n    title = \"How do board game sales relate to online user ratings?\",\n    x = \"average user rating\",\n    y = \"number of\\ncopies owned\",\n    color = \"Category\"\n  ) +\n  theme_classic() +\n  theme(axis.title.y = element_text(\n    angle = 0,\n    vjust = .5\n  ))"
  },
  {
    "objectID": "03_TT_202202.html",
    "href": "03_TT_202202.html",
    "title": "4  Wrangling dates-time data",
    "section": "",
    "text": "5 Introduction\nThe dataset for this Tidy Tuesday is about animal rescues! Alex Trinidad explores the temporal trends of animal rescues using lubridate package (Grolemund & Wickham, 2011).\n\n\n6 Load packages and data\nInstall TT package (if necessary)\ninstall.packages(\"tidytuesdayR\")\ninstall.packages(\"tidyverse\")\n\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(tidytuesdayR)\n\nDownload data.\n\nmydatalist <- tidytuesdayR::tt_load(\"2021-06-29\")\n\n\n    Downloading file 1 of 1: `animal_rescues.csv`\n\n\nData as tbl\n\nmydata <- mydatalist$animal_rescues\n\n\n\n7 Explore the data\n\nglimpse(mydata)\n\nRows: 7,544\nColumns: 31\n$ incident_number               <dbl> 139091, 275091, 2075091, 2872091, 355309~\n$ date_time_of_call             <chr> \"01/01/2009 03:01\", \"01/01/2009 08:51\", ~\n$ cal_year                      <dbl> 2009, 2009, 2009, 2009, 2009, 2009, 2009~\n$ fin_year                      <chr> \"2008/09\", \"2008/09\", \"2008/09\", \"2008/0~\n$ type_of_incident              <chr> \"Special Service\", \"Special Service\", \"S~\n$ pump_count                    <chr> \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", ~\n$ pump_hours_total              <chr> \"2\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", \"1\", ~\n$ hourly_notional_cost          <dbl> 255, 255, 255, 255, 255, 255, 255, 255, ~\n$ incident_notional_cost        <chr> \"510\", \"255\", \"255\", \"255\", \"255\", \"255\"~\n$ final_description             <chr> \"Redacted\", \"Redacted\", \"Redacted\", \"Red~\n$ animal_group_parent           <chr> \"Dog\", \"Fox\", \"Dog\", \"Horse\", \"Rabbit\", ~\n$ originof_call                 <chr> \"Person (land line)\", \"Person (land line~\n$ property_type                 <chr> \"House - single occupancy\", \"Railings\", ~\n$ property_category             <chr> \"Dwelling\", \"Outdoor Structure\", \"Outdoo~\n$ special_service_type_category <chr> \"Other animal assistance\", \"Other animal~\n$ special_service_type          <chr> \"Animal assistance involving livestock -~\n$ ward_code                     <chr> \"E05011467\", \"E05000169\", \"E05000558\", \"~\n$ ward                          <chr> \"Crystal Palace & Upper Norwood\", \"Woods~\n$ borough_code                  <chr> \"E09000008\", \"E09000008\", \"E09000029\", \"~\n$ borough                       <chr> \"Croydon\", \"Croydon\", \"Sutton\", \"Hilling~\n$ stn_ground_name               <chr> \"Norbury\", \"Woodside\", \"Wallington\", \"Ru~\n$ uprn                          <chr> \"NULL\", \"NULL\", \"NULL\", \"1.00021E+11\", \"~\n$ street                        <chr> \"Waddington Way\", \"Grasmere Road\", \"Mill~\n$ usrn                          <chr> \"20500146\", \"NULL\", \"NULL\", \"21401484\", ~\n$ postcode_district             <chr> \"SE19\", \"SE25\", \"SM5\", \"UB9\", \"RM3\", \"RM~\n$ easting_m                     <chr> \"NULL\", \"534785\", \"528041\", \"504689\", \"N~\n$ northing_m                    <chr> \"NULL\", \"167546\", \"164923\", \"190685\", \"N~\n$ easting_rounded               <dbl> 532350, 534750, 528050, 504650, 554650, ~\n$ northing_rounded              <dbl> 170050, 167550, 164950, 190650, 192350, ~\n$ latitude                      <chr> \"NULL\", \"51.39095371\", \"51.36894086\", \"5~\n$ longitude                     <chr> \"NULL\", \"-0.064166887\", \"-0.161985191\", ~\n\n\nDo we have missing data?\n\nsummary(mydata)\n\n incident_number     date_time_of_call     cal_year      fin_year        \n Min.   :     4149   Length:7544        Min.   :2009   Length:7544       \n 1st Qu.: 49306118   Class :character   1st Qu.:2012   Class :character  \n Median : 89438626   Mode  :character   Median :2015   Mode  :character  \n Mean   : 91854662                      Mean   :2015                     \n 3rd Qu.:131567118                      3rd Qu.:2018                     \n Max.   :233284091                      Max.   :2021                     \n NA's   :3478                                                            \n type_of_incident    pump_count        pump_hours_total   hourly_notional_cost\n Length:7544        Length:7544        Length:7544        Min.   :255.0       \n Class :character   Class :character   Class :character   1st Qu.:260.0       \n Mode  :character   Mode  :character   Mode  :character   Median :298.0       \n                                                          Mean   :301.3       \n                                                          3rd Qu.:333.0       \n                                                          Max.   :352.0       \n                                                                              \n incident_notional_cost final_description  animal_group_parent\n Length:7544            Length:7544        Length:7544        \n Class :character       Class :character   Class :character   \n Mode  :character       Mode  :character   Mode  :character   \n                                                              \n                                                              \n                                                              \n                                                              \n originof_call      property_type      property_category \n Length:7544        Length:7544        Length:7544       \n Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character  \n                                                         \n                                                         \n                                                         \n                                                         \n special_service_type_category special_service_type  ward_code        \n Length:7544                   Length:7544          Length:7544       \n Class :character              Class :character     Class :character  \n Mode  :character              Mode  :character     Mode  :character  \n                                                                      \n                                                                      \n                                                                      \n                                                                      \n     ward           borough_code         borough          stn_ground_name   \n Length:7544        Length:7544        Length:7544        Length:7544       \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n                                                                            \n     uprn              street              usrn           postcode_district \n Length:7544        Length:7544        Length:7544        Length:7544       \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n                                                                            \n  easting_m          northing_m        easting_rounded  northing_rounded\n Length:7544        Length:7544        Min.   :500050   Min.   :157050  \n Class :character   Class :character   1st Qu.:524750   1st Qu.:175150  \n Mode  :character   Mode  :character   Median :531650   Median :181250  \n                                       Mean   :531243   Mean   :180725  \n                                       3rd Qu.:537750   3rd Qu.:186750  \n                                       Max.   :571350   Max.   :200750  \n                                                                        \n   latitude          longitude        \n Length:7544        Length:7544       \n Class :character   Class :character  \n Mode  :character   Mode  :character  \n                                      \n                                      \n                                      \n                                      \n\n\nCreate a unique ID\n\nmydata <- mydata %>% \n  arrange(cal_year) %>% \n  mutate(uid = paste0(seq(1:n()), LETTERS, letters))\n\nAre there any duplicated?\n\ntable(duplicated(mydata$uid))\n\n\nFALSE \n 7544 \n\n\nSelect variables of interest.\n\nmydataselection <- mydata %>% \n  select(uid, date_time_of_call, type_of_incident, animal_group_parent, borough_code)\n\nShow me the frequencies of different types of animal.\n\nmyfreq <- mydataselection %>% \n  group_by(animal_group_parent) %>% \n  summarise(freq = n()) %>% \n  arrange(-freq)\nmyfreq\n\n# A tibble: 28 x 2\n   animal_group_parent               freq\n   <chr>                            <int>\n 1 Cat                               3649\n 2 Bird                              1530\n 3 Dog                               1194\n 4 Fox                                349\n 5 Horse                              193\n 6 Unknown - Domestic Animal Or Pet   191\n 7 Deer                               130\n 8 Unknown - Wild Animal               89\n 9 Squirrel                            65\n10 Unknown - Heavy Livestock Animal    49\n# ... with 18 more rows\n\n\nRemove unkonwn type of animals from the dataset.\n\nmydataselection <- mydataselection %>% \n  filter(!grepl(\"Unknown\", animal_group_parent))\n\n\nmyfreq <- mydataselection %>% \n  group_by(animal_group_parent) %>% \n  summarise(freq = n()) %>% \n  arrange(-freq)\n\nMerging the cat counts.\n\nmydataselection$animal_group_parent <- recode(mydataselection$animal_group_parent,\n                                              \"cat\" = \"Cat\")\n\nAnother way to do this (Nick van Doormaal suggestion).\n\nmydataselection$animal_group_parent <- tolower(mydataselection$animal_group_parent)\n\n\n\n8 Working with Date-Time Data\nNow we are ready to work with Data-Time Data. We want to separate the date in year, month, day, hour….\nBut, what variable type is the date in our data set?\n\nglimpse(mydataselection)\n\nRows: 7,211\nColumns: 5\n$ uid                 <chr> \"1Aa\", \"2Bb\", \"3Cc\", \"4Dd\", \"5Ee\", \"7Gg\", \"8Hh\", \"~\n$ date_time_of_call   <chr> \"01/01/2009 03:01\", \"01/01/2009 08:51\", \"04/01/200~\n$ type_of_incident    <chr> \"Special Service\", \"Special Service\", \"Special Ser~\n$ animal_group_parent <chr> \"dog\", \"fox\", \"dog\", \"horse\", \"rabbit\", \"dog\", \"do~\n$ borough_code        <chr> \"E09000008\", \"E09000008\", \"E09000029\", \"E09000017\"~\n\n\nIf not “date” format, transform ir\n\nmydatadate <- mydataselection %>% \n  mutate(datetime = lubridate::as_datetime(date_time_of_call, \n                                   format = \"%d/%m/%Y %H:%M\"))\n# # Non-lubridate Alternative\n# mydatadate <- mydataselection %>% \n#   mutate(datetime = strptime(date_time_of_call,\n#                          format =\"%d/%m/%Y %H:%M\", \n#                          tz = \"Europe/London\"))\n# OlsonNames() # function for for the tz\n\nCreate separate variables for day, month, year, hour, minute, and date.\n\nmydatadate <- mydataselection %>% \n  mutate(datetime = as_datetime(date_time_of_call,\n                            format =\"%d/%m/%Y %H:%M\"),\n         day = day(datetime),\n         month = month(datetime),\n         year = year(datetime),\n         hour = hour(datetime),\n         minute = minute(datetime),\n         date = as_date(datetime))\n\nhead(mydatadate[, 6:12])\n\n# A tibble: 6 x 7\n  datetime              day month  year  hour minute date      \n  <dttm>              <int> <dbl> <dbl> <int>  <int> <date>    \n1 2009-01-01 03:01:00     1     1  2009     3      1 2009-01-01\n2 2009-01-01 08:51:00     1     1  2009     8     51 2009-01-01\n3 2009-01-04 10:07:00     4     1  2009    10      7 2009-01-04\n4 2009-01-05 12:27:00     5     1  2009    12     27 2009-01-05\n5 2009-01-06 15:23:00     6     1  2009    15     23 2009-01-06\n6 2009-01-07 06:29:00     7     1  2009     6     29 2009-01-07\n\n\nHow many cases do we have now per day?\n\ncaseperday <- mydatadate %>% \n  group_by(date) %>% \n  summarise(resc_counts = n())\n\nPlot trends of cases\n\nggplot(data = caseperday, \n       aes(\n         x = date,\n         y = resc_counts\n       )) +\n  geom_line()\n\n\n\n\nAnd how many cases do we have per year?\n\nmydatadate %>% \n  group_by(year) %>% \n  summarise(resc_counts = n()) %>% \n  ggplot() +\n  aes(\n    x = year,\n    y = resc_counts\n  ) + \n  geom_line()\n\n\n\n\nIs there a rescue every day?\n\nperday <- mydatadate %>% \n          group_by(date) %>% \n          summarise(resc_counts = n())\n\nHow many days are (more or less) in those years?\n\nlength(unique(mydatadate$year)) * 365\n\n[1] 4745\n\n\nHow can I know the days that are missing? Create for this a data set with all the days\n\ncompdates <- data.frame(date = c(seq(ymd('2009-01-01'), \n                                     ymd('2021-12-31'), by = '1 day')))\n\nSave missing dates\n\nmissingdates <- anti_join(compdates, perday)\n\nJoining with `by = join_by(date)`\n\n\nAdd missing dates to our data set.\nfulldates <- rbind(perday, missingdates) #\nThis will give an error because we need the same arguments We need the same arguments\n\nmissingdates <- missingdates %>% \n  mutate(resc_counts = vector(mode = \"numeric\", length = length(.)))\n\nAdd now the missing dates to our data set\n\nfulldates <- rbind(perday, missingdates)\n\nAre any date duplicated?\n\ntable(duplicated(fulldates$date))\n\n\nFALSE \n 4748 \n\n\nWim Bernasco’s suggestion instead of using anti_join() and rbind(), use left_join.\n\nfulldates <- left_join(compdates, perday, by = \"date\") %>% \n  replace(is.na(.), 0)\n\nSeparate the date ymd\n\nfulldates <- fulldates %>% \n  mutate(year = year(date),\n         month = month(date),\n         day = day(date))\n\nWhat week of the year did it happen?\n\nfulldates <- fulldates %>% \n  mutate(week = week(date))\n\nWhat day of the week did it happen?\n\nfulldates <- fulldates %>% \n  mutate(weekday = wday(date, label = TRUE))\n\n\n\n9 Plotting results\nPlot by week.\n\nbyweek <- fulldates %>% \n  group_by(year, week) %>% \n  summarise(resc_counts = sum(resc_counts))\n\n`summarise()` has grouped output by 'year'. You can override using the\n`.groups` argument.\n\n\n\nggplot(data = byweek) +\n  geom_line(aes(x = week, y = resc_counts), size = 1) +\n  facet_wrap(vars(year),scales = \"free_x\") \n\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\ni Please use `linewidth` instead.\n\n\n\n\n\nPlot Trends by Type of Animal, so accounting the type of animals.\nFirst cat\n\ncat <- mydatadate %>% \n  filter(animal_group_parent == \"cat\") %>%  \n  group_by(date, animal_group_parent) %>% \n  summarise(resc_counts = n())\n\n`summarise()` has grouped output by 'date'. You can override using the\n`.groups` argument.\n\nmdatecat <- anti_join(compdates, cat)\n\nJoining with `by = join_by(date)`\n\nfullcat <- rbind(cat, mdatecat) %>% \n  mutate(animal_group_parent = \"cat\") %>% \n  replace(is.na(.),0)\n\nDog now.\n\ndog <- mydatadate %>% \n  filter(animal_group_parent == \"dog\") %>%  \n  group_by(date, animal_group_parent) %>% \n  summarise(resc_counts = n())\n\n`summarise()` has grouped output by 'date'. You can override using the\n`.groups` argument.\n\nmdatedog <- anti_join(compdates, dog)\n\nJoining with `by = join_by(date)`\n\nfulldog <- rbind(dog, mdatedog) %>% \n  mutate(animal_group_parent = \"dog\") %>% \n  replace(is.na(.),0)\n\nBird now.\n\nbird <- mydatadate %>% \n  filter(animal_group_parent == \"bird\") %>%  \n  group_by(date, animal_group_parent) %>% \n  summarise(resc_counts = n())\n\n`summarise()` has grouped output by 'date'. You can override using the\n`.groups` argument.\n\nmdatebird <- anti_join(compdates, bird)\n\nJoining with `by = join_by(date)`\n\nfullbird <- rbind(bird, mdatebird) %>% \n  mutate(animal_group_parent = \"bird\") %>% \n  replace(is.na(.),0)\n\nThree datasets together.\n\nmyfulldata <- rbind(fullcat,fulldog, fullbird)\n\nDates by components\n\nmyfulldata <- myfulldata %>% \n  mutate(day = day(date),\n         month = month(date, label = TRUE),\n         year = year(date),\n         week = week(date),\n         weekday = wday(date, label = TRUE))\n\nBy day of the week\n\nbywday <- myfulldata %>% \n  group_by(year, weekday, animal_group_parent) %>% \n  summarise(resc_counts = sum(resc_counts))\n\n`summarise()` has grouped output by 'year', 'weekday'. You can override using\nthe `.groups` argument.\n\n\nWhat levels are in weekday?\n\nlevels(bywday$weekday)\n\n[1] \"zo\" \"ma\" \"di\" \"wo\" \"do\" \"vr\" \"za\"\n\n\nOrder these levels.\n\nlevelorder <- c(\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\")\n\n\nggplot(data = bywday) +\n  geom_line(aes(x = factor(weekday, level = levelorder), \n                y = resc_counts, \n                group = animal_group_parent, \n                color = animal_group_parent), size = 1) +\n  facet_wrap(vars(year), scales = \"free_x\")+\n  labs(\n    title = \"Animal Rescue per Weekday\",\n    x = \"Weekday\",\n    y = \"Count of Rescues\",\n    color = \"Animal\"\n  )\n\n\n\n\nBy week of the year\n\nmyfulldata <- myfulldata %>% \n  mutate(weekyear = paste0(week,month,day))\n\n\nbyweek <- myfulldata %>% \n  group_by(year, weekyear, animal_group_parent) %>% \n  summarise(resc_counts = sum(resc_counts))\n\n`summarise()` has grouped output by 'year', 'weekyear'. You can override using\nthe `.groups` argument.\n\n\nPlot it.\n\nggplot(data = byweek) +\n  geom_line(aes(x = weekyear, \n                y = resc_counts, \n                group = animal_group_parent, \n                color = animal_group_parent), size = 1) +\n  facet_wrap(vars(year), scales = \"free_x\") +\n  labs(\n    title = \"Animal Rescue per Week\",\n    x = \"Week\",\n    y = \"Count of Rescues\",\n    color = \"Animal\"\n  )\n\n\n\n\nBy month of the year\n\nbymonth <- myfulldata %>% \n  group_by(year, month, animal_group_parent) %>% \n  summarise(resc_counts = sum(resc_counts))\n\n`summarise()` has grouped output by 'year', 'month'. You can override using the\n`.groups` argument.\n\n\n\nggplot(data = bymonth) +\n  geom_line(aes(x = month, \n                y = resc_counts, \n                group = animal_group_parent, \n                color = animal_group_parent), size = 1) +\n  facet_wrap(vars(year), scales = \"free_x\") +\n  labs(\n    title = \"Animal Rescue per Month\",\n    x = \"Month\",\n    y = \"Count of Rescues\",\n    color = \"Animal\"\n  )\n\n\n\n\nBy year\n\nbyyear <- myfulldata %>% \n  group_by(year,animal_group_parent) %>% \n  summarise(resc_counts = sum(resc_counts))\n\n`summarise()` has grouped output by 'year'. You can override using the\n`.groups` argument.\n\n\n\nggplot(data = byyear) +\n  geom_line(aes(x = year, \n                y = resc_counts, \n                group = animal_group_parent, \n                color = animal_group_parent), size = 1) +\n  labs(\n    title = \"Animal Rescue per Year\",\n    x = \"Year\",\n    y = \"Count of Rescues\",\n    color = \"Animal\"\n  )"
  },
  {
    "objectID": "05_TT_202203.html",
    "href": "05_TT_202203.html",
    "title": "5  Researching Spanish soccer data",
    "section": "",
    "text": "6 Introduction\n[1^]Wim Bernasco, Franziska Yasrebi-de Kom provided fertile suggestions on code and comments\n\n\n7 Packages and data\nInstall packages, the admin reuqired to get going\n#install.packages('tidyverse')\n#install.packages('lubridate')\n#install.packages('devtools')\n#library(devtools)\n#install_github(\"jalapic/engsoccerdata\")\nLoad libraries\n\nlibrary(tidyverse)\n\nWarning: package 'tidyverse' was built under R version 4.1.3\n\n\n-- Attaching packages --------------------------------------- tidyverse 1.3.2 --\nv ggplot2 3.4.0     v purrr   1.0.1\nv tibble  3.1.8     v dplyr   1.1.0\nv tidyr   1.3.0     v stringr 1.5.0\nv readr   2.1.3     v forcats 1.0.0\n\n\nWarning: package 'ggplot2' was built under R version 4.1.3\n\n\nWarning: package 'tibble' was built under R version 4.1.3\n\n\nWarning: package 'tidyr' was built under R version 4.1.3\n\n\nWarning: package 'readr' was built under R version 4.1.3\n\n\nWarning: package 'purrr' was built under R version 4.1.3\n\n\nWarning: package 'dplyr' was built under R version 4.1.3\n\n\nWarning: package 'stringr' was built under R version 4.1.3\n\n\nWarning: package 'forcats' was built under R version 4.1.3\n\n\n-- Conflicts ------------------------------------------ tidyverse_conflicts() --\nx dplyr::filter() masks stats::filter()\nx dplyr::lag()    masks stats::lag()\n\nlibrary(lubridate)\n\nWarning: package 'lubridate' was built under R version 4.1.3\n\n\n\nAttaching package: 'lubridate'\n\nThe following objects are masked from 'package:base':\n\n    date, intersect, setdiff, union\n\nlibrary(engsoccerdata)\n\nWarning: package 'engsoccerdata' was built under R version 4.1.3\n\n\nengsoccerdata is a package that includes data. Let us fist see what data are included (list the data in this package).\n\ndata(package=\"engsoccerdata\")  \n\nIf you like sports data, checkout for free datasets\n\n\n8 Exploration\nWhat type of dataset is spain? I hope a data.frame.\n\nspain %>% class()\n\n[1] \"data.frame\"\n\n\nGreat, it is a data.frame\nWhat are the names of the variables. I hope they are self-explanatory.\n\nspain %>% names()\n\n [1] \"Date\"    \"Season\"  \"home\"    \"visitor\" \"HT\"      \"FT\"      \"hgoal\"  \n [8] \"vgoal\"   \"tier\"    \"round\"   \"group\"   \"notes\"  \n\n\nLet us peek into the data.\n\nspain %>% glimpse()\n\nRows: 23,915\nColumns: 12\n$ Date    <chr> \"1929-02-10\", \"1929-02-10\", \"1929-02-10\", \"1929-02-10\", \"1929-~\n$ Season  <dbl> 1928, 1928, 1928, 1928, 1928, 1928, 1928, 1928, 1928, 1928, 19~\n$ home    <chr> \"Arenas de Getxo\", \"Espanyol Barcelona\", \"Real Madrid\", \"Real ~\n$ visitor <chr> \"Atletico Madrid\", \"Real Union\", \"CE Europa\", \"Athletic Bilbao~\n$ HT      <chr> \"0-2\", \"1-0\", \"0-0\", \"1-1\", \"0-0\", \"0-1\", \"3-0\", \"0-3\", \"0-1\",~\n$ FT      <chr> \"2-3\", \"3-2\", \"5-0\", \"1-1\", \"0-2\", \"1-2\", \"9-0\", \"0-3\", \"3-1\",~\n$ hgoal   <dbl> 2, 3, 5, 1, 0, 1, 9, 0, 3, 5, 3, 3, 1, 0, 2, 1, 2, 3, 2, 2, 3,~\n$ vgoal   <dbl> 3, 2, 0, 1, 2, 2, 0, 3, 1, 2, 0, 1, 1, 4, 1, 2, 1, 0, 2, 0, 3,~\n$ tier    <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,~\n$ round   <chr> \"league\", \"league\", \"league\", \"league\", \"league\", \"league\", \"l~\n$ group   <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~\n$ notes   <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA~\n\n\nYou should see something like this:\n# Rows: 25,435\n# Columns: 12\n# $ Date    <date> 1929-02-10, 1929-02-10, 1929-02-10, 1929-02-10, 1929-02-12, 1929-02-~\n# $ Season  <dbl> 1928, 1928, 1928, 1928, 1928, 1928, 1928, 1928, 1928, 1928, 1928, 192~\n# $ home    <chr> \"Arenas de Getxo\"\nThis is much more intuitive, but it only works interactively/ Try it out yourself, but do not include the View function in your script\nspain %>% View()\nAlternatively, a quick look at the first 10 rows.\n\nspain %>% \n  select(Date, home, visitor, FT) %>% \n  head(n = 10)\n\n         Date               home            visitor  FT\n1  1929-02-10    Arenas de Getxo    Atletico Madrid 2-3\n2  1929-02-10 Espanyol Barcelona         Real Union 3-2\n3  1929-02-10        Real Madrid          CE Europa 5-0\n4  1929-02-10      Real Sociedad    Athletic Bilbao 1-1\n5  1929-02-12   Racing Santander       FC Barcelona 0-2\n6  1929-02-17       FC Barcelona        Real Madrid 1-2\n7  1929-02-17    Athletic Bilbao Espanyol Barcelona 9-0\n8  1929-02-17    Atletico Madrid      Real Sociedad 0-3\n9  1929-02-17         Real Union   Racing Santander 3-1\n10 1929-02-17          CE Europa    Arenas de Getxo 5-2\n\n\nLet us look at frequencies of some variables.\nHow many teams?\n\nspain %>% count(home)\n\n                  home    n\n1           AD Almeria   34\n2             Albacete  135\n3      Arenas de Getxo   65\n4      Athletic Bilbao 1362\n5      Atletico Madrid 1288\n6      Atletico Tetuan   15\n7            Burgos CF  102\n8           CA Osasuna  639\n9            CD Alaves  171\n10         CD Alcoyano   54\n11        CD Castellon  167\n12           CD Condal   15\n13          CD Leonesa   15\n14         CD Logrones  173\n15           CD Malaga  323\n16         CD Numancia   76\n17         CD Tenerife  247\n18           CE Europa   27\n19         CE Sabadell  213\n20      CF Extremadura   40\n21           CP Merida   40\n22            Cadiz CF  223\n23          Celta Vigo  830\n24          Cordoba CF  141\n25 Deportivo La Coruna  746\n26            Elche CF  339\n27  Espanyol Barcelona 1294\n28        FC Barcelona 1362\n29           Getafe CF  228\n30           Gimnastic   58\n31          Granada CF  352\n32         Hercules CF  314\n33          Levante UD  201\n34           Malaga CF  285\n35       Pontevedra CF   90\n36        RCD Mallorca  494\n37    Racing Santander  713\n38      Rayo Vallecano  321\n39          Real Betis  845\n40         Real Burgos   57\n41           Real Jaen   45\n42         Real Madrid 1362\n43         Real Murcia  293\n44         Real Oviedo  596\n45       Real Sociedad 1132\n46          Real Union   36\n47     Real Valladolid  733\n48       Real Zaragoza  993\n49   Recreativo Huelva   93\n50       SD Compostela   80\n51            SD Eibar   38\n52          Sevilla FC 1185\n53      Sporting Gijon  710\n54          UD Almeria  114\n55       UD Las Palmas  529\n56        UD Salamanca  212\n57           UE Lleida   34\n58         Valencia CF 1313\n59       Villarreal CF  304\n60            Xerez CD   19\n\n\nFrequencies of variable-combinations\nHow many times did team A host team B?\n\nspain %>% count(home, visitor)\n\n                    home             visitor  n\n1             AD Almeria     Athletic Bilbao  2\n2             AD Almeria     Atletico Madrid  2\n3             AD Almeria           Burgos CF  1\n4             AD Almeria          CA Osasuna  1\n5             AD Almeria           CD Malaga  1\n6             AD Almeria  Espanyol Barcelona  2\n7             AD Almeria        FC Barcelona  2\n8             AD Almeria         Hercules CF  2\n9             AD Almeria      Rayo Vallecano  1\n10            AD Almeria          Real Betis  2\n11            AD Almeria         Real Madrid  2\n12            AD Almeria         Real Murcia  1\n13            AD Almeria       Real Sociedad  2\n14            AD Almeria     Real Valladolid  1\n15            AD Almeria       Real Zaragoza  2\n16            AD Almeria          Sevilla FC  2\n17            AD Almeria      Sporting Gijon  2\n18            AD Almeria       UD Las Palmas  2\n19            AD Almeria        UD Salamanca  2\n20            AD Almeria         Valencia CF  2\n21              Albacete     Athletic Bilbao  7\n22              Albacete     Atletico Madrid  7\n23              Albacete          CA Osasuna  5\n24              Albacete         CD Logrones  4\n25              Albacete         CD Numancia  1\n26              Albacete         CD Tenerife  5\n27              Albacete           CP Merida  1\n28              Albacete            Cadiz CF  2\n29              Albacete          Celta Vigo  5\n30              Albacete Deportivo La Coruna  7\n31              Albacete  Espanyol Barcelona  6\n32              Albacete        FC Barcelona  7\n33              Albacete           Getafe CF  1\n34              Albacete          Levante UD  1\n35              Albacete           Malaga CF  2\n36              Albacete        RCD Mallorca  3\n37              Albacete    Racing Santander  5\n38              Albacete      Rayo Vallecano  3\n39              Albacete          Real Betis  4\n40              Albacete         Real Burgos  2\n41              Albacete         Real Madrid  7\n42              Albacete         Real Murcia  1\n43              Albacete         Real Oviedo  5\n44              Albacete       Real Sociedad  7\n45              Albacete     Real Valladolid  5\n46              Albacete       Real Zaragoza  7\n47              Albacete       SD Compostela  2\n48              Albacete          Sevilla FC  7\n49              Albacete      Sporting Gijon  5\n50              Albacete        UD Salamanca  1\n51              Albacete           UE Lleida  1\n52              Albacete         Valencia CF  7\n53              Albacete       Villarreal CF  2\n54       Arenas de Getxo     Athletic Bilbao  7\n55       Arenas de Getxo     Atletico Madrid  3\n56       Arenas de Getxo           CD Alaves  3\n57       Arenas de Getxo           CE Europa  3\n58       Arenas de Getxo  Espanyol Barcelona  7\n59       Arenas de Getxo        FC Barcelona  7\n60       Arenas de Getxo    Racing Santander  7\n61       Arenas de Getxo          Real Betis  3\n62       Arenas de Getxo         Real Madrid  7\n63       Arenas de Getxo         Real Oviedo  2\n64       Arenas de Getxo       Real Sociedad  7\n65       Arenas de Getxo          Real Union  4\n66       Arenas de Getxo          Sevilla FC  1\n67       Arenas de Getxo         Valencia CF  4\n68       Athletic Bilbao          AD Almeria  2\n69       Athletic Bilbao            Albacete  7\n70       Athletic Bilbao     Arenas de Getxo  7\n71       Athletic Bilbao     Atletico Madrid 79\n72       Athletic Bilbao     Atletico Tetuan  1\n73       Athletic Bilbao           Burgos CF  6\n74       Athletic Bilbao          CA Osasuna 37\n75       Athletic Bilbao           CD Alaves 11\n76       Athletic Bilbao         CD Alcoyano  4\n77       Athletic Bilbao        CD Castellon 11\n78       Athletic Bilbao           CD Condal  1\n79       Athletic Bilbao          CD Leonesa  1\n80       Athletic Bilbao         CD Logrones  9\n81       Athletic Bilbao           CD Malaga 20\n82       Athletic Bilbao         CD Numancia  4\n83       Athletic Bilbao         CD Tenerife 13\n84       Athletic Bilbao           CE Europa  3\n85       Athletic Bilbao         CE Sabadell 15\n86       Athletic Bilbao      CF Extremadura  2\n87       Athletic Bilbao           CP Merida  2\n88       Athletic Bilbao            Cadiz CF 13\n89       Athletic Bilbao          Celta Vigo 50\n90       Athletic Bilbao          Cordoba CF  9\n91       Athletic Bilbao Deportivo La Coruna 44\n92       Athletic Bilbao            Elche CF 21\n93       Athletic Bilbao  Espanyol Barcelona 81\n94       Athletic Bilbao        FC Barcelona 85\n95       Athletic Bilbao           Getafe CF 12\n96       Athletic Bilbao           Gimnastic  4\n97       Athletic Bilbao          Granada CF 22\n98       Athletic Bilbao         Hercules CF 20\n99       Athletic Bilbao          Levante UD 11\n100      Athletic Bilbao           Malaga CF 15\n101      Athletic Bilbao       Pontevedra CF  6\n102      Athletic Bilbao        RCD Mallorca 27\n103      Athletic Bilbao    Racing Santander 45\n104      Athletic Bilbao      Rayo Vallecano 17\n105      Athletic Bilbao          Real Betis 50\n106      Athletic Bilbao         Real Burgos  3\n107      Athletic Bilbao           Real Jaen  3\n108      Athletic Bilbao         Real Madrid 85\n109      Athletic Bilbao         Real Murcia 18\n110      Athletic Bilbao         Real Oviedo 38\n111      Athletic Bilbao       Real Sociedad 69\n112      Athletic Bilbao          Real Union  4\n113      Athletic Bilbao     Real Valladolid 42\n114      Athletic Bilbao       Real Zaragoza 58\n115      Athletic Bilbao   Recreativo Huelva  5\n116      Athletic Bilbao       SD Compostela  4\n117      Athletic Bilbao            SD Eibar  2\n118      Athletic Bilbao          Sevilla FC 72\n119      Athletic Bilbao      Sporting Gijon 41\n120      Athletic Bilbao          UD Almeria  6\n121      Athletic Bilbao       UD Las Palmas 33\n122      Athletic Bilbao        UD Salamanca 12\n123      Athletic Bilbao           UE Lleida  2\n124      Athletic Bilbao         Valencia CF 81\n125      Athletic Bilbao       Villarreal CF 16\n126      Athletic Bilbao            Xerez CD  1\n127      Atletico Madrid          AD Almeria  2\n128      Atletico Madrid            Albacete  7\n129      Atletico Madrid     Arenas de Getxo  3\n130      Atletico Madrid     Athletic Bilbao 79\n131      Atletico Madrid     Atletico Tetuan  1\n132      Atletico Madrid           Burgos CF  6\n133      Atletico Madrid          CA Osasuna 34\n134      Atletico Madrid           CD Alaves  6\n135      Atletico Madrid         CD Alcoyano  4\n136      Atletico Madrid        CD Castellon 11\n137      Atletico Madrid           CD Condal  1\n138      Atletico Madrid          CD Leonesa  1\n139      Atletico Madrid         CD Logrones  9\n140      Atletico Madrid           CD Malaga 20\n141      Atletico Madrid         CD Numancia  3\n142      Atletico Madrid         CD Tenerife 12\n143      Atletico Madrid           CE Europa  2\n144      Atletico Madrid         CE Sabadell 14\n145      Atletico Madrid      CF Extremadura  2\n146      Atletico Madrid           CP Merida  2\n147      Atletico Madrid            Cadiz CF 12\n148      Atletico Madrid          Celta Vigo 48\n149      Atletico Madrid          Cordoba CF  9\n150      Atletico Madrid Deportivo La Coruna 42\n151      Atletico Madrid            Elche CF 21\n152      Atletico Madrid  Espanyol Barcelona 75\n153      Atletico Madrid        FC Barcelona 79\n154      Atletico Madrid           Getafe CF 12\n155      Atletico Madrid           Gimnastic  4\n156      Atletico Madrid          Granada CF 22\n157      Atletico Madrid         Hercules CF 20\n158      Atletico Madrid          Levante UD 11\n159      Atletico Madrid           Malaga CF 13\n160      Atletico Madrid       Pontevedra CF  6\n161      Atletico Madrid        RCD Mallorca 25\n162      Atletico Madrid    Racing Santander 39\n163      Atletico Madrid      Rayo Vallecano 15\n164      Atletico Madrid          Real Betis 48\n165      Atletico Madrid         Real Burgos  3\n166      Atletico Madrid           Real Jaen  3\n167      Atletico Madrid         Real Madrid 79\n168      Atletico Madrid         Real Murcia 19\n169      Atletico Madrid         Real Oviedo 36\n170      Atletico Madrid       Real Sociedad 64\n171      Atletico Madrid          Real Union  2\n172      Atletico Madrid     Real Valladolid 41\n173      Atletico Madrid       Real Zaragoza 56\n174      Atletico Madrid   Recreativo Huelva  5\n175      Atletico Madrid       SD Compostela  4\n176      Atletico Madrid            SD Eibar  2\n177      Atletico Madrid          Sevilla FC 72\n178      Atletico Madrid      Sporting Gijon 41\n179      Atletico Madrid          UD Almeria  6\n180      Atletico Madrid       UD Las Palmas 30\n181      Atletico Madrid        UD Salamanca 12\n182      Atletico Madrid           UE Lleida  2\n183      Atletico Madrid         Valencia CF 76\n184      Atletico Madrid       Villarreal CF 14\n185      Atletico Madrid            Xerez CD  1\n186      Atletico Tetuan     Athletic Bilbao  1\n187      Atletico Tetuan     Atletico Madrid  1\n188      Atletico Tetuan          Celta Vigo  1\n189      Atletico Tetuan Deportivo La Coruna  1\n190      Atletico Tetuan  Espanyol Barcelona  1\n191      Atletico Tetuan        FC Barcelona  1\n192      Atletico Tetuan    Racing Santander  1\n193      Atletico Tetuan         Real Madrid  1\n194      Atletico Tetuan       Real Sociedad  1\n195      Atletico Tetuan     Real Valladolid  1\n196      Atletico Tetuan       Real Zaragoza  1\n197      Atletico Tetuan          Sevilla FC  1\n198      Atletico Tetuan      Sporting Gijon  1\n199      Atletico Tetuan       UD Las Palmas  1\n200      Atletico Tetuan         Valencia CF  1\n201            Burgos CF          AD Almeria  1\n202            Burgos CF     Athletic Bilbao  6\n203            Burgos CF     Atletico Madrid  6\n204            Burgos CF        CD Castellon  1\n205            Burgos CF           CD Malaga  4\n206            Burgos CF         CE Sabadell  1\n207            Burgos CF            Cadiz CF  1\n208            Burgos CF          Celta Vigo  4\n209            Burgos CF          Cordoba CF  1\n210            Burgos CF Deportivo La Coruna  2\n211            Burgos CF            Elche CF  2\n212            Burgos CF  Espanyol Barcelona  6\n213            Burgos CF        FC Barcelona  6\n214            Burgos CF          Granada CF  2\n215            Burgos CF         Hercules CF  4\n216            Burgos CF    Racing Santander  3\n217            Burgos CF      Rayo Vallecano  3\n218            Burgos CF          Real Betis  5\n219            Burgos CF         Real Madrid  6\n220            Burgos CF         Real Oviedo  1\n221            Burgos CF       Real Sociedad  6\n222            Burgos CF       Real Zaragoza  4\n223            Burgos CF   Recreativo Huelva  1\n224            Burgos CF          Sevilla FC  5\n225            Burgos CF      Sporting Gijon  5\n226            Burgos CF       UD Las Palmas  6\n227            Burgos CF        UD Salamanca  4\n228            Burgos CF         Valencia CF  6\n229           CA Osasuna          AD Almeria  1\n230           CA Osasuna            Albacete  5\n231           CA Osasuna     Athletic Bilbao 37\n232           CA Osasuna     Atletico Madrid 34\n233           CA Osasuna           CD Alaves  4\n234           CA Osasuna        CD Castellon  3\n235           CA Osasuna           CD Condal  1\n236           CA Osasuna         CD Logrones  7\n237           CA Osasuna           CD Malaga  6\n238           CA Osasuna         CD Numancia  3\n239           CA Osasuna         CD Tenerife  8\n240           CA Osasuna         CE Sabadell  3\n241           CA Osasuna            Cadiz CF 12\n242           CA Osasuna          Celta Vigo 19\n243           CA Osasuna          Cordoba CF  1\n244           CA Osasuna Deportivo La Coruna 18\n245           CA Osasuna            Elche CF  6\n246           CA Osasuna  Espanyol Barcelona 33\n247           CA Osasuna        FC Barcelona 36\n248           CA Osasuna           Getafe CF 10\n249           CA Osasuna           Gimnastic  1\n250           CA Osasuna          Granada CF  6\n251           CA Osasuna         Hercules CF  6\n252           CA Osasuna          Levante UD  7\n253           CA Osasuna           Malaga CF 12\n254           CA Osasuna        RCD Mallorca 21\n255           CA Osasuna    Racing Santander 21\n256           CA Osasuna      Rayo Vallecano  9\n257           CA Osasuna          Real Betis 26\n258           CA Osasuna         Real Burgos  3\n259           CA Osasuna           Real Jaen  3\n260           CA Osasuna         Real Madrid 36\n261           CA Osasuna         Real Murcia  8\n262           CA Osasuna         Real Oviedo 13\n263           CA Osasuna       Real Sociedad 31\n264           CA Osasuna     Real Valladolid 27\n265           CA Osasuna       Real Zaragoza 31\n266           CA Osasuna   Recreativo Huelva  4\n267           CA Osasuna          Sevilla FC 35\n268           CA Osasuna      Sporting Gijon 21\n269           CA Osasuna          UD Almeria  5\n270           CA Osasuna       UD Las Palmas 13\n271           CA Osasuna        UD Salamanca  3\n272           CA Osasuna           UE Lleida  1\n273           CA Osasuna         Valencia CF 35\n274           CA Osasuna       Villarreal CF 13\n275           CA Osasuna            Xerez CD  1\n276            CD Alaves     Arenas de Getxo  3\n277            CD Alaves     Athletic Bilbao 11\n278            CD Alaves     Atletico Madrid  6\n279            CD Alaves          CA Osasuna  4\n280            CD Alaves          CD Leonesa  1\n281            CD Alaves           CD Malaga  1\n282            CD Alaves         CD Numancia  2\n283            CD Alaves         CD Tenerife  2\n284            CD Alaves           CE Europa  1\n285            CD Alaves      CF Extremadura  1\n286            CD Alaves            Cadiz CF  1\n287            CD Alaves          Celta Vigo  8\n288            CD Alaves Deportivo La Coruna  8\n289            CD Alaves  Espanyol Barcelona 11\n290            CD Alaves        FC Barcelona 11\n291            CD Alaves           Getafe CF  1\n292            CD Alaves         Hercules CF  2\n293            CD Alaves           Malaga CF  5\n294            CD Alaves        RCD Mallorca  6\n295            CD Alaves    Racing Santander  9\n296            CD Alaves      Rayo Vallecano  4\n297            CD Alaves          Real Betis  6\n298            CD Alaves         Real Madrid 11\n299            CD Alaves         Real Murcia  1\n300            CD Alaves         Real Oviedo  3\n301            CD Alaves       Real Sociedad 11\n302            CD Alaves          Real Union  2\n303            CD Alaves     Real Valladolid  7\n304            CD Alaves       Real Zaragoza  5\n305            CD Alaves   Recreativo Huelva  1\n306            CD Alaves          Sevilla FC  6\n307            CD Alaves       UD Las Palmas  4\n308            CD Alaves        UD Salamanca  1\n309            CD Alaves         Valencia CF 10\n310            CD Alaves       Villarreal CF  5\n311          CD Alcoyano     Athletic Bilbao  4\n312          CD Alcoyano     Atletico Madrid  4\n313          CD Alcoyano        CD Castellon  1\n314          CD Alcoyano           CD Malaga  1\n315          CD Alcoyano         CE Sabadell  2\n316          CD Alcoyano          Celta Vigo  4\n317          CD Alcoyano Deportivo La Coruna  2\n318          CD Alcoyano  Espanyol Barcelona  4\n319          CD Alcoyano        FC Barcelona  4\n320          CD Alcoyano           Gimnastic  2\n321          CD Alcoyano         Hercules CF  1\n322          CD Alcoyano    Racing Santander  1\n323          CD Alcoyano         Real Madrid  4\n324          CD Alcoyano         Real Murcia  2\n325          CD Alcoyano         Real Oviedo  3\n326          CD Alcoyano       Real Sociedad  2\n327          CD Alcoyano     Real Valladolid  2\n328          CD Alcoyano          Sevilla FC  4\n329          CD Alcoyano      Sporting Gijon  2\n330          CD Alcoyano           UE Lleida  1\n331          CD Alcoyano         Valencia CF  4\n332         CD Castellon     Athletic Bilbao 11\n333         CD Castellon     Atletico Madrid 11\n334         CD Castellon           Burgos CF  1\n335         CD Castellon          CA Osasuna  3\n336         CD Castellon         CD Alcoyano  1\n337         CD Castellon         CD Logrones  2\n338         CD Castellon           CD Malaga  3\n339         CD Castellon         CD Tenerife  2\n340         CD Castellon         CE Sabadell  3\n341         CD Castellon            Cadiz CF  3\n342         CD Castellon          Celta Vigo  8\n343         CD Castellon Deportivo La Coruna  6\n344         CD Castellon            Elche CF  1\n345         CD Castellon  Espanyol Barcelona 10\n346         CD Castellon        FC Barcelona 11\n347         CD Castellon          Granada CF  6\n348         CD Castellon         Hercules CF  3\n349         CD Castellon        RCD Mallorca  2\n350         CD Castellon    Racing Santander  2\n351         CD Castellon      Rayo Vallecano  1\n352         CD Castellon          Real Betis  4\n353         CD Castellon         Real Burgos  1\n354         CD Castellon         Real Madrid 11\n355         CD Castellon         Real Murcia  4\n356         CD Castellon         Real Oviedo 10\n357         CD Castellon       Real Sociedad  7\n358         CD Castellon     Real Valladolid  3\n359         CD Castellon       Real Zaragoza  6\n360         CD Castellon          Sevilla FC  9\n361         CD Castellon      Sporting Gijon  8\n362         CD Castellon       UD Las Palmas  3\n363         CD Castellon         Valencia CF 11\n364            CD Condal     Athletic Bilbao  1\n365            CD Condal     Atletico Madrid  1\n366            CD Condal          CA Osasuna  1\n367            CD Condal          Celta Vigo  1\n368            CD Condal Deportivo La Coruna  1\n369            CD Condal  Espanyol Barcelona  1\n370            CD Condal        FC Barcelona  1\n371            CD Condal           Real Jaen  1\n372            CD Condal         Real Madrid  1\n373            CD Condal       Real Sociedad  1\n374            CD Condal     Real Valladolid  1\n375            CD Condal       Real Zaragoza  1\n376            CD Condal          Sevilla FC  1\n377            CD Condal       UD Las Palmas  1\n378            CD Condal         Valencia CF  1\n379           CD Leonesa     Athletic Bilbao  1\n380           CD Leonesa     Atletico Madrid  1\n381           CD Leonesa           CD Alaves  1\n382           CD Leonesa          Celta Vigo  1\n383           CD Leonesa Deportivo La Coruna  1\n384           CD Leonesa  Espanyol Barcelona  1\n385           CD Leonesa        FC Barcelona  1\n386           CD Leonesa         Hercules CF  1\n387           CD Leonesa         Real Madrid  1\n388           CD Leonesa         Real Murcia  1\n389           CD Leonesa       Real Sociedad  1\n390           CD Leonesa     Real Valladolid  1\n391           CD Leonesa          Sevilla FC  1\n392           CD Leonesa       UD Las Palmas  1\n393           CD Leonesa         Valencia CF  1\n394          CD Logrones            Albacete  4\n395          CD Logrones     Athletic Bilbao  9\n396          CD Logrones     Atletico Madrid  9\n397          CD Logrones          CA Osasuna  7\n398          CD Logrones        CD Castellon  2\n399          CD Logrones           CD Malaga  2\n400          CD Logrones         CD Tenerife  7\n401          CD Logrones         CE Sabadell  1\n402          CD Logrones      CF Extremadura  1\n403          CD Logrones            Cadiz CF  6\n404          CD Logrones          Celta Vigo  7\n405          CD Logrones Deportivo La Coruna  5\n406          CD Logrones            Elche CF  1\n407          CD Logrones  Espanyol Barcelona  7\n408          CD Logrones        FC Barcelona  9\n409          CD Logrones         Hercules CF  1\n410          CD Logrones        RCD Mallorca  4\n411          CD Logrones    Racing Santander  3\n412          CD Logrones      Rayo Vallecano  4\n413          CD Logrones          Real Betis  5\n414          CD Logrones         Real Burgos  3\n415          CD Logrones         Real Madrid  9\n416          CD Logrones         Real Murcia  2\n417          CD Logrones         Real Oviedo  8\n418          CD Logrones       Real Sociedad  9\n419          CD Logrones     Real Valladolid  8\n420          CD Logrones       Real Zaragoza  9\n421          CD Logrones       SD Compostela  2\n422          CD Logrones          Sevilla FC  9\n423          CD Logrones      Sporting Gijon  9\n424          CD Logrones       UD Las Palmas  1\n425          CD Logrones           UE Lleida  1\n426          CD Logrones         Valencia CF  9\n427            CD Malaga          AD Almeria  1\n428            CD Malaga     Athletic Bilbao 20\n429            CD Malaga     Atletico Madrid 20\n430            CD Malaga           Burgos CF  4\n431            CD Malaga          CA Osasuna  6\n432            CD Malaga           CD Alaves  1\n433            CD Malaga         CD Alcoyano  1\n434            CD Malaga        CD Castellon  3\n435            CD Malaga         CD Logrones  2\n436            CD Malaga         CD Tenerife  1\n437            CD Malaga         CE Sabadell  5\n438            CD Malaga            Cadiz CF  3\n439            CD Malaga          Celta Vigo 13\n440            CD Malaga          Cordoba CF  5\n441            CD Malaga Deportivo La Coruna  8\n442            CD Malaga            Elche CF 10\n443            CD Malaga  Espanyol Barcelona 18\n444            CD Malaga        FC Barcelona 20\n445            CD Malaga           Gimnastic  1\n446            CD Malaga          Granada CF  6\n447            CD Malaga         Hercules CF  5\n448            CD Malaga       Pontevedra CF  3\n449            CD Malaga        RCD Mallorca  4\n450            CD Malaga    Racing Santander  7\n451            CD Malaga      Rayo Vallecano  2\n452            CD Malaga          Real Betis 12\n453            CD Malaga         Real Madrid 20\n454            CD Malaga         Real Murcia  6\n455            CD Malaga         Real Oviedo  7\n456            CD Malaga       Real Sociedad 18\n457            CD Malaga     Real Valladolid 10\n458            CD Malaga       Real Zaragoza 16\n459            CD Malaga          Sevilla FC 16\n460            CD Malaga      Sporting Gijon 12\n461            CD Malaga       UD Las Palmas 12\n462            CD Malaga        UD Salamanca  4\n463            CD Malaga           UE Lleida  1\n464            CD Malaga         Valencia CF 20\n465          CD Numancia            Albacete  1\n466          CD Numancia     Athletic Bilbao  4\n467          CD Numancia     Atletico Madrid  3\n468          CD Numancia          CA Osasuna  3\n469          CD Numancia           CD Alaves  2\n470          CD Numancia          Celta Vigo  2\n471          CD Numancia Deportivo La Coruna  4\n472          CD Numancia  Espanyol Barcelona  4\n473          CD Numancia        FC Barcelona  4\n474          CD Numancia           Getafe CF  2\n475          CD Numancia          Levante UD  1\n476          CD Numancia           Malaga CF  4\n477          CD Numancia        RCD Mallorca  4\n478          CD Numancia    Racing Santander  4\n479          CD Numancia      Rayo Vallecano  2\n480          CD Numancia          Real Betis  3\n481          CD Numancia         Real Madrid  4\n482          CD Numancia         Real Oviedo  2\n483          CD Numancia       Real Sociedad  3\n484          CD Numancia     Real Valladolid  3\n485          CD Numancia       Real Zaragoza  3\n486          CD Numancia   Recreativo Huelva  1\n487          CD Numancia          Sevilla FC  3\n488          CD Numancia      Sporting Gijon  1\n489          CD Numancia          UD Almeria  1\n490          CD Numancia       UD Las Palmas  1\n491          CD Numancia         Valencia CF  4\n492          CD Numancia       Villarreal CF  3\n493          CD Tenerife            Albacete  5\n494          CD Tenerife     Athletic Bilbao 13\n495          CD Tenerife     Atletico Madrid 12\n496          CD Tenerife          CA Osasuna  8\n497          CD Tenerife           CD Alaves  2\n498          CD Tenerife        CD Castellon  2\n499          CD Tenerife         CD Logrones  7\n500          CD Tenerife           CD Malaga  1\n501          CD Tenerife      CF Extremadura  2\n502          CD Tenerife           CP Merida  2\n503          CD Tenerife            Cadiz CF  4\n504          CD Tenerife          Celta Vigo  9\n505          CD Tenerife Deportivo La Coruna 10\n506          CD Tenerife            Elche CF  1\n507          CD Tenerife  Espanyol Barcelona 11\n508          CD Tenerife        FC Barcelona 13\n509          CD Tenerife           Getafe CF  1\n510          CD Tenerife         Hercules CF  1\n511          CD Tenerife           Malaga CF  2\n512          CD Tenerife        RCD Mallorca  8\n513          CD Tenerife    Racing Santander  8\n514          CD Tenerife      Rayo Vallecano  6\n515          CD Tenerife          Real Betis  8\n516          CD Tenerife         Real Burgos  3\n517          CD Tenerife         Real Madrid 13\n518          CD Tenerife         Real Oviedo 11\n519          CD Tenerife       Real Sociedad 12\n520          CD Tenerife     Real Valladolid 11\n521          CD Tenerife       Real Zaragoza 13\n522          CD Tenerife       SD Compostela  4\n523          CD Tenerife          Sevilla FC 11\n524          CD Tenerife      Sporting Gijon 10\n525          CD Tenerife          UD Almeria  1\n526          CD Tenerife       UD Las Palmas  1\n527          CD Tenerife        UD Salamanca  3\n528          CD Tenerife           UE Lleida  1\n529          CD Tenerife         Valencia CF 13\n530          CD Tenerife       Villarreal CF  3\n531          CD Tenerife            Xerez CD  1\n532            CE Europa     Arenas de Getxo  3\n533            CE Europa     Athletic Bilbao  3\n534            CE Europa     Atletico Madrid  2\n535            CE Europa           CD Alaves  1\n536            CE Europa  Espanyol Barcelona  3\n537            CE Europa        FC Barcelona  3\n538            CE Europa    Racing Santander  3\n539            CE Europa         Real Madrid  3\n540            CE Europa       Real Sociedad  3\n541            CE Europa          Real Union  3\n542          CE Sabadell     Athletic Bilbao 15\n543          CE Sabadell     Atletico Madrid 14\n544          CE Sabadell           Burgos CF  1\n545          CE Sabadell          CA Osasuna  3\n546          CE Sabadell         CD Alcoyano  2\n547          CE Sabadell        CD Castellon  3\n548          CE Sabadell         CD Logrones  1\n549          CE Sabadell           CD Malaga  5\n550          CE Sabadell            Cadiz CF  3\n551          CE Sabadell          Celta Vigo  8\n552          CE Sabadell          Cordoba CF  5\n553          CE Sabadell Deportivo La Coruna  8\n554          CE Sabadell            Elche CF  6\n555          CE Sabadell  Espanyol Barcelona 13\n556          CE Sabadell        FC Barcelona 14\n557          CE Sabadell           Gimnastic  2\n558          CE Sabadell          Granada CF  7\n559          CE Sabadell         Hercules CF  1\n560          CE Sabadell       Pontevedra CF  5\n561          CE Sabadell        RCD Mallorca  4\n562          CE Sabadell    Racing Santander  2\n563          CE Sabadell          Real Betis  5\n564          CE Sabadell         Real Madrid 14\n565          CE Sabadell         Real Murcia  4\n566          CE Sabadell         Real Oviedo  5\n567          CE Sabadell       Real Sociedad  9\n568          CE Sabadell     Real Valladolid  3\n569          CE Sabadell       Real Zaragoza  8\n570          CE Sabadell          Sevilla FC 13\n571          CE Sabadell      Sporting Gijon  7\n572          CE Sabadell       UD Las Palmas 10\n573          CE Sabadell         Valencia CF 13\n574       CF Extremadura     Athletic Bilbao  2\n575       CF Extremadura     Atletico Madrid  2\n576       CF Extremadura           CD Alaves  1\n577       CF Extremadura         CD Logrones  1\n578       CF Extremadura         CD Tenerife  2\n579       CF Extremadura          Celta Vigo  2\n580       CF Extremadura Deportivo La Coruna  2\n581       CF Extremadura  Espanyol Barcelona  2\n582       CF Extremadura        FC Barcelona  2\n583       CF Extremadura         Hercules CF  1\n584       CF Extremadura        RCD Mallorca  1\n585       CF Extremadura    Racing Santander  2\n586       CF Extremadura      Rayo Vallecano  1\n587       CF Extremadura          Real Betis  2\n588       CF Extremadura         Real Madrid  2\n589       CF Extremadura         Real Oviedo  2\n590       CF Extremadura       Real Sociedad  2\n591       CF Extremadura     Real Valladolid  2\n592       CF Extremadura       Real Zaragoza  2\n593       CF Extremadura       SD Compostela  1\n594       CF Extremadura          Sevilla FC  1\n595       CF Extremadura      Sporting Gijon  1\n596       CF Extremadura        UD Salamanca  1\n597       CF Extremadura         Valencia CF  2\n598       CF Extremadura       Villarreal CF  1\n599            CP Merida            Albacete  1\n600            CP Merida     Athletic Bilbao  2\n601            CP Merida     Atletico Madrid  2\n602            CP Merida         CD Tenerife  2\n603            CP Merida          Celta Vigo  2\n604            CP Merida Deportivo La Coruna  2\n605            CP Merida  Espanyol Barcelona  2\n606            CP Merida        FC Barcelona  2\n607            CP Merida        RCD Mallorca  1\n608            CP Merida    Racing Santander  2\n609            CP Merida      Rayo Vallecano  1\n610            CP Merida          Real Betis  2\n611            CP Merida         Real Madrid  2\n612            CP Merida         Real Oviedo  2\n613            CP Merida       Real Sociedad  2\n614            CP Merida     Real Valladolid  2\n615            CP Merida       Real Zaragoza  2\n616            CP Merida       SD Compostela  2\n617            CP Merida          Sevilla FC  1\n618            CP Merida      Sporting Gijon  2\n619            CP Merida        UD Salamanca  2\n620            CP Merida         Valencia CF  2\n621             Cadiz CF            Albacete  2\n622             Cadiz CF     Athletic Bilbao 13\n623             Cadiz CF     Atletico Madrid 12\n624             Cadiz CF           Burgos CF  1\n625             Cadiz CF          CA Osasuna 12\n626             Cadiz CF           CD Alaves  1\n627             Cadiz CF        CD Castellon  3\n628             Cadiz CF         CD Logrones  6\n629             Cadiz CF           CD Malaga  3\n630             Cadiz CF         CD Tenerife  4\n631             Cadiz CF         CE Sabadell  3\n632             Cadiz CF          Celta Vigo  6\n633             Cadiz CF Deportivo La Coruna  3\n634             Cadiz CF            Elche CF  2\n635             Cadiz CF  Espanyol Barcelona 11\n636             Cadiz CF        FC Barcelona 12\n637             Cadiz CF           Getafe CF  1\n638             Cadiz CF         Hercules CF  3\n639             Cadiz CF           Malaga CF  1\n640             Cadiz CF        RCD Mallorca  7\n641             Cadiz CF    Racing Santander  6\n642             Cadiz CF      Rayo Vallecano  3\n643             Cadiz CF          Real Betis  9\n644             Cadiz CF         Real Burgos  3\n645             Cadiz CF         Real Madrid 12\n646             Cadiz CF         Real Murcia  4\n647             Cadiz CF         Real Oviedo  5\n648             Cadiz CF       Real Sociedad 12\n649             Cadiz CF     Real Valladolid  9\n650             Cadiz CF       Real Zaragoza 11\n651             Cadiz CF          Sevilla FC 12\n652             Cadiz CF      Sporting Gijon 11\n653             Cadiz CF       UD Las Palmas  6\n654             Cadiz CF        UD Salamanca  2\n655             Cadiz CF         Valencia CF 11\n656             Cadiz CF       Villarreal CF  1\n657           Celta Vigo            Albacete  5\n658           Celta Vigo     Athletic Bilbao 50\n659           Celta Vigo     Atletico Madrid 48\n660           Celta Vigo     Atletico Tetuan  1\n661           Celta Vigo           Burgos CF  4\n662           Celta Vigo          CA Osasuna 19\n663           Celta Vigo           CD Alaves  8\n664           Celta Vigo         CD Alcoyano  4\n665           Celta Vigo        CD Castellon  8\n666           Celta Vigo           CD Condal  1\n667           Celta Vigo          CD Leonesa  1\n668           Celta Vigo         CD Logrones  7\n669           Celta Vigo           CD Malaga 13\n670           Celta Vigo         CD Numancia  2\n671           Celta Vigo         CD Tenerife  9\n672           Celta Vigo         CE Sabadell  8\n673           Celta Vigo      CF Extremadura  2\n674           Celta Vigo           CP Merida  2\n675           Celta Vigo            Cadiz CF  6\n676           Celta Vigo          Cordoba CF  2\n677           Celta Vigo Deportivo La Coruna 33\n678           Celta Vigo            Elche CF  8\n679           Celta Vigo  Espanyol Barcelona 47\n680           Celta Vigo        FC Barcelona 50\n681           Celta Vigo           Getafe CF  6\n682           Celta Vigo           Gimnastic  4\n683           Celta Vigo          Granada CF 15\n684           Celta Vigo         Hercules CF 11\n685           Celta Vigo          Levante UD  5\n686           Celta Vigo           Malaga CF 10\n687           Celta Vigo       Pontevedra CF  1\n688           Celta Vigo        RCD Mallorca 13\n689           Celta Vigo    Racing Santander 23\n690           Celta Vigo      Rayo Vallecano 14\n691           Celta Vigo          Real Betis 25\n692           Celta Vigo         Real Burgos  1\n693           Celta Vigo           Real Jaen  3\n694           Celta Vigo         Real Madrid 50\n695           Celta Vigo         Real Murcia 10\n696           Celta Vigo         Real Oviedo 25\n697           Celta Vigo       Real Sociedad 44\n698           Celta Vigo     Real Valladolid 28\n699           Celta Vigo       Real Zaragoza 34\n700           Celta Vigo   Recreativo Huelva  3\n701           Celta Vigo       SD Compostela  4\n702           Celta Vigo            SD Eibar  2\n703           Celta Vigo          Sevilla FC 44\n704           Celta Vigo      Sporting Gijon 26\n705           Celta Vigo          UD Almeria  2\n706           Celta Vigo       UD Las Palmas 20\n707           Celta Vigo        UD Salamanca  7\n708           Celta Vigo           UE Lleida  2\n709           Celta Vigo         Valencia CF 50\n710           Celta Vigo       Villarreal CF 10\n711           Cordoba CF     Athletic Bilbao  9\n712           Cordoba CF     Atletico Madrid  9\n713           Cordoba CF           Burgos CF  1\n714           Cordoba CF          CA Osasuna  1\n715           Cordoba CF           CD Malaga  5\n716           Cordoba CF         CE Sabadell  5\n717           Cordoba CF          Celta Vigo  2\n718           Cordoba CF Deportivo La Coruna  6\n719           Cordoba CF            Elche CF  8\n720           Cordoba CF  Espanyol Barcelona  8\n721           Cordoba CF        FC Barcelona  9\n722           Cordoba CF           Getafe CF  1\n723           Cordoba CF          Granada CF  4\n724           Cordoba CF         Hercules CF  1\n725           Cordoba CF          Levante UD  3\n726           Cordoba CF           Malaga CF  1\n727           Cordoba CF       Pontevedra CF  5\n728           Cordoba CF        RCD Mallorca  2\n729           Cordoba CF      Rayo Vallecano  1\n730           Cordoba CF          Real Betis  6\n731           Cordoba CF         Real Madrid  9\n732           Cordoba CF         Real Murcia  2\n733           Cordoba CF         Real Oviedo  3\n734           Cordoba CF       Real Sociedad  4\n735           Cordoba CF     Real Valladolid  2\n736           Cordoba CF       Real Zaragoza  7\n737           Cordoba CF            SD Eibar  1\n738           Cordoba CF          Sevilla FC  8\n739           Cordoba CF      Sporting Gijon  1\n740           Cordoba CF          UD Almeria  1\n741           Cordoba CF       UD Las Palmas  6\n742           Cordoba CF         Valencia CF  9\n743           Cordoba CF       Villarreal CF  1\n744  Deportivo La Coruna            Albacete  7\n745  Deportivo La Coruna     Athletic Bilbao 44\n746  Deportivo La Coruna     Atletico Madrid 42\n747  Deportivo La Coruna     Atletico Tetuan  1\n748  Deportivo La Coruna           Burgos CF  2\n749  Deportivo La Coruna          CA Osasuna 18\n750  Deportivo La Coruna           CD Alaves  8\n751  Deportivo La Coruna         CD Alcoyano  2\n752  Deportivo La Coruna        CD Castellon  6\n753  Deportivo La Coruna           CD Condal  1\n754  Deportivo La Coruna          CD Leonesa  1\n755  Deportivo La Coruna         CD Logrones  5\n756  Deportivo La Coruna           CD Malaga  8\n757  Deportivo La Coruna         CD Numancia  4\n758  Deportivo La Coruna         CD Tenerife 10\n759  Deportivo La Coruna         CE Sabadell  8\n760  Deportivo La Coruna      CF Extremadura  2\n761  Deportivo La Coruna           CP Merida  2\n762  Deportivo La Coruna            Cadiz CF  3\n763  Deportivo La Coruna          Celta Vigo 33\n764  Deportivo La Coruna          Cordoba CF  6\n765  Deportivo La Coruna            Elche CF  6\n766  Deportivo La Coruna  Espanyol Barcelona 41\n767  Deportivo La Coruna        FC Barcelona 44\n768  Deportivo La Coruna           Getafe CF 10\n769  Deportivo La Coruna           Gimnastic  3\n770  Deportivo La Coruna          Granada CF 12\n771  Deportivo La Coruna         Hercules CF  6\n772  Deportivo La Coruna          Levante UD  8\n773  Deportivo La Coruna           Malaga CF 13\n774  Deportivo La Coruna       Pontevedra CF  3\n775  Deportivo La Coruna        RCD Mallorca 18\n776  Deportivo La Coruna    Racing Santander 22\n777  Deportivo La Coruna      Rayo Vallecano 11\n778  Deportivo La Coruna          Real Betis 21\n779  Deportivo La Coruna         Real Burgos  2\n780  Deportivo La Coruna           Real Jaen  2\n781  Deportivo La Coruna         Real Madrid 44\n782  Deportivo La Coruna         Real Murcia  7\n783  Deportivo La Coruna         Real Oviedo 22\n784  Deportivo La Coruna       Real Sociedad 34\n785  Deportivo La Coruna     Real Valladolid 26\n786  Deportivo La Coruna       Real Zaragoza 29\n787  Deportivo La Coruna   Recreativo Huelva  4\n788  Deportivo La Coruna       SD Compostela  4\n789  Deportivo La Coruna            SD Eibar  2\n790  Deportivo La Coruna          Sevilla FC 39\n791  Deportivo La Coruna      Sporting Gijon 18\n792  Deportivo La Coruna          UD Almeria  5\n793  Deportivo La Coruna       UD Las Palmas 13\n794  Deportivo La Coruna        UD Salamanca  3\n795  Deportivo La Coruna           UE Lleida  2\n796  Deportivo La Coruna         Valencia CF 44\n797  Deportivo La Coruna       Villarreal CF 14\n798  Deportivo La Coruna            Xerez CD  1\n799             Elche CF     Athletic Bilbao 21\n800             Elche CF     Atletico Madrid 21\n801             Elche CF           Burgos CF  2\n802             Elche CF          CA Osasuna  6\n803             Elche CF        CD Castellon  1\n804             Elche CF         CD Logrones  1\n805             Elche CF           CD Malaga 10\n806             Elche CF         CD Tenerife  1\n807             Elche CF         CE Sabadell  6\n808             Elche CF            Cadiz CF  2\n809             Elche CF          Celta Vigo  8\n810             Elche CF          Cordoba CF  8\n811             Elche CF Deportivo La Coruna  6\n812             Elche CF  Espanyol Barcelona 19\n813             Elche CF        FC Barcelona 21\n814             Elche CF           Getafe CF  2\n815             Elche CF          Granada CF 11\n816             Elche CF         Hercules CF  6\n817             Elche CF          Levante UD  4\n818             Elche CF           Malaga CF  2\n819             Elche CF       Pontevedra CF  6\n820             Elche CF        RCD Mallorca  5\n821             Elche CF    Racing Santander  7\n822             Elche CF      Rayo Vallecano  3\n823             Elche CF          Real Betis 15\n824             Elche CF         Real Madrid 21\n825             Elche CF         Real Murcia  6\n826             Elche CF         Real Oviedo  9\n827             Elche CF       Real Sociedad 16\n828             Elche CF     Real Valladolid  7\n829             Elche CF       Real Zaragoza 18\n830             Elche CF            SD Eibar  1\n831             Elche CF          Sevilla FC 18\n832             Elche CF      Sporting Gijon  7\n833             Elche CF          UD Almeria  2\n834             Elche CF       UD Las Palmas 13\n835             Elche CF        UD Salamanca  4\n836             Elche CF         Valencia CF 21\n837             Elche CF       Villarreal CF  2\n838   Espanyol Barcelona          AD Almeria  2\n839   Espanyol Barcelona            Albacete  6\n840   Espanyol Barcelona     Arenas de Getxo  7\n841   Espanyol Barcelona     Athletic Bilbao 81\n842   Espanyol Barcelona     Atletico Madrid 75\n843   Espanyol Barcelona     Atletico Tetuan  1\n844   Espanyol Barcelona           Burgos CF  6\n845   Espanyol Barcelona          CA Osasuna 33\n846   Espanyol Barcelona           CD Alaves 11\n847   Espanyol Barcelona         CD Alcoyano  4\n848   Espanyol Barcelona        CD Castellon 10\n849   Espanyol Barcelona           CD Condal  1\n850   Espanyol Barcelona          CD Leonesa  1\n851   Espanyol Barcelona         CD Logrones  7\n852   Espanyol Barcelona           CD Malaga 18\n853   Espanyol Barcelona         CD Numancia  4\n854   Espanyol Barcelona         CD Tenerife 11\n855   Espanyol Barcelona           CE Europa  3\n856   Espanyol Barcelona         CE Sabadell 13\n857   Espanyol Barcelona      CF Extremadura  2\n858   Espanyol Barcelona           CP Merida  2\n859   Espanyol Barcelona            Cadiz CF 11\n860   Espanyol Barcelona          Celta Vigo 47\n861   Espanyol Barcelona          Cordoba CF  8\n862   Espanyol Barcelona Deportivo La Coruna 41\n863   Espanyol Barcelona            Elche CF 19\n864   Espanyol Barcelona        FC Barcelona 82\n865   Espanyol Barcelona           Getafe CF 12\n866   Espanyol Barcelona           Gimnastic  4\n867   Espanyol Barcelona          Granada CF 21\n868   Espanyol Barcelona         Hercules CF 20\n869   Espanyol Barcelona          Levante UD 11\n870   Espanyol Barcelona           Malaga CF 15\n871   Espanyol Barcelona       Pontevedra CF  5\n872   Espanyol Barcelona        RCD Mallorca 25\n873   Espanyol Barcelona    Racing Santander 43\n874   Espanyol Barcelona      Rayo Vallecano 15\n875   Espanyol Barcelona          Real Betis 49\n876   Espanyol Barcelona         Real Burgos  3\n877   Espanyol Barcelona           Real Jaen  3\n878   Espanyol Barcelona         Real Madrid 82\n879   Espanyol Barcelona         Real Murcia 18\n880   Espanyol Barcelona         Real Oviedo 35\n881   Espanyol Barcelona       Real Sociedad 66\n882   Espanyol Barcelona          Real Union  4\n883   Espanyol Barcelona     Real Valladolid 39\n884   Espanyol Barcelona       Real Zaragoza 55\n885   Espanyol Barcelona   Recreativo Huelva  5\n886   Espanyol Barcelona       SD Compostela  4\n887   Espanyol Barcelona            SD Eibar  2\n888   Espanyol Barcelona          Sevilla FC 68\n889   Espanyol Barcelona      Sporting Gijon 40\n890   Espanyol Barcelona          UD Almeria  6\n891   Espanyol Barcelona       UD Las Palmas 31\n892   Espanyol Barcelona        UD Salamanca 12\n893   Espanyol Barcelona           UE Lleida  1\n894   Espanyol Barcelona         Valencia CF 77\n895   Espanyol Barcelona       Villarreal CF 16\n896   Espanyol Barcelona            Xerez CD  1\n897         FC Barcelona          AD Almeria  2\n898         FC Barcelona            Albacete  7\n899         FC Barcelona     Arenas de Getxo  7\n900         FC Barcelona     Athletic Bilbao 85\n901         FC Barcelona     Atletico Madrid 79\n902         FC Barcelona     Atletico Tetuan  1\n903         FC Barcelona           Burgos CF  6\n904         FC Barcelona          CA Osasuna 36\n905         FC Barcelona           CD Alaves 11\n906         FC Barcelona         CD Alcoyano  4\n907         FC Barcelona        CD Castellon 11\n908         FC Barcelona           CD Condal  1\n909         FC Barcelona          CD Leonesa  1\n910         FC Barcelona         CD Logrones  9\n911         FC Barcelona           CD Malaga 20\n912         FC Barcelona         CD Numancia  4\n913         FC Barcelona         CD Tenerife 13\n914         FC Barcelona           CE Europa  3\n915         FC Barcelona         CE Sabadell 14\n916         FC Barcelona      CF Extremadura  2\n917         FC Barcelona           CP Merida  2\n918         FC Barcelona            Cadiz CF 12\n919         FC Barcelona          Celta Vigo 50\n920         FC Barcelona          Cordoba CF  9\n921         FC Barcelona Deportivo La Coruna 44\n922         FC Barcelona            Elche CF 21\n923         FC Barcelona  Espanyol Barcelona 82\n924         FC Barcelona           Getafe CF 12\n925         FC Barcelona           Gimnastic  4\n926         FC Barcelona          Granada CF 22\n927         FC Barcelona         Hercules CF 20\n928         FC Barcelona          Levante UD 11\n929         FC Barcelona           Malaga CF 15\n930         FC Barcelona       Pontevedra CF  6\n931         FC Barcelona        RCD Mallorca 28\n932         FC Barcelona    Racing Santander 44\n933         FC Barcelona      Rayo Vallecano 17\n934         FC Barcelona          Real Betis 50\n935         FC Barcelona         Real Burgos  3\n936         FC Barcelona           Real Jaen  3\n937         FC Barcelona         Real Madrid 86\n938         FC Barcelona         Real Murcia 18\n939         FC Barcelona         Real Oviedo 38\n940         FC Barcelona       Real Sociedad 69\n941         FC Barcelona          Real Union  4\n942         FC Barcelona     Real Valladolid 42\n943         FC Barcelona       Real Zaragoza 59\n944         FC Barcelona   Recreativo Huelva  5\n945         FC Barcelona       SD Compostela  4\n946         FC Barcelona            SD Eibar  2\n947         FC Barcelona          Sevilla FC 72\n948         FC Barcelona      Sporting Gijon 42\n949         FC Barcelona          UD Almeria  6\n950         FC Barcelona       UD Las Palmas 32\n951         FC Barcelona        UD Salamanca 12\n952         FC Barcelona           UE Lleida  2\n953         FC Barcelona         Valencia CF 81\n954         FC Barcelona       Villarreal CF 16\n955         FC Barcelona            Xerez CD  1\n956            Getafe CF            Albacete  1\n957            Getafe CF     Athletic Bilbao 12\n958            Getafe CF     Atletico Madrid 12\n959            Getafe CF          CA Osasuna 10\n960            Getafe CF           CD Alaves  1\n961            Getafe CF         CD Numancia  2\n962            Getafe CF         CD Tenerife  1\n963            Getafe CF            Cadiz CF  1\n964            Getafe CF          Celta Vigo  6\n965            Getafe CF          Cordoba CF  1\n966            Getafe CF Deportivo La Coruna 10\n967            Getafe CF            Elche CF  2\n968            Getafe CF  Espanyol Barcelona 12\n969            Getafe CF        FC Barcelona 12\n970            Getafe CF           Gimnastic  1\n971            Getafe CF          Granada CF  5\n972            Getafe CF         Hercules CF  1\n973            Getafe CF          Levante UD  9\n974            Getafe CF           Malaga CF 10\n975            Getafe CF        RCD Mallorca  9\n976            Getafe CF    Racing Santander  8\n977            Getafe CF      Rayo Vallecano  5\n978            Getafe CF          Real Betis  9\n979            Getafe CF         Real Madrid 12\n980            Getafe CF         Real Murcia  1\n981            Getafe CF       Real Sociedad  9\n982            Getafe CF     Real Valladolid  5\n983            Getafe CF       Real Zaragoza  8\n984            Getafe CF   Recreativo Huelva  3\n985            Getafe CF            SD Eibar  2\n986            Getafe CF          Sevilla FC 12\n987            Getafe CF      Sporting Gijon  5\n988            Getafe CF          UD Almeria  6\n989            Getafe CF       UD Las Palmas  1\n990            Getafe CF         Valencia CF 12\n991            Getafe CF       Villarreal CF 11\n992            Getafe CF            Xerez CD  1\n993            Gimnastic     Athletic Bilbao  4\n994            Gimnastic     Atletico Madrid  4\n995            Gimnastic          CA Osasuna  1\n996            Gimnastic         CD Alcoyano  2\n997            Gimnastic           CD Malaga  1\n998            Gimnastic         CE Sabadell  2\n999            Gimnastic          Celta Vigo  4\n1000           Gimnastic Deportivo La Coruna  3\n1001           Gimnastic  Espanyol Barcelona  4\n1002           Gimnastic        FC Barcelona  4\n1003           Gimnastic           Getafe CF  1\n1004           Gimnastic          Levante UD  1\n1005           Gimnastic        RCD Mallorca  1\n1006           Gimnastic    Racing Santander  1\n1007           Gimnastic          Real Betis  1\n1008           Gimnastic         Real Madrid  4\n1009           Gimnastic         Real Oviedo  3\n1010           Gimnastic       Real Sociedad  3\n1011           Gimnastic     Real Valladolid  2\n1012           Gimnastic       Real Zaragoza  1\n1013           Gimnastic   Recreativo Huelva  1\n1014           Gimnastic          Sevilla FC  4\n1015           Gimnastic      Sporting Gijon  1\n1016           Gimnastic         Valencia CF  4\n1017           Gimnastic       Villarreal CF  1\n1018          Granada CF     Athletic Bilbao 22\n1019          Granada CF     Atletico Madrid 22\n1020          Granada CF           Burgos CF  2\n1021          Granada CF          CA Osasuna  6\n1022          Granada CF        CD Castellon  6\n1023          Granada CF           CD Malaga  6\n1024          Granada CF         CE Sabadell  7\n1025          Granada CF          Celta Vigo 15\n1026          Granada CF          Cordoba CF  4\n1027          Granada CF Deportivo La Coruna 12\n1028          Granada CF            Elche CF 11\n1029          Granada CF  Espanyol Barcelona 21\n1030          Granada CF        FC Barcelona 22\n1031          Granada CF           Getafe CF  5\n1032          Granada CF         Hercules CF  4\n1033          Granada CF          Levante UD  5\n1034          Granada CF           Malaga CF  5\n1035          Granada CF       Pontevedra CF  3\n1036          Granada CF        RCD Mallorca  4\n1037          Granada CF    Racing Santander  4\n1038          Granada CF      Rayo Vallecano  5\n1039          Granada CF          Real Betis 12\n1040          Granada CF           Real Jaen  1\n1041          Granada CF         Real Madrid 22\n1042          Granada CF         Real Murcia  3\n1043          Granada CF         Real Oviedo 10\n1044          Granada CF       Real Sociedad 19\n1045          Granada CF     Real Valladolid  5\n1046          Granada CF       Real Zaragoza 15\n1047          Granada CF            SD Eibar  2\n1048          Granada CF          Sevilla FC 18\n1049          Granada CF      Sporting Gijon 11\n1050          Granada CF          UD Almeria  2\n1051          Granada CF       UD Las Palmas 13\n1052          Granada CF        UD Salamanca  2\n1053          Granada CF         Valencia CF 22\n1054          Granada CF       Villarreal CF  4\n1055         Hercules CF          AD Almeria  2\n1056         Hercules CF     Athletic Bilbao 20\n1057         Hercules CF     Atletico Madrid 20\n1058         Hercules CF           Burgos CF  4\n1059         Hercules CF          CA Osasuna  6\n1060         Hercules CF           CD Alaves  2\n1061         Hercules CF         CD Alcoyano  1\n1062         Hercules CF        CD Castellon  3\n1063         Hercules CF          CD Leonesa  1\n1064         Hercules CF         CD Logrones  1\n1065         Hercules CF           CD Malaga  5\n1066         Hercules CF         CD Tenerife  1\n1067         Hercules CF         CE Sabadell  1\n1068         Hercules CF      CF Extremadura  1\n1069         Hercules CF            Cadiz CF  3\n1070         Hercules CF          Celta Vigo 11\n1071         Hercules CF          Cordoba CF  1\n1072         Hercules CF Deportivo La Coruna  6\n1073         Hercules CF            Elche CF  6\n1074         Hercules CF  Espanyol Barcelona 20\n1075         Hercules CF        FC Barcelona 20\n1076         Hercules CF           Getafe CF  1\n1077         Hercules CF          Granada CF  4\n1078         Hercules CF          Levante UD  1\n1079         Hercules CF           Malaga CF  1\n1080         Hercules CF       Pontevedra CF  1\n1081         Hercules CF        RCD Mallorca  1\n1082         Hercules CF    Racing Santander 12\n1083         Hercules CF      Rayo Vallecano  4\n1084         Hercules CF          Real Betis 12\n1085         Hercules CF         Real Madrid 20\n1086         Hercules CF         Real Murcia  6\n1087         Hercules CF         Real Oviedo  6\n1088         Hercules CF       Real Sociedad 15\n1089         Hercules CF     Real Valladolid  7\n1090         Hercules CF       Real Zaragoza 14\n1091         Hercules CF   Recreativo Huelva  1\n1092         Hercules CF       SD Compostela  1\n1093         Hercules CF          Sevilla FC 19\n1094         Hercules CF      Sporting Gijon 12\n1095         Hercules CF          UD Almeria  1\n1096         Hercules CF       UD Las Palmas 12\n1097         Hercules CF        UD Salamanca  7\n1098         Hercules CF         Valencia CF 20\n1099         Hercules CF       Villarreal CF  1\n1100          Levante UD            Albacete  1\n1101          Levante UD     Athletic Bilbao 11\n1102          Levante UD     Atletico Madrid 11\n1103          Levante UD          CA Osasuna  7\n1104          Levante UD         CD Numancia  1\n1105          Levante UD          Celta Vigo  5\n1106          Levante UD          Cordoba CF  3\n1107          Levante UD Deportivo La Coruna  8\n1108          Levante UD            Elche CF  4\n1109          Levante UD  Espanyol Barcelona 11\n1110          Levante UD        FC Barcelona 11\n1111          Levante UD           Getafe CF  9\n1112          Levante UD           Gimnastic  1\n1113          Levante UD          Granada CF  5\n1114          Levante UD         Hercules CF  1\n1115          Levante UD           Malaga CF  7\n1116          Levante UD       Pontevedra CF  1\n1117          Levante UD        RCD Mallorca  6\n1118          Levante UD    Racing Santander  5\n1119          Levante UD      Rayo Vallecano  5\n1120          Levante UD          Real Betis  9\n1121          Levante UD         Real Madrid 11\n1122          Levante UD         Real Murcia  3\n1123          Levante UD         Real Oviedo  2\n1124          Levante UD       Real Sociedad  8\n1125          Levante UD     Real Valladolid  4\n1126          Levante UD       Real Zaragoza  8\n1127          Levante UD   Recreativo Huelva  2\n1128          Levante UD            SD Eibar  2\n1129          Levante UD          Sevilla FC 11\n1130          Levante UD      Sporting Gijon  3\n1131          Levante UD          UD Almeria  4\n1132          Levante UD       UD Las Palmas  2\n1133          Levante UD         Valencia CF 11\n1134          Levante UD       Villarreal CF  8\n1135           Malaga CF            Albacete  2\n1136           Malaga CF     Athletic Bilbao 15\n1137           Malaga CF     Atletico Madrid 13\n1138           Malaga CF          CA Osasuna 12\n1139           Malaga CF           CD Alaves  5\n1140           Malaga CF         CD Numancia  4\n1141           Malaga CF         CD Tenerife  2\n1142           Malaga CF            Cadiz CF  1\n1143           Malaga CF          Celta Vigo 10\n1144           Malaga CF          Cordoba CF  1\n1145           Malaga CF Deportivo La Coruna 13\n1146           Malaga CF            Elche CF  2\n1147           Malaga CF  Espanyol Barcelona 15\n1148           Malaga CF        FC Barcelona 15\n1149           Malaga CF           Getafe CF 10\n1150           Malaga CF          Granada CF  5\n1151           Malaga CF         Hercules CF  1\n1152           Malaga CF          Levante UD  7\n1153           Malaga CF        RCD Mallorca 12\n1154           Malaga CF    Racing Santander 10\n1155           Malaga CF      Rayo Vallecano  9\n1156           Malaga CF          Real Betis 11\n1157           Malaga CF         Real Madrid 15\n1158           Malaga CF         Real Murcia  1\n1159           Malaga CF         Real Oviedo  2\n1160           Malaga CF       Real Sociedad 13\n1161           Malaga CF     Real Valladolid  9\n1162           Malaga CF       Real Zaragoza 10\n1163           Malaga CF   Recreativo Huelva  2\n1164           Malaga CF            SD Eibar  2\n1165           Malaga CF          Sevilla FC 14\n1166           Malaga CF      Sporting Gijon  5\n1167           Malaga CF          UD Almeria  5\n1168           Malaga CF       UD Las Palmas  3\n1169           Malaga CF         Valencia CF 15\n1170           Malaga CF       Villarreal CF 13\n1171           Malaga CF            Xerez CD  1\n1172       Pontevedra CF     Athletic Bilbao  6\n1173       Pontevedra CF     Atletico Madrid  6\n1174       Pontevedra CF           CD Malaga  3\n1175       Pontevedra CF         CE Sabadell  5\n1176       Pontevedra CF          Celta Vigo  1\n1177       Pontevedra CF          Cordoba CF  5\n1178       Pontevedra CF Deportivo La Coruna  3\n1179       Pontevedra CF            Elche CF  6\n1180       Pontevedra CF  Espanyol Barcelona  5\n1181       Pontevedra CF        FC Barcelona  6\n1182       Pontevedra CF          Granada CF  3\n1183       Pontevedra CF         Hercules CF  1\n1184       Pontevedra CF          Levante UD  1\n1185       Pontevedra CF        RCD Mallorca  2\n1186       Pontevedra CF          Real Betis  3\n1187       Pontevedra CF         Real Madrid  6\n1188       Pontevedra CF         Real Murcia  1\n1189       Pontevedra CF         Real Oviedo  1\n1190       Pontevedra CF       Real Sociedad  3\n1191       Pontevedra CF     Real Valladolid  1\n1192       Pontevedra CF       Real Zaragoza  6\n1193       Pontevedra CF          Sevilla FC  5\n1194       Pontevedra CF       UD Las Palmas  5\n1195       Pontevedra CF         Valencia CF  6\n1196        RCD Mallorca            Albacete  3\n1197        RCD Mallorca     Athletic Bilbao 27\n1198        RCD Mallorca     Atletico Madrid 25\n1199        RCD Mallorca          CA Osasuna 21\n1200        RCD Mallorca           CD Alaves  6\n1201        RCD Mallorca        CD Castellon  2\n1202        RCD Mallorca         CD Logrones  4\n1203        RCD Mallorca           CD Malaga  4\n1204        RCD Mallorca         CD Numancia  4\n1205        RCD Mallorca         CD Tenerife  8\n1206        RCD Mallorca         CE Sabadell  4\n1207        RCD Mallorca      CF Extremadura  1\n1208        RCD Mallorca           CP Merida  1\n1209        RCD Mallorca            Cadiz CF  7\n1210        RCD Mallorca          Celta Vigo 13\n1211        RCD Mallorca          Cordoba CF  2\n1212        RCD Mallorca Deportivo La Coruna 18\n1213        RCD Mallorca            Elche CF  5\n1214        RCD Mallorca  Espanyol Barcelona 25\n1215        RCD Mallorca        FC Barcelona 28\n1216        RCD Mallorca           Getafe CF  9\n1217        RCD Mallorca           Gimnastic  1\n1218        RCD Mallorca          Granada CF  4\n1219        RCD Mallorca         Hercules CF  1\n1220        RCD Mallorca          Levante UD  6\n1221        RCD Mallorca           Malaga CF 12\n1222        RCD Mallorca       Pontevedra CF  2\n1223        RCD Mallorca    Racing Santander 17\n1224        RCD Mallorca      Rayo Vallecano  7\n1225        RCD Mallorca          Real Betis 21\n1226        RCD Mallorca         Real Burgos  2\n1227        RCD Mallorca         Real Madrid 28\n1228        RCD Mallorca         Real Murcia  5\n1229        RCD Mallorca         Real Oviedo 10\n1230        RCD Mallorca       Real Sociedad 22\n1231        RCD Mallorca     Real Valladolid 19\n1232        RCD Mallorca       Real Zaragoza 26\n1233        RCD Mallorca   Recreativo Huelva  4\n1234        RCD Mallorca       SD Compostela  1\n1235        RCD Mallorca          Sevilla FC 24\n1236        RCD Mallorca      Sporting Gijon 12\n1237        RCD Mallorca          UD Almeria  4\n1238        RCD Mallorca       UD Las Palmas  6\n1239        RCD Mallorca        UD Salamanca  3\n1240        RCD Mallorca         Valencia CF 26\n1241        RCD Mallorca       Villarreal CF 13\n1242        RCD Mallorca            Xerez CD  1\n1243    Racing Santander            Albacete  5\n1244    Racing Santander     Arenas de Getxo  7\n1245    Racing Santander     Athletic Bilbao 45\n1246    Racing Santander     Atletico Madrid 39\n1247    Racing Santander     Atletico Tetuan  1\n1248    Racing Santander           Burgos CF  3\n1249    Racing Santander          CA Osasuna 21\n1250    Racing Santander           CD Alaves  9\n1251    Racing Santander         CD Alcoyano  1\n1252    Racing Santander        CD Castellon  2\n1253    Racing Santander         CD Logrones  3\n1254    Racing Santander           CD Malaga  7\n1255    Racing Santander         CD Numancia  4\n1256    Racing Santander         CD Tenerife  8\n1257    Racing Santander           CE Europa  3\n1258    Racing Santander         CE Sabadell  2\n1259    Racing Santander      CF Extremadura  2\n1260    Racing Santander           CP Merida  2\n1261    Racing Santander            Cadiz CF  6\n1262    Racing Santander          Celta Vigo 23\n1263    Racing Santander Deportivo La Coruna 22\n1264    Racing Santander            Elche CF  7\n1265    Racing Santander  Espanyol Barcelona 43\n1266    Racing Santander        FC Barcelona 44\n1267    Racing Santander           Getafe CF  8\n1268    Racing Santander           Gimnastic  1\n1269    Racing Santander          Granada CF  4\n1270    Racing Santander         Hercules CF 12\n1271    Racing Santander          Levante UD  5\n1272    Racing Santander           Malaga CF 10\n1273    Racing Santander        RCD Mallorca 17\n1274    Racing Santander      Rayo Vallecano  9\n1275    Racing Santander          Real Betis 29\n1276    Racing Santander           Real Jaen  1\n1277    Racing Santander         Real Madrid 44\n1278    Racing Santander         Real Murcia  6\n1279    Racing Santander         Real Oviedo 17\n1280    Racing Santander       Real Sociedad 39\n1281    Racing Santander          Real Union  4\n1282    Racing Santander     Real Valladolid 24\n1283    Racing Santander       Real Zaragoza 30\n1284    Racing Santander   Recreativo Huelva  5\n1285    Racing Santander       SD Compostela  4\n1286    Racing Santander          Sevilla FC 34\n1287    Racing Santander      Sporting Gijon 21\n1288    Racing Santander          UD Almeria  4\n1289    Racing Santander       UD Las Palmas 13\n1290    Racing Santander        UD Salamanca  8\n1291    Racing Santander           UE Lleida  2\n1292    Racing Santander         Valencia CF 40\n1293    Racing Santander       Villarreal CF 12\n1294    Racing Santander            Xerez CD  1\n1295      Rayo Vallecano          AD Almeria  1\n1296      Rayo Vallecano            Albacete  3\n1297      Rayo Vallecano     Athletic Bilbao 17\n1298      Rayo Vallecano     Atletico Madrid 15\n1299      Rayo Vallecano           Burgos CF  3\n1300      Rayo Vallecano          CA Osasuna  9\n1301      Rayo Vallecano           CD Alaves  4\n1302      Rayo Vallecano        CD Castellon  1\n1303      Rayo Vallecano         CD Logrones  4\n1304      Rayo Vallecano           CD Malaga  2\n1305      Rayo Vallecano         CD Numancia  2\n1306      Rayo Vallecano         CD Tenerife  6\n1307      Rayo Vallecano      CF Extremadura  1\n1308      Rayo Vallecano           CP Merida  1\n1309      Rayo Vallecano            Cadiz CF  3\n1310      Rayo Vallecano          Celta Vigo 14\n1311      Rayo Vallecano          Cordoba CF  1\n1312      Rayo Vallecano Deportivo La Coruna 11\n1313      Rayo Vallecano            Elche CF  3\n1314      Rayo Vallecano  Espanyol Barcelona 15\n1315      Rayo Vallecano        FC Barcelona 17\n1316      Rayo Vallecano           Getafe CF  5\n1317      Rayo Vallecano          Granada CF  5\n1318      Rayo Vallecano         Hercules CF  4\n1319      Rayo Vallecano          Levante UD  5\n1320      Rayo Vallecano           Malaga CF  9\n1321      Rayo Vallecano        RCD Mallorca  7\n1322      Rayo Vallecano    Racing Santander  9\n1323      Rayo Vallecano          Real Betis 11\n1324      Rayo Vallecano         Real Burgos  1\n1325      Rayo Vallecano         Real Madrid 17\n1326      Rayo Vallecano         Real Oviedo  7\n1327      Rayo Vallecano       Real Sociedad 17\n1328      Rayo Vallecano     Real Valladolid 10\n1329      Rayo Vallecano       Real Zaragoza 12\n1330      Rayo Vallecano   Recreativo Huelva  2\n1331      Rayo Vallecano       SD Compostela  2\n1332      Rayo Vallecano            SD Eibar  2\n1333      Rayo Vallecano          Sevilla FC 16\n1334      Rayo Vallecano      Sporting Gijon 10\n1335      Rayo Vallecano          UD Almeria  2\n1336      Rayo Vallecano       UD Las Palmas  6\n1337      Rayo Vallecano        UD Salamanca  4\n1338      Rayo Vallecano           UE Lleida  1\n1339      Rayo Vallecano         Valencia CF 17\n1340      Rayo Vallecano       Villarreal CF  7\n1341          Real Betis          AD Almeria  2\n1342          Real Betis            Albacete  4\n1343          Real Betis     Arenas de Getxo  3\n1344          Real Betis     Athletic Bilbao 50\n1345          Real Betis     Atletico Madrid 48\n1346          Real Betis           Burgos CF  5\n1347          Real Betis          CA Osasuna 26\n1348          Real Betis           CD Alaves  6\n1349          Real Betis        CD Castellon  4\n1350          Real Betis         CD Logrones  5\n1351          Real Betis           CD Malaga 12\n1352          Real Betis         CD Numancia  3\n1353          Real Betis         CD Tenerife  8\n1354          Real Betis         CE Sabadell  5\n1355          Real Betis      CF Extremadura  2\n1356          Real Betis           CP Merida  2\n1357          Real Betis            Cadiz CF  9\n1358          Real Betis          Celta Vigo 25\n1359          Real Betis          Cordoba CF  6\n1360          Real Betis Deportivo La Coruna 21\n1361          Real Betis            Elche CF 15\n1362          Real Betis  Espanyol Barcelona 49\n1363          Real Betis        FC Barcelona 50\n1364          Real Betis           Getafe CF  9\n1365          Real Betis           Gimnastic  1\n1366          Real Betis          Granada CF 12\n1367          Real Betis         Hercules CF 12\n1368          Real Betis          Levante UD  9\n1369          Real Betis           Malaga CF 11\n1370          Real Betis       Pontevedra CF  3\n1371          Real Betis        RCD Mallorca 21\n1372          Real Betis    Racing Santander 29\n1373          Real Betis      Rayo Vallecano 11\n1374          Real Betis         Real Burgos  1\n1375          Real Betis         Real Madrid 50\n1376          Real Betis         Real Murcia 12\n1377          Real Betis         Real Oviedo 21\n1378          Real Betis       Real Sociedad 42\n1379          Real Betis     Real Valladolid 28\n1380          Real Betis       Real Zaragoza 40\n1381          Real Betis   Recreativo Huelva  4\n1382          Real Betis       SD Compostela  4\n1383          Real Betis            SD Eibar  1\n1384          Real Betis          Sevilla FC 45\n1385          Real Betis      Sporting Gijon 24\n1386          Real Betis          UD Almeria  3\n1387          Real Betis       UD Las Palmas 20\n1388          Real Betis        UD Salamanca 11\n1389          Real Betis         Valencia CF 49\n1390          Real Betis       Villarreal CF 12\n1391         Real Burgos            Albacete  2\n1392         Real Burgos     Athletic Bilbao  3\n1393         Real Burgos     Atletico Madrid  3\n1394         Real Burgos          CA Osasuna  3\n1395         Real Burgos        CD Castellon  1\n1396         Real Burgos         CD Logrones  3\n1397         Real Burgos         CD Tenerife  3\n1398         Real Burgos            Cadiz CF  3\n1399         Real Burgos          Celta Vigo  1\n1400         Real Burgos Deportivo La Coruna  2\n1401         Real Burgos  Espanyol Barcelona  3\n1402         Real Burgos        FC Barcelona  3\n1403         Real Burgos        RCD Mallorca  2\n1404         Real Burgos      Rayo Vallecano  1\n1405         Real Burgos          Real Betis  1\n1406         Real Burgos         Real Madrid  3\n1407         Real Burgos         Real Oviedo  3\n1408         Real Burgos       Real Sociedad  3\n1409         Real Burgos     Real Valladolid  2\n1410         Real Burgos       Real Zaragoza  3\n1411         Real Burgos          Sevilla FC  3\n1412         Real Burgos      Sporting Gijon  3\n1413         Real Burgos         Valencia CF  3\n1414           Real Jaen     Athletic Bilbao  3\n1415           Real Jaen     Atletico Madrid  3\n1416           Real Jaen          CA Osasuna  3\n1417           Real Jaen           CD Condal  1\n1418           Real Jaen          Celta Vigo  3\n1419           Real Jaen Deportivo La Coruna  2\n1420           Real Jaen  Espanyol Barcelona  3\n1421           Real Jaen        FC Barcelona  3\n1422           Real Jaen          Granada CF  1\n1423           Real Jaen    Racing Santander  1\n1424           Real Jaen         Real Madrid  3\n1425           Real Jaen         Real Oviedo  1\n1426           Real Jaen       Real Sociedad  3\n1427           Real Jaen     Real Valladolid  3\n1428           Real Jaen       Real Zaragoza  2\n1429           Real Jaen          Sevilla FC  3\n1430           Real Jaen      Sporting Gijon  2\n1431           Real Jaen       UD Las Palmas  2\n1432           Real Jaen         Valencia CF  3\n1433         Real Madrid          AD Almeria  2\n1434         Real Madrid            Albacete  7\n1435         Real Madrid     Arenas de Getxo  7\n1436         Real Madrid     Athletic Bilbao 85\n1437         Real Madrid     Atletico Madrid 79\n1438         Real Madrid     Atletico Tetuan  1\n1439         Real Madrid           Burgos CF  6\n1440         Real Madrid          CA Osasuna 36\n1441         Real Madrid           CD Alaves 11\n1442         Real Madrid         CD Alcoyano  4\n1443         Real Madrid        CD Castellon 11\n1444         Real Madrid           CD Condal  1\n1445         Real Madrid          CD Leonesa  1\n1446         Real Madrid         CD Logrones  9\n1447         Real Madrid           CD Malaga 20\n1448         Real Madrid         CD Numancia  4\n1449         Real Madrid         CD Tenerife 13\n1450         Real Madrid           CE Europa  3\n1451         Real Madrid         CE Sabadell 14\n1452         Real Madrid      CF Extremadura  2\n1453         Real Madrid           CP Merida  2\n1454         Real Madrid            Cadiz CF 12\n1455         Real Madrid          Celta Vigo 50\n1456         Real Madrid          Cordoba CF  9\n1457         Real Madrid Deportivo La Coruna 44\n1458         Real Madrid            Elche CF 21\n1459         Real Madrid  Espanyol Barcelona 82\n1460         Real Madrid        FC Barcelona 86\n1461         Real Madrid           Getafe CF 12\n1462         Real Madrid           Gimnastic  4\n1463         Real Madrid          Granada CF 22\n1464         Real Madrid         Hercules CF 20\n1465         Real Madrid          Levante UD 11\n1466         Real Madrid           Malaga CF 15\n1467         Real Madrid       Pontevedra CF  6\n1468         Real Madrid        RCD Mallorca 28\n1469         Real Madrid    Racing Santander 44\n1470         Real Madrid      Rayo Vallecano 17\n1471         Real Madrid          Real Betis 50\n1472         Real Madrid         Real Burgos  3\n1473         Real Madrid           Real Jaen  3\n1474         Real Madrid         Real Murcia 18\n1475         Real Madrid         Real Oviedo 38\n1476         Real Madrid       Real Sociedad 69\n1477         Real Madrid          Real Union  4\n1478         Real Madrid     Real Valladolid 42\n1479         Real Madrid       Real Zaragoza 59\n1480         Real Madrid   Recreativo Huelva  5\n1481         Real Madrid       SD Compostela  4\n1482         Real Madrid            SD Eibar  2\n1483         Real Madrid          Sevilla FC 72\n1484         Real Madrid      Sporting Gijon 42\n1485         Real Madrid          UD Almeria  6\n1486         Real Madrid       UD Las Palmas 32\n1487         Real Madrid        UD Salamanca 12\n1488         Real Madrid           UE Lleida  2\n1489         Real Madrid         Valencia CF 81\n1490         Real Madrid       Villarreal CF 16\n1491         Real Madrid            Xerez CD  1\n1492         Real Murcia          AD Almeria  1\n1493         Real Murcia            Albacete  1\n1494         Real Murcia     Athletic Bilbao 18\n1495         Real Murcia     Atletico Madrid 19\n1496         Real Murcia          CA Osasuna  8\n1497         Real Murcia           CD Alaves  1\n1498         Real Murcia         CD Alcoyano  2\n1499         Real Murcia        CD Castellon  4\n1500         Real Murcia          CD Leonesa  1\n1501         Real Murcia         CD Logrones  2\n1502         Real Murcia           CD Malaga  6\n1503         Real Murcia         CE Sabadell  4\n1504         Real Murcia            Cadiz CF  4\n1505         Real Murcia          Celta Vigo 10\n1506         Real Murcia          Cordoba CF  2\n1507         Real Murcia Deportivo La Coruna  7\n1508         Real Murcia            Elche CF  6\n1509         Real Murcia  Espanyol Barcelona 18\n1510         Real Murcia        FC Barcelona 18\n1511         Real Murcia           Getafe CF  1\n1512         Real Murcia          Granada CF  3\n1513         Real Murcia         Hercules CF  6\n1514         Real Murcia          Levante UD  3\n1515         Real Murcia           Malaga CF  1\n1516         Real Murcia       Pontevedra CF  1\n1517         Real Murcia        RCD Mallorca  5\n1518         Real Murcia    Racing Santander  6\n1519         Real Murcia          Real Betis 12\n1520         Real Murcia         Real Madrid 18\n1521         Real Murcia         Real Oviedo  8\n1522         Real Murcia       Real Sociedad 12\n1523         Real Murcia     Real Valladolid 12\n1524         Real Murcia       Real Zaragoza 13\n1525         Real Murcia   Recreativo Huelva  1\n1526         Real Murcia          Sevilla FC 17\n1527         Real Murcia      Sporting Gijon 11\n1528         Real Murcia          UD Almeria  1\n1529         Real Murcia       UD Las Palmas  7\n1530         Real Murcia        UD Salamanca  3\n1531         Real Murcia           UE Lleida  1\n1532         Real Murcia         Valencia CF 17\n1533         Real Murcia       Villarreal CF  2\n1534         Real Oviedo            Albacete  5\n1535         Real Oviedo     Arenas de Getxo  2\n1536         Real Oviedo     Athletic Bilbao 38\n1537         Real Oviedo     Atletico Madrid 36\n1538         Real Oviedo           Burgos CF  1\n1539         Real Oviedo          CA Osasuna 13\n1540         Real Oviedo           CD Alaves  3\n1541         Real Oviedo         CD Alcoyano  3\n1542         Real Oviedo        CD Castellon 10\n1543         Real Oviedo         CD Logrones  8\n1544         Real Oviedo           CD Malaga  7\n1545         Real Oviedo         CD Numancia  2\n1546         Real Oviedo         CD Tenerife 11\n1547         Real Oviedo         CE Sabadell  5\n1548         Real Oviedo      CF Extremadura  2\n1549         Real Oviedo           CP Merida  2\n1550         Real Oviedo            Cadiz CF  5\n1551         Real Oviedo          Celta Vigo 25\n1552         Real Oviedo          Cordoba CF  3\n1553         Real Oviedo Deportivo La Coruna 22\n1554         Real Oviedo            Elche CF  9\n1555         Real Oviedo  Espanyol Barcelona 35\n1556         Real Oviedo        FC Barcelona 38\n1557         Real Oviedo           Gimnastic  3\n1558         Real Oviedo          Granada CF 10\n1559         Real Oviedo         Hercules CF  6\n1560         Real Oviedo          Levante UD  2\n1561         Real Oviedo           Malaga CF  2\n1562         Real Oviedo       Pontevedra CF  1\n1563         Real Oviedo        RCD Mallorca 10\n1564         Real Oviedo    Racing Santander 17\n1565         Real Oviedo      Rayo Vallecano  7\n1566         Real Oviedo          Real Betis 21\n1567         Real Oviedo         Real Burgos  3\n1568         Real Oviedo           Real Jaen  1\n1569         Real Oviedo         Real Madrid 38\n1570         Real Oviedo         Real Murcia  8\n1571         Real Oviedo       Real Sociedad 28\n1572         Real Oviedo     Real Valladolid 20\n1573         Real Oviedo       Real Zaragoza 26\n1574         Real Oviedo       SD Compostela  4\n1575         Real Oviedo          Sevilla FC 32\n1576         Real Oviedo      Sporting Gijon 20\n1577         Real Oviedo       UD Las Palmas  7\n1578         Real Oviedo        UD Salamanca  4\n1579         Real Oviedo           UE Lleida  1\n1580         Real Oviedo         Valencia CF 38\n1581         Real Oviedo       Villarreal CF  2\n1582       Real Sociedad          AD Almeria  2\n1583       Real Sociedad            Albacete  7\n1584       Real Sociedad     Arenas de Getxo  7\n1585       Real Sociedad     Athletic Bilbao 69\n1586       Real Sociedad     Atletico Madrid 64\n1587       Real Sociedad     Atletico Tetuan  1\n1588       Real Sociedad           Burgos CF  6\n1589       Real Sociedad          CA Osasuna 31\n1590       Real Sociedad           CD Alaves 11\n1591       Real Sociedad         CD Alcoyano  2\n1592       Real Sociedad        CD Castellon  7\n1593       Real Sociedad           CD Condal  1\n1594       Real Sociedad          CD Leonesa  1\n1595       Real Sociedad         CD Logrones  9\n1596       Real Sociedad           CD Malaga 18\n1597       Real Sociedad         CD Numancia  3\n1598       Real Sociedad         CD Tenerife 12\n1599       Real Sociedad           CE Europa  3\n1600       Real Sociedad         CE Sabadell  9\n1601       Real Sociedad      CF Extremadura  2\n1602       Real Sociedad           CP Merida  2\n1603       Real Sociedad            Cadiz CF 12\n1604       Real Sociedad          Celta Vigo 44\n1605       Real Sociedad          Cordoba CF  4\n1606       Real Sociedad Deportivo La Coruna 34\n1607       Real Sociedad            Elche CF 16\n1608       Real Sociedad  Espanyol Barcelona 66\n1609       Real Sociedad        FC Barcelona 69\n1610       Real Sociedad           Getafe CF  9\n1611       Real Sociedad           Gimnastic  3\n1612       Real Sociedad          Granada CF 19\n1613       Real Sociedad         Hercules CF 15\n1614       Real Sociedad          Levante UD  8\n1615       Real Sociedad           Malaga CF 13\n1616       Real Sociedad       Pontevedra CF  3\n1617       Real Sociedad        RCD Mallorca 22\n1618       Real Sociedad    Racing Santander 39\n1619       Real Sociedad      Rayo Vallecano 17\n1620       Real Sociedad          Real Betis 42\n1621       Real Sociedad         Real Burgos  3\n1622       Real Sociedad           Real Jaen  3\n1623       Real Sociedad         Real Madrid 69\n1624       Real Sociedad         Real Murcia 12\n1625       Real Sociedad         Real Oviedo 28\n1626       Real Sociedad          Real Union  4\n1627       Real Sociedad     Real Valladolid 37\n1628       Real Sociedad       Real Zaragoza 48\n1629       Real Sociedad   Recreativo Huelva  3\n1630       Real Sociedad       SD Compostela  4\n1631       Real Sociedad            SD Eibar  2\n1632       Real Sociedad          Sevilla FC 57\n1633       Real Sociedad      Sporting Gijon 36\n1634       Real Sociedad          UD Almeria  3\n1635       Real Sociedad       UD Las Palmas 29\n1636       Real Sociedad        UD Salamanca 12\n1637       Real Sociedad           UE Lleida  2\n1638       Real Sociedad         Valencia CF 65\n1639       Real Sociedad       Villarreal CF 13\n1640          Real Union     Arenas de Getxo  4\n1641          Real Union     Athletic Bilbao  4\n1642          Real Union     Atletico Madrid  2\n1643          Real Union           CD Alaves  2\n1644          Real Union           CE Europa  3\n1645          Real Union  Espanyol Barcelona  4\n1646          Real Union        FC Barcelona  4\n1647          Real Union    Racing Santander  4\n1648          Real Union         Real Madrid  4\n1649          Real Union       Real Sociedad  4\n1650          Real Union         Valencia CF  1\n1651     Real Valladolid          AD Almeria  1\n1652     Real Valladolid            Albacete  5\n1653     Real Valladolid     Athletic Bilbao 42\n1654     Real Valladolid     Atletico Madrid 41\n1655     Real Valladolid     Atletico Tetuan  1\n1656     Real Valladolid          CA Osasuna 27\n1657     Real Valladolid           CD Alaves  7\n1658     Real Valladolid         CD Alcoyano  2\n1659     Real Valladolid        CD Castellon  3\n1660     Real Valladolid           CD Condal  1\n1661     Real Valladolid          CD Leonesa  1\n1662     Real Valladolid         CD Logrones  8\n1663     Real Valladolid           CD Malaga 10\n1664     Real Valladolid         CD Numancia  3\n1665     Real Valladolid         CD Tenerife 11\n1666     Real Valladolid         CE Sabadell  3\n1667     Real Valladolid      CF Extremadura  2\n1668     Real Valladolid           CP Merida  2\n1669     Real Valladolid            Cadiz CF  9\n1670     Real Valladolid          Celta Vigo 28\n1671     Real Valladolid          Cordoba CF  2\n1672     Real Valladolid Deportivo La Coruna 26\n1673     Real Valladolid            Elche CF  7\n1674     Real Valladolid  Espanyol Barcelona 39\n1675     Real Valladolid        FC Barcelona 42\n1676     Real Valladolid           Getafe CF  5\n1677     Real Valladolid           Gimnastic  2\n1678     Real Valladolid          Granada CF  5\n1679     Real Valladolid         Hercules CF  7\n1680     Real Valladolid          Levante UD  4\n1681     Real Valladolid           Malaga CF  9\n1682     Real Valladolid       Pontevedra CF  1\n1683     Real Valladolid        RCD Mallorca 19\n1684     Real Valladolid    Racing Santander 24\n1685     Real Valladolid      Rayo Vallecano 10\n1686     Real Valladolid          Real Betis 28\n1687     Real Valladolid         Real Burgos  2\n1688     Real Valladolid           Real Jaen  3\n1689     Real Valladolid         Real Madrid 42\n1690     Real Valladolid         Real Murcia 12\n1691     Real Valladolid         Real Oviedo 20\n1692     Real Valladolid       Real Sociedad 37\n1693     Real Valladolid       Real Zaragoza 33\n1694     Real Valladolid   Recreativo Huelva  3\n1695     Real Valladolid       SD Compostela  4\n1696     Real Valladolid          Sevilla FC 40\n1697     Real Valladolid      Sporting Gijon 23\n1698     Real Valladolid          UD Almeria  4\n1699     Real Valladolid       UD Las Palmas 14\n1700     Real Valladolid        UD Salamanca  6\n1701     Real Valladolid           UE Lleida  2\n1702     Real Valladolid         Valencia CF 41\n1703     Real Valladolid       Villarreal CF  9\n1704     Real Valladolid            Xerez CD  1\n1705       Real Zaragoza          AD Almeria  2\n1706       Real Zaragoza            Albacete  7\n1707       Real Zaragoza     Athletic Bilbao 58\n1708       Real Zaragoza     Atletico Madrid 56\n1709       Real Zaragoza     Atletico Tetuan  1\n1710       Real Zaragoza           Burgos CF  4\n1711       Real Zaragoza          CA Osasuna 31\n1712       Real Zaragoza           CD Alaves  5\n1713       Real Zaragoza        CD Castellon  6\n1714       Real Zaragoza           CD Condal  1\n1715       Real Zaragoza         CD Logrones  9\n1716       Real Zaragoza           CD Malaga 16\n1717       Real Zaragoza         CD Numancia  3\n1718       Real Zaragoza         CD Tenerife 13\n1719       Real Zaragoza         CE Sabadell  8\n1720       Real Zaragoza      CF Extremadura  2\n1721       Real Zaragoza           CP Merida  2\n1722       Real Zaragoza            Cadiz CF 11\n1723       Real Zaragoza          Celta Vigo 34\n1724       Real Zaragoza          Cordoba CF  7\n1725       Real Zaragoza Deportivo La Coruna 29\n1726       Real Zaragoza            Elche CF 18\n1727       Real Zaragoza  Espanyol Barcelona 55\n1728       Real Zaragoza        FC Barcelona 59\n1729       Real Zaragoza           Getafe CF  8\n1730       Real Zaragoza           Gimnastic  1\n1731       Real Zaragoza          Granada CF 15\n1732       Real Zaragoza         Hercules CF 14\n1733       Real Zaragoza          Levante UD  8\n1734       Real Zaragoza           Malaga CF 10\n1735       Real Zaragoza       Pontevedra CF  6\n1736       Real Zaragoza        RCD Mallorca 26\n1737       Real Zaragoza    Racing Santander 30\n1738       Real Zaragoza      Rayo Vallecano 12\n1739       Real Zaragoza          Real Betis 40\n1740       Real Zaragoza         Real Burgos  3\n1741       Real Zaragoza           Real Jaen  2\n1742       Real Zaragoza         Real Madrid 59\n1743       Real Zaragoza         Real Murcia 13\n1744       Real Zaragoza         Real Oviedo 26\n1745       Real Zaragoza       Real Sociedad 48\n1746       Real Zaragoza     Real Valladolid 33\n1747       Real Zaragoza   Recreativo Huelva  3\n1748       Real Zaragoza       SD Compostela  4\n1749       Real Zaragoza          Sevilla FC 51\n1750       Real Zaragoza      Sporting Gijon 33\n1751       Real Zaragoza          UD Almeria  3\n1752       Real Zaragoza       UD Las Palmas 27\n1753       Real Zaragoza        UD Salamanca 11\n1754       Real Zaragoza           UE Lleida  1\n1755       Real Zaragoza         Valencia CF 57\n1756       Real Zaragoza       Villarreal CF 11\n1757       Real Zaragoza            Xerez CD  1\n1758   Recreativo Huelva     Athletic Bilbao  5\n1759   Recreativo Huelva     Atletico Madrid  5\n1760   Recreativo Huelva           Burgos CF  1\n1761   Recreativo Huelva          CA Osasuna  4\n1762   Recreativo Huelva           CD Alaves  1\n1763   Recreativo Huelva         CD Numancia  1\n1764   Recreativo Huelva          Celta Vigo  3\n1765   Recreativo Huelva Deportivo La Coruna  4\n1766   Recreativo Huelva  Espanyol Barcelona  5\n1767   Recreativo Huelva        FC Barcelona  5\n1768   Recreativo Huelva           Getafe CF  3\n1769   Recreativo Huelva           Gimnastic  1\n1770   Recreativo Huelva         Hercules CF  1\n1771   Recreativo Huelva          Levante UD  2\n1772   Recreativo Huelva           Malaga CF  2\n1773   Recreativo Huelva        RCD Mallorca  4\n1774   Recreativo Huelva    Racing Santander  5\n1775   Recreativo Huelva      Rayo Vallecano  2\n1776   Recreativo Huelva          Real Betis  4\n1777   Recreativo Huelva         Real Madrid  5\n1778   Recreativo Huelva         Real Murcia  1\n1779   Recreativo Huelva       Real Sociedad  3\n1780   Recreativo Huelva     Real Valladolid  3\n1781   Recreativo Huelva       Real Zaragoza  3\n1782   Recreativo Huelva          Sevilla FC  5\n1783   Recreativo Huelva      Sporting Gijon  2\n1784   Recreativo Huelva          UD Almeria  2\n1785   Recreativo Huelva       UD Las Palmas  1\n1786   Recreativo Huelva        UD Salamanca  1\n1787   Recreativo Huelva         Valencia CF  5\n1788   Recreativo Huelva       Villarreal CF  4\n1789       SD Compostela            Albacete  2\n1790       SD Compostela     Athletic Bilbao  4\n1791       SD Compostela     Atletico Madrid  4\n1792       SD Compostela         CD Logrones  2\n1793       SD Compostela         CD Tenerife  4\n1794       SD Compostela      CF Extremadura  1\n1795       SD Compostela           CP Merida  2\n1796       SD Compostela          Celta Vigo  4\n1797       SD Compostela Deportivo La Coruna  4\n1798       SD Compostela  Espanyol Barcelona  4\n1799       SD Compostela        FC Barcelona  4\n1800       SD Compostela         Hercules CF  1\n1801       SD Compostela        RCD Mallorca  1\n1802       SD Compostela    Racing Santander  4\n1803       SD Compostela      Rayo Vallecano  2\n1804       SD Compostela          Real Betis  4\n1805       SD Compostela         Real Madrid  4\n1806       SD Compostela         Real Oviedo  4\n1807       SD Compostela       Real Sociedad  4\n1808       SD Compostela     Real Valladolid  4\n1809       SD Compostela       Real Zaragoza  4\n1810       SD Compostela          Sevilla FC  3\n1811       SD Compostela      Sporting Gijon  4\n1812       SD Compostela        UD Salamanca  2\n1813       SD Compostela         Valencia CF  4\n1814            SD Eibar     Athletic Bilbao  2\n1815            SD Eibar     Atletico Madrid  2\n1816            SD Eibar          Celta Vigo  2\n1817            SD Eibar          Cordoba CF  1\n1818            SD Eibar Deportivo La Coruna  2\n1819            SD Eibar            Elche CF  1\n1820            SD Eibar  Espanyol Barcelona  2\n1821            SD Eibar        FC Barcelona  2\n1822            SD Eibar           Getafe CF  2\n1823            SD Eibar          Granada CF  2\n1824            SD Eibar          Levante UD  2\n1825            SD Eibar           Malaga CF  2\n1826            SD Eibar      Rayo Vallecano  2\n1827            SD Eibar          Real Betis  1\n1828            SD Eibar         Real Madrid  2\n1829            SD Eibar       Real Sociedad  2\n1830            SD Eibar          Sevilla FC  2\n1831            SD Eibar      Sporting Gijon  1\n1832            SD Eibar          UD Almeria  1\n1833            SD Eibar       UD Las Palmas  1\n1834            SD Eibar         Valencia CF  2\n1835            SD Eibar       Villarreal CF  2\n1836          Sevilla FC          AD Almeria  2\n1837          Sevilla FC            Albacete  7\n1838          Sevilla FC     Arenas de Getxo  1\n1839          Sevilla FC     Athletic Bilbao 72\n1840          Sevilla FC     Atletico Madrid 72\n1841          Sevilla FC     Atletico Tetuan  1\n1842          Sevilla FC           Burgos CF  5\n1843          Sevilla FC          CA Osasuna 35\n1844          Sevilla FC           CD Alaves  6\n1845          Sevilla FC         CD Alcoyano  4\n1846          Sevilla FC        CD Castellon  9\n1847          Sevilla FC           CD Condal  1\n1848          Sevilla FC          CD Leonesa  1\n1849          Sevilla FC         CD Logrones  9\n1850          Sevilla FC           CD Malaga 16\n1851          Sevilla FC         CD Numancia  3\n1852          Sevilla FC         CD Tenerife 11\n1853          Sevilla FC         CE Sabadell 13\n1854          Sevilla FC      CF Extremadura  1\n1855          Sevilla FC           CP Merida  1\n1856          Sevilla FC            Cadiz CF 12\n1857          Sevilla FC          Celta Vigo 44\n1858          Sevilla FC          Cordoba CF  8\n1859          Sevilla FC Deportivo La Coruna 39\n1860          Sevilla FC            Elche CF 18\n1861          Sevilla FC  Espanyol Barcelona 68\n1862          Sevilla FC        FC Barcelona 72\n1863          Sevilla FC           Getafe CF 12\n1864          Sevilla FC           Gimnastic  4\n1865          Sevilla FC          Granada CF 18\n1866          Sevilla FC         Hercules CF 19\n1867          Sevilla FC          Levante UD 11\n1868          Sevilla FC           Malaga CF 14\n1869          Sevilla FC       Pontevedra CF  5\n1870          Sevilla FC        RCD Mallorca 24\n1871          Sevilla FC    Racing Santander 34\n1872          Sevilla FC      Rayo Vallecano 16\n1873          Sevilla FC          Real Betis 45\n1874          Sevilla FC         Real Burgos  3\n1875          Sevilla FC           Real Jaen  3\n1876          Sevilla FC         Real Madrid 72\n1877          Sevilla FC         Real Murcia 17\n1878          Sevilla FC         Real Oviedo 32\n1879          Sevilla FC       Real Sociedad 57\n1880          Sevilla FC     Real Valladolid 40\n1881          Sevilla FC       Real Zaragoza 51\n1882          Sevilla FC   Recreativo Huelva  5\n1883          Sevilla FC       SD Compostela  3\n1884          Sevilla FC            SD Eibar  2\n1885          Sevilla FC      Sporting Gijon 37\n1886          Sevilla FC          UD Almeria  6\n1887          Sevilla FC       UD Las Palmas 27\n1888          Sevilla FC        UD Salamanca  9\n1889          Sevilla FC           UE Lleida  2\n1890          Sevilla FC         Valencia CF 71\n1891          Sevilla FC       Villarreal CF 14\n1892          Sevilla FC            Xerez CD  1\n1893      Sporting Gijon          AD Almeria  2\n1894      Sporting Gijon            Albacete  5\n1895      Sporting Gijon     Athletic Bilbao 41\n1896      Sporting Gijon     Atletico Madrid 41\n1897      Sporting Gijon     Atletico Tetuan  1\n1898      Sporting Gijon           Burgos CF  5\n1899      Sporting Gijon          CA Osasuna 21\n1900      Sporting Gijon         CD Alcoyano  2\n1901      Sporting Gijon        CD Castellon  8\n1902      Sporting Gijon         CD Logrones  9\n1903      Sporting Gijon           CD Malaga 12\n1904      Sporting Gijon         CD Numancia  1\n1905      Sporting Gijon         CD Tenerife 10\n1906      Sporting Gijon         CE Sabadell  7\n1907      Sporting Gijon      CF Extremadura  1\n1908      Sporting Gijon           CP Merida  2\n1909      Sporting Gijon            Cadiz CF 11\n1910      Sporting Gijon          Celta Vigo 26\n1911      Sporting Gijon          Cordoba CF  1\n1912      Sporting Gijon Deportivo La Coruna 18\n1913      Sporting Gijon            Elche CF  7\n1914      Sporting Gijon  Espanyol Barcelona 40\n1915      Sporting Gijon        FC Barcelona 42\n1916      Sporting Gijon           Getafe CF  5\n1917      Sporting Gijon           Gimnastic  1\n1918      Sporting Gijon          Granada CF 11\n1919      Sporting Gijon         Hercules CF 12\n1920      Sporting Gijon          Levante UD  3\n1921      Sporting Gijon           Malaga CF  5\n1922      Sporting Gijon        RCD Mallorca 12\n1923      Sporting Gijon    Racing Santander 21\n1924      Sporting Gijon      Rayo Vallecano 10\n1925      Sporting Gijon          Real Betis 24\n1926      Sporting Gijon         Real Burgos  3\n1927      Sporting Gijon           Real Jaen  2\n1928      Sporting Gijon         Real Madrid 42\n1929      Sporting Gijon         Real Murcia 11\n1930      Sporting Gijon         Real Oviedo 20\n1931      Sporting Gijon       Real Sociedad 36\n1932      Sporting Gijon     Real Valladolid 23\n1933      Sporting Gijon       Real Zaragoza 33\n1934      Sporting Gijon   Recreativo Huelva  2\n1935      Sporting Gijon       SD Compostela  4\n1936      Sporting Gijon            SD Eibar  1\n1937      Sporting Gijon          Sevilla FC 37\n1938      Sporting Gijon          UD Almeria  3\n1939      Sporting Gijon       UD Las Palmas 19\n1940      Sporting Gijon        UD Salamanca 10\n1941      Sporting Gijon           UE Lleida  1\n1942      Sporting Gijon         Valencia CF 40\n1943      Sporting Gijon       Villarreal CF  5\n1944      Sporting Gijon            Xerez CD  1\n1945          UD Almeria     Athletic Bilbao  6\n1946          UD Almeria     Atletico Madrid  6\n1947          UD Almeria          CA Osasuna  5\n1948          UD Almeria         CD Numancia  1\n1949          UD Almeria         CD Tenerife  1\n1950          UD Almeria          Celta Vigo  2\n1951          UD Almeria          Cordoba CF  1\n1952          UD Almeria Deportivo La Coruna  5\n1953          UD Almeria            Elche CF  2\n1954          UD Almeria  Espanyol Barcelona  6\n1955          UD Almeria        FC Barcelona  6\n1956          UD Almeria           Getafe CF  6\n1957          UD Almeria          Granada CF  2\n1958          UD Almeria         Hercules CF  1\n1959          UD Almeria          Levante UD  4\n1960          UD Almeria           Malaga CF  5\n1961          UD Almeria        RCD Mallorca  4\n1962          UD Almeria    Racing Santander  4\n1963          UD Almeria      Rayo Vallecano  2\n1964          UD Almeria          Real Betis  3\n1965          UD Almeria         Real Madrid  6\n1966          UD Almeria         Real Murcia  1\n1967          UD Almeria       Real Sociedad  3\n1968          UD Almeria     Real Valladolid  4\n1969          UD Almeria       Real Zaragoza  3\n1970          UD Almeria   Recreativo Huelva  2\n1971          UD Almeria            SD Eibar  1\n1972          UD Almeria          Sevilla FC  6\n1973          UD Almeria      Sporting Gijon  3\n1974          UD Almeria         Valencia CF  6\n1975          UD Almeria       Villarreal CF  6\n1976          UD Almeria            Xerez CD  1\n1977       UD Las Palmas          AD Almeria  2\n1978       UD Las Palmas     Athletic Bilbao 33\n1979       UD Las Palmas     Atletico Madrid 30\n1980       UD Las Palmas     Atletico Tetuan  1\n1981       UD Las Palmas           Burgos CF  6\n1982       UD Las Palmas          CA Osasuna 13\n1983       UD Las Palmas           CD Alaves  4\n1984       UD Las Palmas        CD Castellon  3\n1985       UD Las Palmas           CD Condal  1\n1986       UD Las Palmas          CD Leonesa  1\n1987       UD Las Palmas         CD Logrones  1\n1988       UD Las Palmas           CD Malaga 12\n1989       UD Las Palmas         CD Numancia  1\n1990       UD Las Palmas         CD Tenerife  1\n1991       UD Las Palmas         CE Sabadell 10\n1992       UD Las Palmas            Cadiz CF  6\n1993       UD Las Palmas          Celta Vigo 20\n1994       UD Las Palmas          Cordoba CF  6\n1995       UD Las Palmas Deportivo La Coruna 13\n1996       UD Las Palmas            Elche CF 13\n1997       UD Las Palmas  Espanyol Barcelona 31\n1998       UD Las Palmas        FC Barcelona 32\n1999       UD Las Palmas           Getafe CF  1\n2000       UD Las Palmas          Granada CF 13\n2001       UD Las Palmas         Hercules CF 12\n2002       UD Las Palmas          Levante UD  2\n2003       UD Las Palmas           Malaga CF  3\n2004       UD Las Palmas       Pontevedra CF  5\n2005       UD Las Palmas        RCD Mallorca  6\n2006       UD Las Palmas    Racing Santander 13\n2007       UD Las Palmas      Rayo Vallecano  6\n2008       UD Las Palmas          Real Betis 20\n2009       UD Las Palmas           Real Jaen  2\n2010       UD Las Palmas         Real Madrid 32\n2011       UD Las Palmas         Real Murcia  7\n2012       UD Las Palmas         Real Oviedo  7\n2013       UD Las Palmas       Real Sociedad 29\n2014       UD Las Palmas     Real Valladolid 14\n2015       UD Las Palmas       Real Zaragoza 27\n2016       UD Las Palmas   Recreativo Huelva  1\n2017       UD Las Palmas            SD Eibar  1\n2018       UD Las Palmas          Sevilla FC 27\n2019       UD Las Palmas      Sporting Gijon 19\n2020       UD Las Palmas        UD Salamanca  8\n2021       UD Las Palmas         Valencia CF 31\n2022       UD Las Palmas       Villarreal CF  3\n2023        UD Salamanca          AD Almeria  2\n2024        UD Salamanca            Albacete  1\n2025        UD Salamanca     Athletic Bilbao 12\n2026        UD Salamanca     Atletico Madrid 12\n2027        UD Salamanca           Burgos CF  4\n2028        UD Salamanca          CA Osasuna  3\n2029        UD Salamanca           CD Alaves  1\n2030        UD Salamanca           CD Malaga  5\n2031        UD Salamanca         CD Tenerife  3\n2032        UD Salamanca      CF Extremadura  1\n2033        UD Salamanca           CP Merida  2\n2034        UD Salamanca            Cadiz CF  2\n2035        UD Salamanca          Celta Vigo  7\n2036        UD Salamanca Deportivo La Coruna  3\n2037        UD Salamanca            Elche CF  4\n2038        UD Salamanca  Espanyol Barcelona 12\n2039        UD Salamanca        FC Barcelona 12\n2040        UD Salamanca          Granada CF  2\n2041        UD Salamanca         Hercules CF  7\n2042        UD Salamanca        RCD Mallorca  3\n2043        UD Salamanca    Racing Santander  8\n2044        UD Salamanca      Rayo Vallecano  4\n2045        UD Salamanca          Real Betis 11\n2046        UD Salamanca         Real Madrid 12\n2047        UD Salamanca         Real Murcia  3\n2048        UD Salamanca         Real Oviedo  4\n2049        UD Salamanca       Real Sociedad 12\n2050        UD Salamanca     Real Valladolid  6\n2051        UD Salamanca       Real Zaragoza 11\n2052        UD Salamanca   Recreativo Huelva  1\n2053        UD Salamanca       SD Compostela  2\n2054        UD Salamanca          Sevilla FC  9\n2055        UD Salamanca      Sporting Gijon 10\n2056        UD Salamanca       UD Las Palmas  8\n2057        UD Salamanca         Valencia CF 12\n2058        UD Salamanca       Villarreal CF  1\n2059           UE Lleida            Albacete  1\n2060           UE Lleida     Athletic Bilbao  2\n2061           UE Lleida     Atletico Madrid  2\n2062           UE Lleida          CA Osasuna  1\n2063           UE Lleida         CD Alcoyano  1\n2064           UE Lleida         CD Logrones  1\n2065           UE Lleida           CD Malaga  1\n2066           UE Lleida         CD Tenerife  1\n2067           UE Lleida          Celta Vigo  2\n2068           UE Lleida Deportivo La Coruna  2\n2069           UE Lleida  Espanyol Barcelona  1\n2070           UE Lleida        FC Barcelona  2\n2071           UE Lleida    Racing Santander  2\n2072           UE Lleida      Rayo Vallecano  1\n2073           UE Lleida         Real Madrid  2\n2074           UE Lleida         Real Murcia  1\n2075           UE Lleida         Real Oviedo  1\n2076           UE Lleida       Real Sociedad  2\n2077           UE Lleida     Real Valladolid  2\n2078           UE Lleida       Real Zaragoza  1\n2079           UE Lleida          Sevilla FC  2\n2080           UE Lleida      Sporting Gijon  1\n2081           UE Lleida         Valencia CF  2\n2082         Valencia CF          AD Almeria  2\n2083         Valencia CF            Albacete  7\n2084         Valencia CF     Arenas de Getxo  4\n2085         Valencia CF     Athletic Bilbao 81\n2086         Valencia CF     Atletico Madrid 76\n2087         Valencia CF     Atletico Tetuan  1\n2088         Valencia CF           Burgos CF  6\n2089         Valencia CF          CA Osasuna 35\n2090         Valencia CF           CD Alaves 10\n2091         Valencia CF         CD Alcoyano  4\n2092         Valencia CF        CD Castellon 11\n2093         Valencia CF           CD Condal  1\n2094         Valencia CF          CD Leonesa  1\n2095         Valencia CF         CD Logrones  9\n2096         Valencia CF           CD Malaga 20\n2097         Valencia CF         CD Numancia  4\n2098         Valencia CF         CD Tenerife 13\n2099         Valencia CF         CE Sabadell 13\n2100         Valencia CF      CF Extremadura  2\n2101         Valencia CF           CP Merida  2\n2102         Valencia CF            Cadiz CF 11\n2103         Valencia CF          Celta Vigo 50\n2104         Valencia CF          Cordoba CF  9\n2105         Valencia CF Deportivo La Coruna 44\n2106         Valencia CF            Elche CF 21\n2107         Valencia CF  Espanyol Barcelona 77\n2108         Valencia CF        FC Barcelona 81\n2109         Valencia CF           Getafe CF 12\n2110         Valencia CF           Gimnastic  4\n2111         Valencia CF          Granada CF 22\n2112         Valencia CF         Hercules CF 20\n2113         Valencia CF          Levante UD 11\n2114         Valencia CF           Malaga CF 15\n2115         Valencia CF       Pontevedra CF  6\n2116         Valencia CF        RCD Mallorca 26\n2117         Valencia CF    Racing Santander 40\n2118         Valencia CF      Rayo Vallecano 17\n2119         Valencia CF          Real Betis 49\n2120         Valencia CF         Real Burgos  3\n2121         Valencia CF           Real Jaen  3\n2122         Valencia CF         Real Madrid 81\n2123         Valencia CF         Real Murcia 17\n2124         Valencia CF         Real Oviedo 38\n2125         Valencia CF       Real Sociedad 65\n2126         Valencia CF          Real Union  1\n2127         Valencia CF     Real Valladolid 41\n2128         Valencia CF       Real Zaragoza 57\n2129         Valencia CF   Recreativo Huelva  5\n2130         Valencia CF       SD Compostela  4\n2131         Valencia CF            SD Eibar  2\n2132         Valencia CF          Sevilla FC 71\n2133         Valencia CF      Sporting Gijon 40\n2134         Valencia CF          UD Almeria  6\n2135         Valencia CF       UD Las Palmas 31\n2136         Valencia CF        UD Salamanca 12\n2137         Valencia CF           UE Lleida  2\n2138         Valencia CF       Villarreal CF 16\n2139         Valencia CF            Xerez CD  1\n2140       Villarreal CF            Albacete  2\n2141       Villarreal CF     Athletic Bilbao 16\n2142       Villarreal CF     Atletico Madrid 14\n2143       Villarreal CF          CA Osasuna 13\n2144       Villarreal CF           CD Alaves  5\n2145       Villarreal CF         CD Numancia  3\n2146       Villarreal CF         CD Tenerife  3\n2147       Villarreal CF      CF Extremadura  1\n2148       Villarreal CF            Cadiz CF  1\n2149       Villarreal CF          Celta Vigo 10\n2150       Villarreal CF          Cordoba CF  1\n2151       Villarreal CF Deportivo La Coruna 14\n2152       Villarreal CF            Elche CF  2\n2153       Villarreal CF  Espanyol Barcelona 16\n2154       Villarreal CF        FC Barcelona 16\n2155       Villarreal CF           Getafe CF 11\n2156       Villarreal CF           Gimnastic  1\n2157       Villarreal CF          Granada CF  4\n2158       Villarreal CF         Hercules CF  1\n2159       Villarreal CF          Levante UD  8\n2160       Villarreal CF           Malaga CF 13\n2161       Villarreal CF        RCD Mallorca 13\n2162       Villarreal CF    Racing Santander 12\n2163       Villarreal CF      Rayo Vallecano  7\n2164       Villarreal CF          Real Betis 12\n2165       Villarreal CF         Real Madrid 16\n2166       Villarreal CF         Real Murcia  2\n2167       Villarreal CF         Real Oviedo  2\n2168       Villarreal CF       Real Sociedad 13\n2169       Villarreal CF     Real Valladolid  9\n2170       Villarreal CF       Real Zaragoza 11\n2171       Villarreal CF   Recreativo Huelva  4\n2172       Villarreal CF            SD Eibar  2\n2173       Villarreal CF          Sevilla FC 14\n2174       Villarreal CF      Sporting Gijon  5\n2175       Villarreal CF          UD Almeria  6\n2176       Villarreal CF       UD Las Palmas  3\n2177       Villarreal CF        UD Salamanca  1\n2178       Villarreal CF         Valencia CF 16\n2179       Villarreal CF            Xerez CD  1\n2180            Xerez CD     Athletic Bilbao  1\n2181            Xerez CD     Atletico Madrid  1\n2182            Xerez CD          CA Osasuna  1\n2183            Xerez CD         CD Tenerife  1\n2184            Xerez CD Deportivo La Coruna  1\n2185            Xerez CD  Espanyol Barcelona  1\n2186            Xerez CD        FC Barcelona  1\n2187            Xerez CD           Getafe CF  1\n2188            Xerez CD           Malaga CF  1\n2189            Xerez CD        RCD Mallorca  1\n2190            Xerez CD    Racing Santander  1\n2191            Xerez CD         Real Madrid  1\n2192            Xerez CD     Real Valladolid  1\n2193            Xerez CD       Real Zaragoza  1\n2194            Xerez CD          Sevilla FC  1\n2195            Xerez CD      Sporting Gijon  1\n2196            Xerez CD          UD Almeria  1\n2197            Xerez CD         Valencia CF  1\n2198            Xerez CD       Villarreal CF  1\n\n\nFrequencies of match outcomes\n\nspain %>% count(hgoal, vgoal)\n\n   hgoal vgoal    n\n1      0     0 1811\n2      0     1 1320\n3      0     2  742\n4      0     3  299\n5      0     4  117\n6      0     5   30\n7      0     6   12\n8      0     7    4\n9      0     8    4\n10     1     0 2815\n11     1     1 2570\n12     1     2 1168\n13     1     3  431\n14     1     4  155\n15     1     5   58\n16     1     6   11\n17     1     7    2\n18     1     8    1\n19     2     0 2039\n20     2     1 2228\n21     2     2 1035\n22     2     3  357\n23     2     4  135\n24     2     5   35\n25     2     6    6\n26     2     7    2\n27     2     8    2\n28     3     0 1196\n29     3     1 1262\n30     3     2  652\n31     3     3  218\n32     3     4   47\n33     3     5   14\n34     3     6    6\n35     3     8    1\n36     4     0  643\n37     4     1  669\n38     4     2  325\n39     4     3  127\n40     4     4   28\n41     4     5    8\n42     4     6    2\n43     4     7    1\n44     5     0  268\n45     5     1  288\n46     5     2  149\n47     5     3   47\n48     5     4   22\n49     5     5    2\n50     5     6    1\n51     6     0  110\n52     6     1  116\n53     6     2   67\n54     6     3   19\n55     6     4    7\n56     6     6    1\n57     7     0   54\n58     7     1   48\n59     7     2   23\n60     7     3   11\n61     7     4    1\n62     7     5    1\n63     8     0   21\n64     8     1   20\n65     8     2   10\n66     8     3    6\n67     9     0   12\n68     9     1    5\n69     9     2    2\n70     9     3    1\n71     9     4    1\n72     9     5    1\n73    10     0    3\n74    10     1    5\n75    10     2    1\n76    10     3    1\n77    11     1    1\n78    11     2    1\n79    12     1    1\n\n\nSame, but using the combined FT variable.\n\nspain %>% count(FT)\n\n     FT    n\n1   0-0 1811\n2   0-1 1320\n3   0-2  742\n4   0-3  299\n5   0-4  117\n6   0-5   30\n7   0-6   12\n8   0-7    4\n9   0-8    4\n10  1-0 2815\n11  1-1 2570\n12  1-2 1168\n13  1-3  431\n14  1-4  155\n15  1-5   58\n16  1-6   11\n17  1-7    2\n18  1-8    1\n19 10-0    3\n20 10-1    5\n21 10-2    1\n22 10-3    1\n23 11-1    1\n24 11-2    1\n25 12-1    1\n26  2-0 2039\n27  2-1 2228\n28  2-2 1035\n29  2-3  357\n30  2-4  135\n31  2-5   35\n32  2-6    6\n33  2-7    2\n34  2-8    2\n35  3-0 1196\n36  3-1 1262\n37  3-2  652\n38  3-3  218\n39  3-4   47\n40  3-5   14\n41  3-6    6\n42  3-8    1\n43  4-0  643\n44  4-1  669\n45  4-2  325\n46  4-3  127\n47  4-4   28\n48  4-5    8\n49  4-6    2\n50  4-7    1\n51  5-0  268\n52  5-1  288\n53  5-2  149\n54  5-3   47\n55  5-4   22\n56  5-5    2\n57  5-6    1\n58  6-0  110\n59  6-1  116\n60  6-2   67\n61  6-3   19\n62  6-4    7\n63  6-6    1\n64  7-0   54\n65  7-1   48\n66  7-2   23\n67  7-3   11\n68  7-4    1\n69  7-5    1\n70  8-0   21\n71  8-1   20\n72  8-2   10\n73  8-3    6\n74  9-0   12\n75  9-1    5\n76  9-2    2\n77  9-3    1\n78  9-4    1\n79  9-5    1\n\n\nFrequencies of a sum (total goals in match)\n\nspain %>% count(hgoal + vgoal)\n\n   hgoal + vgoal    n\n1              0 1811\n2              1 4135\n3              2 5351\n4              3 4891\n5              4 3488\n6              5 2131\n7              6 1146\n8              7  543\n9              8  237\n10             9  113\n11            10   42\n12            11   17\n13            12    5\n14            13    4\n15            14    1\n\n\nFrequencies of function work as well (year of match date).\n\nspain %>% count(year(Date))\n\n   year(Date)   n\n1        1929 115\n2        1930  84\n3        1931  91\n4        1932  95\n5        1933 110\n6        1934  75\n7        1935 150\n8        1936  84\n9        1939  30\n10       1940 186\n11       1941 139\n12       1942 182\n13       1943 175\n14       1944 189\n15       1945 182\n16       1946 189\n17       1947 175\n18       1948 189\n19       1949 189\n20       1950 205\n21       1951 240\n22       1952 216\n23       1953 256\n24       1954 248\n25       1955 216\n26       1956 264\n27       1957 232\n28       1958 240\n29       1959 240\n30       1960 232\n31       1961 264\n32       1962 216\n33       1963 239\n34       1964 249\n35       1965 240\n36       1966 233\n37       1967 239\n38       1968 248\n39       1969 248\n40       1970 232\n41       1971 246\n42       1972 324\n43       1973 306\n44       1974 288\n45       1975 315\n46       1976 306\n47       1977 297\n48       1978 306\n49       1979 306\n50       1980 332\n51       1981 306\n52       1982 297\n53       1983 310\n54       1984 320\n55       1985 306\n56       1986 324\n57       1987 366\n58       1988 379\n59       1989 401\n60       1990 368\n61       1991 371\n62       1992 380\n63       1993 391\n64       1994 370\n65       1995 428\n66       1996 451\n67       1997 454\n68       1998 350\n69       1999 401\n70       2000 369\n71       2001 400\n72       2002 350\n73       2003 401\n74       2004 379\n75       2005 381\n76       2006 369\n77       2007 391\n78       2008 370\n79       2009 370\n80       2010 390\n81       2011 380\n82       2012 390\n83       2013 380\n84       2014 369\n85       2015 390\n86       2016 211\n\n\nNote: this works because R knows that ‘Date’ is a date\nHow can you know that R knows? Either: (1) type ‘spain %>% glimpse’ and observe that the class of ‘Date’ is a \n(2) type ‘spain %>% pull(Date) %>% class()’ to obtain that information (pull returns a single variable from a dataframe)\n\nspain %>% pull(Date) %>% class()\n\n[1] \"character\"\n\n\nWhat is this ‘round’ variable?\n\nspain %>% count(round)\n\n   round     n\n1 league 23825\n2 phase2    90\n\n\nApparently 90 matches (‘phase2’) are not regular La Liga matches. In subsequent analyses, we will not use these 90 matches. So we create a new dataframe excluding these 90 matches.\n\nspain_league <-\n  spain %>%\n  filter(round==\"league\")\n\nWe will try to answer a couple of simple questions:\n1. Is it true that there are less goals today than in earlier days?\n2. Is the number of goals related to the season of the year?\n3. Is playing home really an advantage?\n4. If so, has this advantage changed over time?\n\nLess goals today?\n\nKey variables, just to check we have the variables we need and they look OK. Just list the first 10 cases\n\nspain_league %>%\n  select(Date, home, visitor, hgoal, vgoal) %>%\n  head(n=10)\n\n         Date               home            visitor hgoal vgoal\n1  1929-02-10    Arenas de Getxo    Atletico Madrid     2     3\n2  1929-02-10 Espanyol Barcelona         Real Union     3     2\n3  1929-02-10        Real Madrid          CE Europa     5     0\n4  1929-02-10      Real Sociedad    Athletic Bilbao     1     1\n5  1929-02-12   Racing Santander       FC Barcelona     0     2\n6  1929-02-17       FC Barcelona        Real Madrid     1     2\n7  1929-02-17    Athletic Bilbao Espanyol Barcelona     9     0\n8  1929-02-17    Atletico Madrid      Real Sociedad     0     3\n9  1929-02-17         Real Union   Racing Santander     3     1\n10 1929-02-17          CE Europa    Arenas de Getxo     5     2\n\n\nSame, but this time a random sample of rows.\n\nspain_league %>%\n  select(Date, home, visitor, hgoal, vgoal) %>%\n  slice_sample(n=10)\n\n         Date            home            visitor hgoal vgoal\n1  1973-09-30        Elche CF        Valencia CF     1     0\n2  1953-11-15      CA Osasuna    Atletico Madrid     3     1\n3  1996-10-02    FC Barcelona        CD Tenerife     1     1\n4  1963-04-07      Cordoba CF       FC Barcelona     1     2\n5  1951-03-18      Sevilla FC          UE Lleida     5     0\n6  1949-03-06 Athletic Bilbao       FC Barcelona     2     0\n7  1967-01-08   Pontevedra CF         Sevilla FC     3     0\n8  1962-03-25      CA Osasuna         Real Betis     4     0\n9  1965-09-26     Valencia CF        Real Madrid     3     0\n10 1935-01-27   Real Sociedad Espanyol Barcelona     1     4\n\n\nOnce more, number of goals in match\n\nspain_league %>% count(hgoal + vgoal)\n\n   hgoal + vgoal    n\n1              0 1807\n2              1 4122\n3              2 5330\n4              3 4870\n5              4 3472\n6              5 2120\n7              6 1142\n8              7  543\n9              8  237\n10             9  113\n11            10   42\n12            11   17\n13            12    5\n14            13    4\n15            14    1\n\n\nHow did the number of goals per match develop over time?\n\nspain_league %>%\n  # number of goals per match, and year of the match\n  mutate(goals = hgoal+vgoal,\n         year  = year(Date)\n  ) %>%\n  ggplot() + \n  geom_point(aes(x=year, y=goals))\n\n\n\n\nOeps, this was not what I had in mind. I need to aggregate first! The ‘group_by’ function does group the data per year, so that we can then use the summarize function to obtain the mean goals scored per match (mean_goals_pm) per year.\n\nspain_league %>%\n  mutate(goals = hgoal + vgoal,\n         year  = year(Date)\n  ) %>%\n  group_by(year) %>%\n  summarize(mean_goals_pm = mean(goals)) %>%\n  ggplot() + \n  geom_line(aes(x=year, y=mean_goals_pm))\n\n\n\n\nYes, there were more goals back in the old days (before 1950).\nFunny pattern. What about England? Do we have the same variables (yes!)\n\nengland %>% names()\n\n [1] \"Date\"     \"Season\"   \"home\"     \"visitor\"  \"FT\"       \"hgoal\"   \n [7] \"vgoal\"    \"division\" \"tier\"     \"totgoal\"  \"goaldif\"  \"result\"  \n\n\n\nengland %>%\n  # number of goals per match, and year of the match\n  mutate(goals = hgoal+vgoal,\n         year  = year(Date)\n  ) %>%\n  group_by(year) %>%\n  summarize(mean_goals_pm = mean(goals)) %>%\n  ggplot() + \n  geom_line(aes(x=year, y=mean_goals_pm))\n\nWarning: There was 1 warning in `mutate()`.\ni In argument: `year = year(Date)`.\nCaused by warning:\n! tz(): Don't know how to compute timezone for object of class factor; returning \"UTC\".\n\n\n\n\n\nEngland is were the game was invented (they say), so they have a longer history going back to 1888. Let us now combine England and Spain.\n\nspain_series <-\n  spain_league %>%\n  mutate(goals  = hgoal+vgoal,\n         year   = year(Date)\n  ) %>%\n  group_by(year) %>%\n  summarize(mean_goals_pm = mean(goals),\n            # Define a constant for Spain\n            country       = \"Spain\")\n\nWhat des this look like? Do it yourself: View(spain_series).\n\nengland_series <-\n  england %>%\n  # number of goals per match, and year of the match\n  mutate(goals  = hgoal+vgoal,\n         year   = year(Date)\n  ) %>%\n  group_by(year) %>%\n  summarize(mean_goals_pm = mean(goals),\n            # Define a constant for England\n            country       = \"England\")\n\nWarning: There was 1 warning in `mutate()`.\ni In argument: `year = year(Date)`.\nCaused by warning:\n! tz(): Don't know how to compute timezone for object of class factor; returning \"UTC\".\n\n\nStack both datasets on top of each other\n\nseries <- bind_rows(spain_series, england_series)\n\nTake a look yourself (note that England started 1888, Spain in 1929)\nseries %>% \n  arrange(year, country) %>% \n  View()\n  \nPlot development in Spain and England in the same graph\n\nseries %>%\n  ggplot() +\n  geom_line(aes(x=year, y=mean_goals_pm, color=country))\n\n\n\n\nBack to Spain\n\nIs the number of goals related to the season of the year? We use month of the year as a season indicator.\n\n\nspain_league %>%\n  # number of goals per match, and year of the match\n  mutate(goals = hgoal+vgoal,\n         month  = month(Date)\n  ) %>%\n  group_by(month) %>%\n  summarize(mean_goals_pm = mean(goals)) %>%\n  ggplot() + \n  geom_point(aes(x=month, y=mean_goals_pm)) +\n  scale_x_continuous(breaks=1:12)\n\n\n\n\nLet us check how many we have in summer (June-August, numbers of games)\n\nspain_league %>%\n  mutate(goals = hgoal+vgoal,\n         month  = month(Date)\n  ) %>%\n  group_by(month) %>%\n  # This is how we count nr of rows (matches) per month\n  summarize(number_of_matches = n()) %>%\n  ggplot() + \n  geom_point(aes(x=month, y=number_of_matches)) +\n  # this gives us a scale nicely labeled 1..12\n  scale_x_continuous(breaks=1:12)\n\n\n\n\nLet us ignore June-August\n\nspain_league %>%\n  mutate(goals = hgoal+vgoal,\n         month  = month(Date)\n  ) %>%\n  # this removes months 6,7 and 8 (June, July, August)\n  #   the exclamation mark (!) means NOT , i.e.\n  # !x means the same as (x == FALSE)  \n  filter(!(month %in% c(6:8))) %>%\n  group_by(month) %>%\n  # This is how we count nr of rows (matches) per month\n  summarize(number_of_matches = n()) %>%\n  ggplot() + \n  geom_point(aes(x=month, y=number_of_matches)) +\n  scale_x_continuous(breaks=1:12)\n\n\n\n\nHowever, the differences are pretty small. This becomes clear when we set the scale of the Y axis\n\nspain_league %>%\n  mutate(goals = hgoal+vgoal,\n         month  = month(Date) ) %>%\n  filter(!(month %in% c(6:8))) %>%\n  group_by(month) %>%\n  summarize(mean_goals_pm = mean(goals)) %>%\n  ggplot() + \n  geom_point(aes(x=month, y=mean_goals_pm)) +\n  scale_x_continuous(breaks=1:12) + \n  # Y axis range is between 0 and 3 goals\n  ylim(0,3)\n\n\n\n\nOr as a bar chart\n\nspain_league %>%\n  mutate(goals = hgoal+vgoal,\n         month  = month(Date) ) %>%\n  filter(!(month %in% c(6:8))) %>%\n  group_by(month) %>%\n  summarize(mean_goals_pm = mean(goals)) %>%\n  ggplot() + \n  # geom_col rather than geom_point\n  geom_col(aes(x=month, y=mean_goals_pm)) +\n  scale_x_continuous(breaks=1:12) + \n  # Y axis range is between 0 and 3 goals\n  ylim(0,3)\n\n\n\n\nThe differences are negligible!\n\nIs playing home really an advantage?\n\nLet us create a custom version of the dataset for this analysis\n\nspain_extended <- spain_league %>% \n  # Adding '-' in front of a variable means 'throw it away'\n  #   or, in other words, 'do not select it'. If you use the -\n  #   in select, variables not mentioned are retained.\n  select( -Season, -HT, -FT, -tier, -round, -group, -notes ) %>%\n  mutate(goals = hgoal+vgoal,\n         year  = year(Date),\n         month  = month(Date),\n         # Continuous version : difference in goals\n         goals_difference = hgoal - vgoal,\n         # Discrete version: home wins, visitors win, equal split\n         result_discrete = case_when(goals_difference > 0  ~ \"Hosts wins\",\n                                     goals_difference < 0  ~ \"Visitors win\",\n                                     goals_difference == 0 ~ \"Equal split\") )\n\nFrequency of wins, losses and equal splits\n\nspain_extended %>% count(result_discrete)\n\n  result_discrete     n\n1     Equal split  5644\n2      Hosts wins 13227\n3    Visitors win  4954\n\n\nIntermezzo (added after the workshop meeting)\nYou may be familiar with the ‘classic R’ table function to create this table (printed horizontally):\n\ntable(spain_extended$result_discrete)\n\n\n Equal split   Hosts wins Visitors win \n        5644        13227         4954 \n\n\nIf you prefer the classic table, the below will NOT work because there must always be a function after the pipe symbol (%>%) as the pipe symbol means “whatever” is returned by the function before %>% will become the first argument of the function after the %>%.And ‘result_discrete’ is not a function, but an object.\nspain_extended %>% result_discrete %>% table() \nBut this will work, because pull is a function that returns the variable result_discrete as a vector):\n\nspain_extended %>% pull(result_discrete) %>% table()\n\n.\n Equal split   Hosts wins Visitors win \n        5644        13227         4954 \n\n\nFrequency table with proportions.\n\nspain_extended %>%\n  group_by(result_discrete) %>%\n  summarize(frequency = n()) %>%\n  mutate(proportion = frequency / sum(frequency))\n\n# A tibble: 3 x 3\n  result_discrete frequency proportion\n  <chr>               <int>      <dbl>\n1 Equal split          5644      0.237\n2 Hosts wins          13227      0.555\n3 Visitors win         4954      0.208\n\n\nSame thing, but now as a bar chart.\n\nspain_extended %>%\n  group_by(result_discrete) %>%\n  summarize(frequency = n()) %>%\n  mutate(proportion = frequency / sum(frequency)) %>%\n  ggplot() +\n  geom_col(aes(x=result_discrete, y=proportion), fill=\"blue\")\n\n\n\n\nWhat does goal difference home-visitors look like\nKey descriptive variables.\n\nspain_extended %>% \n  select(goals_difference) %>% \n  summary()\n\n goals_difference\n Min.   :-8.000  \n 1st Qu.: 0.000  \n Median : 1.000  \n Mean   : 0.805  \n 3rd Qu.: 2.000  \n Max.   :11.000  \n\n\nMean: On average, home teams score .78 goals more per match than visitors.\nMedian: In half of the matches, the home team scores more than 1 goal more than the visitors\nLet us make a box plot\n\nspain_extended %>% \n  ggplot() + \n  geom_boxplot(aes(x=goals_difference)) + \n  scale_x_continuous(breaks = seq(-10, 10,1))\n\n\n\n\nHome teams clearly have an advantage!\n\nHas this advantage changed over time?\n\nProportions of matches won, lost, equal split\n\nspain_extended %>%\n  group_by(year, result_discrete) %>%\n  summarize(frequency = n()) %>%\n  mutate(proportion = frequency / sum(frequency)) %>%\n  ggplot() +\n  geom_line(aes(x=year, y=proportion, color=result_discrete))\n\n`summarise()` has grouped output by 'year'. You can override using the\n`.groups` argument.\n\n\n\n\n\nGoal count differences between home team and visitors\n\nspain_extended %>%\n  group_by(year) %>%\n  summarize(home_visitors_difference = mean(goals_difference)) %>%\n  ggplot() +\n  geom_line(aes(x=year, y=home_visitors_difference))\n\n\n\n\nBoth graphs strongly suggest that home advantage decreased over the past century."
  },
  {
    "objectID": "06_TT_202204.html#introduction",
    "href": "06_TT_202204.html#introduction",
    "title": "6  Long to wide (and vv) transformations",
    "section": "6.1 Introduction",
    "text": "6.1 Introduction\nIn this session, Sam Langton demonstrated long to wide (and wide to long) transformations using functions available in the tidyr package using data from the London Fire Brigade."
  },
  {
    "objectID": "06_TT_202204.html#preparation",
    "href": "06_TT_202204.html#preparation",
    "title": "6  Long to wide (and vv) transformations",
    "section": "6.2 Preparation",
    "text": "6.2 Preparation\n\nlibrary(tidytuesdayR)\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(forcats)\nlibrary(ggplot2)\n\nIdentify datasets available (fire service data).\n\ntt_df <- tidytuesdayR::tt_load(\"2021-06-29\")\n\n\n    Downloading file 1 of 1: `animal_rescues.csv`\n\n\nPull out the data.\n\nfire_df <- tt_df$animal_rescues\n\nSave for train working.\nHarrie: don't know what this means\nsave.image(\"data/train_working.Rdata\")\nload(\"data/train_working.Rdata\")\nBasic cleaning.\n\nfire_clean_df <- fire_df %>% \n  filter(cal_year < 2021) %>% \n  mutate(animal_group_broad = fct_lump(animal_group_parent, n = 5))"
  },
  {
    "objectID": "06_TT_202204.html#transformations",
    "href": "06_TT_202204.html#transformations",
    "title": "6  Long to wide (and vv) transformations",
    "section": "6.3 Transformations",
    "text": "6.3 Transformations\nCreate some wide data. Freq counts of incidents for each animal by year, then wide. 2021 is not complete. Note animal category is just for the demo!\nTake care, this is a crude recode.\n\nfire_wide1_df <- fire_clean_df %>% \n  filter(cal_year < 2021) %>% \n  select(incident_number, cal_year, animal_group_broad) %>% \n  group_by(cal_year, animal_group_broad) %>% \n  summarise(yearly_count = n()) %>% \n  pivot_wider(names_from = cal_year, values_from = yearly_count)\n\nNon-longitudinal example. Note the fiddly way of keeping zero counts. Requires an ungroup() and then complete(). There might be a better way of doing this!\n\nfire_wide2_df <- fire_clean_df %>% \n  filter(cal_year == 2009) %>% \n  select(incident_number, animal_group_broad, property_category)  %>% \n  group_by(animal_group_broad, property_category) %>% \n  summarise(yearly_count = n()) %>% \n  ungroup() %>% \n  complete(animal_group_broad, property_category, fill = list(yearly_count = 0)) %>% \n  pivot_wider(names_from = property_category, values_from = yearly_count)\n\nNested data / multilevel example.\n\nfire_wards_df <- fire_clean_df %>%\n  group_by(borough_code, ward_code, cal_year) %>% \n  summarise(yearly_count = n()) %>% \n  ungroup() %>% \n  filter(ward_code != \"NULL\") %>% \n  arrange(borough_code, ward_code, cal_year)\n\nMake wide for example, fill in zeros and arrange. Why interesting? Because it’s nested levels, longitudinal and ‘year’ in the var names.\n\nfire_wide3_df <- fire_wards_df %>% \n  arrange(cal_year) %>% \n  pivot_wider(names_from = cal_year, values_from = yearly_count, names_prefix = \"year_\") %>% \n  mutate_if(is.numeric, ~replace_na(., 0)) %>% \n  arrange(ward_code) \n\nRemove things that might confuse people.\n\nrm(fire_clean_df, fire_df, tt_df, fire_wards_df)"
  },
  {
    "objectID": "10_TT_202211.html",
    "href": "10_TT_202211.html",
    "title": "7  Student mobility in Europe",
    "section": "",
    "text": "8 Introduction\nIn this workshop, Wim Bernasco explores a Tidy Tuesday dataset about the European Union Erasmus+ student mobility program. This dataset was used in the main Tidy Tuesday of week 10 in 2022. For more information on this data, including the codebook, see the RForDataScience GitHub registry.\nIn this workshop, the focus is on exploring, analyzing, and maybe visualizing student streams between countries. Different descriptive questions will be answered:\nHere you find the link to the NSC-R Tidy Tuesday page.\n\n\n9 Get started\nInstall uninstalled packages tidyverse, here and tidytuesdayR.\n\nif (! require(\"tidyverse\")) install.packages(\n  pkgs = \"tidyverse\", repos = \"http://cran.us.r-project.org\"\n)\nif (! require(\"here\")) install.packages(\n  pkgs = \"here\", repos = \"http://cran.us.r-project.org\"\n)\nif (! require(\"tidytuesdayR\")) install.packages(\n  pkgs = \"tidytuesdayR\", repos = \"http://cran.us.r-project.org\"\n)\nif (! require(\"broom\")) install.packages(\n  pkgs = \"broom\", repos = \"http://cran.us.r-project.org\"\n)\nif (! require(\"circlize\")) install.packages(\n  pkgs = \"circlize\", repos = \"http://cran.us.r-project.org\"\n)\nif (! require(\"igraph\")) install.packages(\n  pkgs = \"igraph\", repos = \"http://cran.us.r-project.org\"\n)\n\nLoad the required libraries\n\nlibrary(tidyverse)\nlibrary(broom)\nlibrary(here)\nlibrary(tidytuesdayR)\nlibrary(circlize)\nlibrary(igraph)\n\nLoad the datafile For information see\n\n\n\n\n\n\nNote\n\n\n\nThe ‘participants’ field is a frequency weight!\n\n\nOpen the dataset\n\ntuesdata <- tt_load(2022, week = 10)\n\n--- Compiling #TidyTuesday Information for 2022-03-08 ----\n\n\n--- There is 1 file available ---\n\n\n--- Starting Download ---\n\n\n\n    Downloading file 1 of 1: `erasmus.csv`\n\n\n--- Download complete ---\n\nerasmus <- tuesdata$erasmus\n\nThere are two additional ‘helper’ datafiles used used in this script: country_names.csv: The full names and EU-status of the countries adjacency.csv : Pairs of countries that are adjacent (share borders)\nI will address some of the following descriptive questions:\n- How many students studied abroad?\n- What are the top-10 receiving countries?\n- What are the top-10 sending countries?\n- Which are the 10 most frequent origin-destination country combinations?\n- Are reverse flows (the flow from A to B and the flow from B to A) correlated?\nThe following modeling questions will be answered:\n- How does total number of students from country A to country B depend on the total number of student from A and the total number of students from B?\n- Do adjacent countries attract more or less students than non-adjacent countries?\nIf time permits some visualization questions will be answered:\n- Are there some ways of visualizing mobility data?\n\n\n10 Exploration and preparation\nFirst we explore the data:\n\nerasmus |> names()\n\n [1] \"project_reference\"                   \"academic_year\"                      \n [3] \"mobility_start_month\"                \"mobility_end_month\"                 \n [5] \"mobility_duration\"                   \"activity_mob\"                       \n [7] \"field_of_education\"                  \"participant_nationality\"            \n [9] \"education_level\"                     \"participant_gender\"                 \n[11] \"participant_profile\"                 \"special_needs\"                      \n[13] \"fewer_opportunities\"                 \"group_leader\"                       \n[15] \"participant_age\"                     \"sending_country_code\"               \n[17] \"sending_city\"                        \"sending_organization\"               \n[19] \"sending_organisation_erasmus_code\"   \"receiving_country_code\"             \n[21] \"receiving_city\"                      \"receiving_organization\"             \n[23] \"receiving_organisation_erasmus_code\" \"participants\"                       \n\nerasmus |> glimpse()\n\nRows: 164,635\nColumns: 24\n$ project_reference                   <chr> \"2014-1-AT02-KA347-000139\", \"2014-~\n$ academic_year                       <chr> \"2014-2015\", \"2014-2015\", \"2014-20~\n$ mobility_start_month                <chr> \"2014-11\", \"2014-11\", \"2014-11\", \"~\n$ mobility_end_month                  <chr> \"2014-11\", \"2014-11\", \"2014-11\", \"~\n$ mobility_duration                   <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1~\n$ activity_mob                        <chr> \"National youth meetings\", \"Nation~\n$ field_of_education                  <chr> \"? Unknown ?\", \"? Unknown ?\", \"? U~\n$ participant_nationality             <chr> \"AT\", \"AT\", \"AT\", \"AT\", \"AT\", \"AT\"~\n$ education_level                     <chr> \"??? - ? Unknown ?\", \"??? - ? Unkn~\n$ participant_gender                  <chr> \"Female\", \"Female\", \"Female\", \"Mal~\n$ participant_profile                 <chr> \"Learner\", \"Learner\", \"Learner\", \"~\n$ special_needs                       <chr> \"No\", \"No\", \"No\", \"No\", \"No\", \"No\"~\n$ fewer_opportunities                 <chr> \"Yes\", \"Yes\", \"Yes\", \"Yes\", \"Yes\",~\n$ group_leader                        <chr> \"No\", \"No\", \"No\", \"No\", \"No\", \"No\"~\n$ participant_age                     <dbl> 13, 14, 15, 14, 15, 15, 16, 17, 18~\n$ sending_country_code                <chr> \"AT\", \"AT\", \"AT\", \"AT\", \"AT\", \"AT\"~\n$ sending_city                        <chr> \"Dornbirn\", \"Dornbirn\", \"Dornbirn\"~\n$ sending_organization                <chr> \"bOJA - Bundesweites Netzwerk Offe~\n$ sending_organisation_erasmus_code   <chr> \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\",~\n$ receiving_country_code              <chr> \"AT\", \"AT\", \"AT\", \"AT\", \"AT\", \"AT\"~\n$ receiving_city                      <chr> \"Dornbirn\", \"Dornbirn\", \"Dornbirn\"~\n$ receiving_organization              <chr> \"bOJA - Bundesweites Netzwerk Offe~\n$ receiving_organisation_erasmus_code <chr> \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\",~\n$ participants                        <dbl> 2, 3, 3, 4, 2, 2, 1, 3, 1, 2, 1, 2~\n\nerasmus |> count(participants)\n\n# A tibble: 99 x 2\n   participants      n\n          <dbl>  <int>\n 1            1 118352\n 2            2  22804\n 3            3   8756\n 4            4   4642\n 5            5   2572\n 6            6   1775\n 7            7   1125\n 8            8    874\n 9            9    668\n10           10    502\n# ... with 89 more rows\n\n\nFirst check number of rows\n\nerasmus |> dim()\n\n[1] 164635     24\n\n\nNumber of rows after ‘expansion’. Expansion expands a frequency-weighted datafile to a regular file where each row represents a single student exchange trip.\n\nerasmus |> \n  uncount(participants) |>\n  dim()\n\n[1] 309751     23\n\n\nFrom which countries do participants come?\n\nerasmus |> \n  count(sending_country_code)\n\n# A tibble: 54 x 2\n   sending_country_code     n\n   <chr>                <int>\n 1 AL                     132\n 2 AM                     127\n 3 AT                    3484\n 4 AZ                      54\n 5 BA                      83\n 6 BE                    3279\n 7 BG                    4412\n 8 BY                      69\n 9 CY                    1886\n10 CZ                    6086\n# ... with 44 more rows\n\n\nTo which country do participants go?\n\nerasmus |>\n  count(receiving_country_code)\n\n# A tibble: 34 x 2\n   receiving_country_code     n\n   <chr>                  <int>\n 1 AT                      3451\n 2 BE                      4008\n 3 BG                      4120\n 4 CY                      1981\n 5 CZ                      6107\n 6 DE                     17000\n 7 DK                      1484\n 8 EE                      3637\n 9 EL                      2042\n10 ES                     11188\n# ... with 24 more rows\n\n\nAdd names to the codes. There are several options to do this. - Option 1: Explicit in-script recoding\n\nerasmus |>\n  mutate(sending_country_name =\n           case_when(sending_country_code == \"AT\" ~ \"Austria\",\n                     sending_country_code == \"BE\" ~ \"Belgium\",\n                     sending_country_code == \"BG\" ~ \"Bulgaria\",\n                     sending_country_code == \"CY\" ~ \"Cyprus\",\n                     sending_country_code == \"CZ\" ~ \"Czechia\",\n                     sending_country_code == \"DE\" ~ \"Germany\",\n                     sending_country_code == \"DK\" ~ \"Denkmark\"\n                     # .........\n           )) |>\n  count(sending_country_name)\n\n# A tibble: 8 x 2\n  sending_country_name      n\n  <chr>                 <int>\n1 Austria                3484\n2 Belgium                3279\n3 Bulgaria               4412\n4 Cyprus                 1886\n5 Czechia                6086\n6 Denkmark               1426\n7 Germany               17155\n8 <NA>                 126907\n\n\n\nOption 2: Join with look-up table in a separate CSV file\n\n\ncountry_labels <- read_csv(here(\"C:/Users/Gebruiker/Desktop/TidyTuesday/TT_20221115/country_names.csv\"))\n\nRows: 37 Columns: 3\n-- Column specification --------------------------------------------------------\nDelimiter: \",\"\nchr (3): country_name, country_code, country_status\n\ni Use `spec()` to retrieve the full column specification for this data.\ni Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\n\nerasmus |>\n  left_join(country_labels, \n            by=c(\"receiving_country_code\" = \"country_code\")) |>\n  rename(receiving_country_name = country_name,\n         receiving_country_status = country_status)\n\n# A tibble: 164,635 x 26\n   project_ref~1 acade~2 mobil~3 mobil~4 mobil~5 activ~6 field~7 parti~8 educa~9\n   <chr>         <chr>   <chr>   <chr>     <dbl> <chr>   <chr>   <chr>   <chr>  \n 1 2014-1-AT02-~ 2014-2~ 2014-11 2014-11       1 Nation~ ? Unkn~ AT      ??? - ~\n 2 2014-1-AT02-~ 2014-2~ 2014-11 2014-11       1 Nation~ ? Unkn~ AT      ??? - ~\n 3 2014-1-AT02-~ 2014-2~ 2014-11 2014-11       1 Nation~ ? Unkn~ AT      ??? - ~\n 4 2014-1-AT02-~ 2014-2~ 2014-11 2014-11       1 Nation~ ? Unkn~ AT      ??? - ~\n 5 2014-1-AT02-~ 2014-2~ 2014-11 2014-11       1 Nation~ ? Unkn~ AT      ??? - ~\n 6 2014-1-AT02-~ 2014-2~ 2014-12 2014-12       1 Nation~ ? Unkn~ AT      ??? - ~\n 7 2014-1-AT02-~ 2014-2~ 2014-12 2014-12       1 Nation~ ? Unkn~ AT      ??? - ~\n 8 2014-1-AT02-~ 2014-2~ 2014-12 2014-12       1 Nation~ ? Unkn~ AT      ??? - ~\n 9 2014-1-AT02-~ 2014-2~ 2014-12 2014-12       1 Nation~ ? Unkn~ AT      ??? - ~\n10 2014-1-AT02-~ 2014-2~ 2014-12 2014-12       1 Nation~ ? Unkn~ AT      ??? - ~\n# ... with 164,625 more rows, 17 more variables: participant_gender <chr>,\n#   participant_profile <chr>, special_needs <chr>, fewer_opportunities <chr>,\n#   group_leader <chr>, participant_age <dbl>, sending_country_code <chr>,\n#   sending_city <chr>, sending_organization <chr>,\n#   sending_organisation_erasmus_code <chr>, receiving_country_code <chr>,\n#   receiving_city <chr>, receiving_organization <chr>,\n#   receiving_organisation_erasmus_code <chr>, participants <dbl>, ...\n\n\nCombining some of the above transformations we created a clean file\n\nlabeled_erasmus_full <- \n  erasmus |>\n  # Keep only a subset of columns/variables\n  select(sending_country_code, receiving_country_code, \n         participant_gender, academic_year, activity_mob, participants) |>\n  # insert names of receiving countries by linking to country codes\n  left_join(country_labels, \n            by=c(\"receiving_country_code\" = \"country_code\")) |>\n  # make sure the column names are clear \n  rename(receiving_country_name = country_name,\n         receiving_country_status = country_status) |> \n  # insert names of sending countries by linking to country codes\n  left_join(country_labels, \n            by=c(\"sending_country_code\" = \"country_code\")) |>\n  # make sure the column names are clear \n  rename(sending_country_name = country_name,\n         sending_country_status = country_status) |> \n  # exclude countries outside EU and with no affiliation to EU\n  filter(sending_country_status %in% c(\"EU\", \"EFTA\", \"UK\", \"Candidate\"),\n         receiving_country_status %in% c(\"EU\", \"EFTA\", \"UK\", \"Candidate\")) |>\n  # exclude the (many!) within-country exchanges\n  filter(sending_country_code != receiving_country_code) |>\n  # Only international mobility program\n  filter(activity_mob == \"Transnational youth meetings\") |>\n  # Every row becomes an individual international student trip \n  uncount(participants) \n\n\n\n11 Descriptive questions\nHow many students are there?\n\nlabeled_erasmus_full |>\n  dim()\n\n[1] 15693     9\n\n\nWhere did they come from?\n\nlabeled_erasmus_full |> \n  count(sending_country_name) |>\n  print(n=Inf)\n\n# A tibble: 36 x 2\n   sending_country_name     n\n   <chr>                <int>\n 1 Albania                169\n 2 Austria                565\n 3 Belgium                662\n 4 Bulgaria               526\n 5 Croatia                323\n 6 Cyprus                 121\n 7 Czechia                531\n 8 Denmark                296\n 9 Estonia                292\n10 Finland                307\n11 France                 622\n12 Germany               1314\n13 Greece                 483\n14 Hungary                473\n15 Iceland                 25\n16 Ireland                225\n17 Italy                 1098\n18 Latvia                 386\n19 Liechtenstein            6\n20 Lithuania              411\n21 Luxembourg             166\n22 Malta                   58\n23 Montenegro              27\n24 Netherlands            630\n25 North Macedonia        185\n26 Norway                 133\n27 Poland                 837\n28 Portugal               468\n29 Romania                745\n30 Serbia                 343\n31 Slovakia               370\n32 Slovenia               268\n33 Spain                  819\n34 Sweden                 495\n35 Turkey                 553\n36 United Kingdom         761\n\n\nVisualization as a bar graph\n\nlabeled_erasmus_full |> \n  count(sending_country_name) |>  \n  ggplot() + \n  geom_col(aes(x=sending_country_name, y=n))\n\n\n\n\nWhere do students come from, horizontal\n\n\n\n\nWith vertical labels labels\n\nlabeled_erasmus_full |> \n  count(sending_country_name) |>  \n  ggplot() + \n  geom_col(aes(x=sending_country_name, y=n)) +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))\n\n\n\n\nWhere do students come from, vertical\n\n\n\n\nOrder by frequency.\n\nlabeled_erasmus_full |> \n  count(sending_country_code) |>  \n  arrange(-n) |>\n    # Converting character variable to factor variable\n    mutate(sending_country_code=factor(sending_country_code,\n                                     levels = unique(sending_country_code),\n                                     ordered = T)) |>\n  ggplot() + \n  geom_col(aes(x=sending_country_code, y=n)) +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))\n\n\n\n\nWhere do students come from, ordered\n\n\n\n\nWhere did they go to?\n\nlabeled_erasmus_full |> \n  count(receiving_country_name) |>\n  arrange(-n) |>\n  print(n=Inf)\n\n# A tibble: 31 x 2\n   receiving_country_name     n\n   <chr>                  <int>\n 1 France                  2403\n 2 Belgium                 1428\n 3 Spain                   1204\n 4 Germany                 1095\n 5 Italy                   1017\n 6 Netherlands              765\n 7 Luxembourg               607\n 8 Estonia                  524\n 9 Czechia                  518\n10 Lithuania                495\n11 Austria                  485\n12 United Kingdom           483\n13 Greece                   444\n14 Romania                  423\n15 Turkey                   371\n16 Slovenia                 355\n17 Croatia                  343\n18 Denmark                  340\n19 Poland                   340\n20 Portugal                 296\n21 Norway                   286\n22 Sweden                   250\n23 Cyprus                   214\n24 Ireland                  186\n25 Latvia                   165\n26 Malta                    163\n27 Bulgaria                 149\n28 Hungary                  116\n29 North Macedonia          111\n30 Slovakia                  67\n31 Finland                   50\n\n\n\nlabeled_erasmus_full |> \n  count(receiving_country_name) |>\n  arrange(-n) |>\n  print(n=Inf)\n\n# A tibble: 31 x 2\n   receiving_country_name     n\n   <chr>                  <int>\n 1 France                  2403\n 2 Belgium                 1428\n 3 Spain                   1204\n 4 Germany                 1095\n 5 Italy                   1017\n 6 Netherlands              765\n 7 Luxembourg               607\n 8 Estonia                  524\n 9 Czechia                  518\n10 Lithuania                495\n11 Austria                  485\n12 United Kingdom           483\n13 Greece                   444\n14 Romania                  423\n15 Turkey                   371\n16 Slovenia                 355\n17 Croatia                  343\n18 Denmark                  340\n19 Poland                   340\n20 Portugal                 296\n21 Norway                   286\n22 Sweden                   250\n23 Cyprus                   214\n24 Ireland                  186\n25 Latvia                   165\n26 Malta                    163\n27 Bulgaria                 149\n28 Hungary                  116\n29 North Macedonia          111\n30 Slovakia                  67\n31 Finland                   50\n\n\nLet us visualise this also, vertical and ordered.\n\nlabeled_erasmus_full |> \n  count(receiving_country_code) |>  \n  arrange(-n) |>\n  mutate(receiving_country_code=factor(receiving_country_code,\n                                       levels = unique(receiving_country_code),\n                                       ordered = T)) |>\n  ggplot() + \n  geom_col(aes(x=receiving_country_code, y=n)) +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))\n\n\n\n\nHow many students do countries receive, ordered\n\n\n\n\nTop 10 Where did they go to.\n\nlabeled_erasmus_full |> \n  count(receiving_country_name) |>\n  arrange(-n) |> \n  head(n=10)\n\n# A tibble: 10 x 2\n   receiving_country_name     n\n   <chr>                  <int>\n 1 France                  2403\n 2 Belgium                 1428\n 3 Spain                   1204\n 4 Germany                 1095\n 5 Italy                   1017\n 6 Netherlands              765\n 7 Luxembourg               607\n 8 Estonia                  524\n 9 Czechia                  518\n10 Lithuania                495\n\n\nTop 10 Where did they come from\n\nlabeled_erasmus_full |> \n  count(sending_country_name) |>\n  arrange(-n) |> \n  head(n=10)\n\n# A tibble: 10 x 2\n   sending_country_name     n\n   <chr>                <int>\n 1 Germany               1314\n 2 Italy                 1098\n 3 Poland                 837\n 4 Spain                  819\n 5 United Kingdom         761\n 6 Romania                745\n 7 Belgium                662\n 8 Netherlands            630\n 9 France                 622\n10 Austria                565\n\n\nTop 10 origin-destination combinations\n\nlabeled_erasmus_full |> \n  count(sending_country_name, receiving_country_name) |>\n  arrange(-n) |> \n  head(n=10)\n\n# A tibble: 10 x 3\n   sending_country_name receiving_country_name     n\n   <chr>                <chr>                  <int>\n 1 Germany              France                   305\n 2 Italy                France                   268\n 3 Germany              Belgium                  235\n 4 Belgium              France                   198\n 5 Italy                Spain                    170\n 6 Spain                France                   149\n 7 United Kingdom       France                   131\n 8 Spain                Italy                    123\n 9 Poland               France                   122\n10 France               Belgium                  120\n\n\n# Intermezzo \n(Cartesian product = cross-product = all combinations) \n\nTiny dataset of team members\n\n::: {.cell}\n\n```{.r .cell-code}\nteam_members <- tibble(name = c( \"Alex\", \"Asier\", \"Franziska\", \"Sam\", \"Wim\")) \n# Tiny datset of available days\nsessions <- tibble(day = c(\"Monday\", \"Tuesday\", \"Thursday\"))\n:::\nMake all combinations of team members and available days\n\nfull_join(team_members, sessions, by = as.character())\n\nWarning: Using `by = character()` to perform a cross join was deprecated in dplyr 1.1.0.\ni Please use `cross_join()` instead.\n\n\n# A tibble: 15 x 2\n   name      day     \n   <chr>     <chr>   \n 1 Alex      Monday  \n 2 Alex      Tuesday \n 3 Alex      Thursday\n 4 Asier     Monday  \n 5 Asier     Tuesday \n 6 Asier     Thursday\n 7 Franziska Monday  \n 8 Franziska Tuesday \n 9 Franziska Thursday\n10 Sam       Monday  \n11 Sam       Tuesday \n12 Sam       Thursday\n13 Wim       Monday  \n14 Wim       Tuesday \n15 Wim       Thursday\n\n\nSame results, but more transparent code.\n\n\nthanks to Nick van Doormaal for this suggestion\n\nexpand_grid(team_members, sessions)\n\n# A tibble: 15 x 2\n   name      day     \n   <chr>     <chr>   \n 1 Alex      Monday  \n 2 Alex      Tuesday \n 3 Alex      Thursday\n 4 Asier     Monday  \n 5 Asier     Tuesday \n 6 Asier     Thursday\n 7 Franziska Monday  \n 8 Franziska Tuesday \n 9 Franziska Thursday\n10 Sam       Monday  \n11 Sam       Tuesday \n12 Sam       Thursday\n13 Wim       Monday  \n14 Wim       Tuesday \n15 Wim       Thursday\n\nfull_join(team_members, team_members, by = as.character()) |>\n  filter(name.x != name.y)\n\n# A tibble: 20 x 2\n   name.x    name.y   \n   <chr>     <chr>    \n 1 Alex      Asier    \n 2 Alex      Franziska\n 3 Alex      Sam      \n 4 Alex      Wim      \n 5 Asier     Alex     \n 6 Asier     Franziska\n 7 Asier     Sam      \n 8 Asier     Wim      \n 9 Franziska Alex     \n10 Franziska Asier    \n11 Franziska Sam      \n12 Franziska Wim      \n13 Sam       Alex     \n14 Sam       Asier    \n15 Sam       Franziska\n16 Sam       Wim      \n17 Wim       Alex     \n18 Wim       Asier    \n19 Wim       Franziska\n20 Wim       Sam      \n\n\n\nCreate all possible combinations of sending and receiving country names.\n\n::: {.cell}\n\n```{.r .cell-code}\npossible_mobility_names <- \n  full_join(country_labels, country_labels,\n            by = as.character()) |>\n  select(sending_country_name   = country_name.x,\n         receiving_country_name = country_name.y,\n         sending_country_code   = country_code.x,\n         receiving_country_code = country_code.y) |>\n  filter(sending_country_name != receiving_country_name)\n:::\nErasmus student mobility flows including zero flows\n\nflows_erasmus_full_zeros <-\n  labeled_erasmus_full |> \n  group_by(sending_country_name, receiving_country_name) |>\n  # Origin, destination, count\n  count() |>\n  rename(exchanges = n) |>\n  # join with all combinations to include zero-flow pairs\n  right_join(possible_mobility_names) |> \n  # change the NAs (= zero-flow) into 0\n  replace_na(list(exchanges=0))\n\nJoining with `by = join_by(sending_country_name, receiving_country_name)`\n\n\nNumber of exchanges frequencies reversed: 581 zero flows, 37 1-person flow\n\nflows_erasmus_full_zeros |>\n  ungroup() |>\n  count(exchanges) |>\n  arrange(exchanges) |>\n  print(n=40)\n\n# A tibble: 98 x 2\n   exchanges     n\n       <int> <int>\n 1         0   581\n 2         1    37\n 3         2    37\n 4         3    48\n 5         4    35\n 6         5    42\n 7         6    30\n 8         7    32\n 9         8    29\n10         9    19\n11        10    28\n12        11    20\n13        12    27\n14        13    14\n15        14    18\n16        15    20\n17        16    15\n18        17    15\n19        18    13\n20        19    15\n21        20    16\n22        21    10\n23        22    13\n24        23    14\n25        24     9\n26        25    13\n27        26     7\n28        27     7\n29        28     7\n30        29    13\n31        30     8\n32        31     9\n33        32     4\n34        33     7\n35        34     4\n36        35     4\n37        36     6\n38        37     6\n39        38     4\n40        39     3\n# ... with 58 more rows\n\n\nLet us make a histogram of this distribution\n\nflows_erasmus_full_zeros |>\n  ggplot() +\n  geom_histogram(aes(x=exchanges), binwidth = 5)\n\n\n\n\nHistogram of student mobility flow\n\n\n\n\n\nreverse_flows_erasmus_full_zeros <-\n  flows_erasmus_full_zeros |>\n  rename(sending_country_name = receiving_country_name,\n         receiving_country_name = sending_country_name,\n         reverse_exchanges = exchanges)\n\n\nfull_join(flows_erasmus_full_zeros, reverse_flows_erasmus_full_zeros,\n          by = (c(\"sending_country_name\", \"receiving_country_name\"))) |> \n  ungroup() |>\n  select(exchanges, reverse_exchanges) |>\n  cor() |> \n  as_tibble()\n\n# A tibble: 2 x 2\n  exchanges reverse_exchanges\n      <dbl>             <dbl>\n1     1                 0.463\n2     0.463             1    \n\n\nThis scatterplot is by design symetric in the diagonal\n\nfull_join(flows_erasmus_full_zeros, reverse_flows_erasmus_full_zeros,\n          by = (c(\"sending_country_name\", \"receiving_country_name\"))) |> \n  ungroup() |>\n  select(exchanges, reverse_exchanges) |>\n  ggplot() +\n  geom_point(aes(y=exchanges, x=reverse_exchanges) )\n\n\n\n\nRelation between exchanges\n\n\n\n\n\n\n12 Modeling\nRead the neighbor relations between countries\n\nadjacency <- read_csv(here(\"C:/Users/Gebruiker/Desktop/TidyTuesday/TT_20221115/adjacency.csv\")) |>\n  rename(sending_country_name = country_name,\n         receiving_country_name = neighbor) |>\n  # mark the rows that indicate shared borders\n  mutate(adjacent = 1) |>\n  # merge with the data that include all possible mobility streams\n  right_join(possible_mobility_names,\n             by=c(\"sending_country_name\",\"receiving_country_name\")) |>\n  # Set non-adjacent to 0\n  mutate(adjacent = replace_na(adjacent, 0)) \n\nRows: 120 Columns: 2\n-- Column specification --------------------------------------------------------\nDelimiter: \",\"\nchr (2): country_name, neighbor\n\ni Use `spec()` to retrieve the full column specification for this data.\ni Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\n\nmodel_data <- \n  flows_erasmus_full_zeros |> \n  inner_join(adjacency, \n            by = c(\"sending_country_name\",\"receiving_country_name\")) |>  \n  group_by(sending_country_name) |>\n  # total outflow from country\n  mutate(outflow = sum(exchanges)) |>\n  group_by(receiving_country_name) |>\n  # total inflow into country\n  mutate(inflow = sum(exchanges)) \n\nNumber of student exchanges from A to B as a function of total numbers of outgoing students from A and of total numbers of visiting students in B\n\nmodel_01 <- lm(formula = exchanges ~  inflow + outflow ,          , \n               data = model_data)\ntidy(model_01)\n\n# A tibble: 3 x 5\n  term        estimate std.error statistic   p.value\n  <chr>          <dbl>     <dbl>     <dbl>     <dbl>\n1 (Intercept) -12.2      0.942       -13.0 2.49e- 36\n2 inflow        0.0281   0.00100      27.9 1.63e-135\n3 outflow       0.0285   0.00161      17.7 2.55e- 63\n\nglance(model_01)\n\n# A tibble: 1 x 12\n  r.squared adj.r.s~1 sigma stati~2   p.value    df logLik    AIC    BIC devia~3\n      <dbl>     <dbl> <dbl>   <dbl>     <dbl> <dbl>  <dbl>  <dbl>  <dbl>   <dbl>\n1     0.448     0.447  17.5    539. 2.98e-172     2 -5703. 11415. 11436. 408538.\n# ... with 2 more variables: df.residual <int>, nobs <int>, and abbreviated\n#   variable names 1: adj.r.squared, 2: statistic, 3: deviance\n\n\nAdd adjacency\n\nmodel_02 <- lm(formula = exchanges ~  inflow + outflow + adjacent, \n               data = model_data)\ntidy(model_02)\n\n# A tibble: 4 x 5\n  term        estimate std.error statistic   p.value\n  <chr>          <dbl>     <dbl>     <dbl>     <dbl>\n1 (Intercept) -12.9     0.881        -14.7 2.03e- 45\n2 inflow        0.0274  0.000939      29.1 1.27e-144\n3 outflow       0.0265  0.00151       17.5 3.93e- 62\n4 adjacent     23.0     1.64          14.0 9.76e- 42\n\nglance(model_02)\n\n# A tibble: 1 x 12\n  r.squared adj.r.s~1 sigma stati~2   p.value    df logLik    AIC    BIC devia~3\n      <dbl>     <dbl> <dbl>   <dbl>     <dbl> <dbl>  <dbl>  <dbl>  <dbl>   <dbl>\n1     0.519     0.518  16.4    478. 1.36e-210     3 -5612. 11233. 11259. 355879.\n# ... with 2 more variables: df.residual <int>, nobs <int>, and abbreviated\n#   variable names 1: adj.r.squared, 2: statistic, 3: deviance\n\n\nStudents appear to fancy visiting nearby countries abroad!\n\n\n13 Visualization\nVisualization 1: Chord diagram (using library circlize)\nFull country names\n\nflows_erasmus_full_zeros |> \n  filter(exchanges > 0) |>\n  arrange(-exchanges) |> \n  chordDiagram()\n\n\n\n\nChord diagram\n\n\n\n\nUse the 2-letter abbreviations of countries here.\n\nflows_erasmus_full_zeros |> \n  filter(exchanges > 0) |>\n  arrange(-exchanges) |> \n  # without ungroup() the .._country_name columns will\n  # be retained\n  ungroup() |>\n  select(sending_country_code, receiving_country_code,\n         exchanges) |>\n  chordDiagram()\n\n\n\n\nChord diagram with 2-letter abbreviations\n\n\n\n\nOnly flows over 100\n\nflows_erasmus_full_zeros |> \n  filter(exchanges > 100) |>\n  arrange(-exchanges) |> \n  ungroup() |>\n  select(sending_country_code, receiving_country_code,\n         exchanges) |>\n  chordDiagram()\n\n\n\n\nChord diagram with only flows over 100\n\n\n\n\nVisulaization 2: Network representation We can also represent the countries as nodes in a network, with the student flows representing the links between them. Use package igraph here.\n\nflows_erasmus_full_zeros |>\n  filter(exchanges > 100) |>\n  graph_from_data_frame(directed = TRUE, \n                      vertices=country_labels) |>\n  plot(vertex.size=5)\n\n\n\n\nNetwork representation\n\n\n\n\nNo isolates\n\nflows_erasmus_full_zeros |>\n  filter(exchanges > 75) |>\n  graph_from_data_frame(directed = TRUE) |>\n  plot(vertex.size=5)\nflows_erasmus_full_zeros |>\n  filter(exchanges > 100) |>\n  graph_from_data_frame(directed = TRUE) |>\n  plot(vertex.size=5)\n\n\n\n\n\n\nNo isolates\n\n\n\n\n\n\n\nNo isolates\n\n\n\n\n\n\nFor alternative methods of visualizing mobility while maintaining the geographic relations, see Andrew Wheeler’s 2015 paper in Cartography and Geographic Information Science, at (behind paywall), here"
  },
  {
    "objectID": "08_TT_202205.html",
    "href": "08_TT_202205.html",
    "title": "7  Revenue and expenditure in sport",
    "section": "",
    "text": "8 Visualizations\nPlot measures per sport\nPlot measures per sport (y axis)\nPlot measures per sport (y axis ordered infrequent).\nPlot measures per sport (y)\nPlot measures per sport (y)\nPlot measures per sport (per year)\nOr activate scientific notation\nSolution change to stat = “identity” in geom_bar()\nOrdering bars now\nBars reordered.\nPlot mean revenues per sport and sex.\nGrid plot\nCorrelation between Expenditures and Revenues\nCorrelation between exp. and rev. per sport.\nPlot association"
  },
  {
    "objectID": "08_TT_202205.html#introduction",
    "href": "08_TT_202205.html#introduction",
    "title": "7  Revenue and expenditure in sport",
    "section": "7.1 Introduction",
    "text": "7.1 Introduction\nThe dataset for this Tidy Tuesday is about Collegiate Sports in US. Alex Trinidad explores how revenue and expenditure are distributed in sports. He also looks at the differences in sport revenues and expenditures between men and women.`He presented this on May 3th 2022 in the NSC-R Tidy Tuesday serie. Here you can find the original post."
  },
  {
    "objectID": "08_TT_202205.html#load-packages-and-importing-data",
    "href": "08_TT_202205.html#load-packages-and-importing-data",
    "title": "7  Revenue and expenditure in sport",
    "section": "7.2 Load packages and importing data",
    "text": "7.2 Load packages and importing data\n\nlibrary(tidytuesdayR)\nlibrary(tidyverse)\n\nIdentify TidyTuesday data sets in 2022.\n\ntidytuesdayR::tt_datasets(\"2022\")\n\n   Week       Date                                   Data\n1     1 2022-01-04         Bring your own data from 2022!\n2     2 2022-01-11                      Bee Colony losses\n3     3 2022-01-18                  Chocolate Bar ratings\n4     4 2022-01-25                            Board games\n5     5 2022-02-01                             Dog breeds\n6     6 2022-02-08                        Tuskegee Airmen\n7     7 2022-02-15                   #DuBoisChallenge2022\n8     8 2022-02-22                    World Freedom index\n9     9 2022-03-01              Alternative Fuel Stations\n10   10 2022-03-08               Erasmus student mobility\n11   11 2022-03-15                    CRAN/BIOC Vignettes\n12   12 2022-03-22                             Baby names\n13   13 2022-03-29              Collegiate Sports Budgets\n14   14 2022-04-05                   Digital Publications\n15   15 2022-04-12                   Indoor Air Pollution\n16   16 2022-04-19            Crossword Puzzles and Clues\n17   17 2022-04-26                     Kaggle Hidden Gems\n18   18 2022-05-03                   Solar/Wind utilities\n19   19 2022-05-10                   NYTimes best sellers\n20   20 2022-05-17                             Eurovision\n21   21 2022-05-24                          Women's Rugby\n22   22 2022-05-31                Company reputation poll\n23   23 2022-06-07 Pride Corporate Accountability Project\n24   24 2022-06-14                             US Drought\n25   25 2022-06-21                             Juneteenth\n26   26 2022-06-28                      UK Gender pay gap\n27   27 2022-07-05                  San Francisco Rentals\n28   28 2022-07-12                       European flights\n29   29 2022-07-19                    Technology Adoption\n30   30 2022-07-26                    Bring your own data\n31   31 2022-08-02                    Oregon Spotted Frog\n32   32 2022-08-09                          Ferris Wheels\n33   33 2022-08-16              Open Source Psychometrics\n34   34 2022-08-23                           CHIP dataset\n35   35 2022-08-30                            Pell Grants\n36   36 2022-09-06                          LEGO database\n37   37 2022-09-13                                Bigfoot\n38   38 2022-09-20                Hydro Wastewater plants\n39   39 2022-09-27                     Artists in the USA\n40   40 2022-10-04                  Product Hunt products\n41   41 2022-10-11                           Ravelry data\n42   42 2022-10-18               Stranger things dialogue\n43   43 2022-10-25                  Great British Bakeoff\n44   44 2022-11-01                          Horror Movies\n45   45 2022-11-08                         Radio Stations\n46   46 2022-11-15                       Web page metrics\n47   47 2022-11-22                             UK Museums\n48   48 2022-11-29                         FIFA World Cup\n49   49 2022-12-06                              Elevators\n50   50 2022-12-13             Monthly State Retail Sales\n51   51 2022-12-20              Weather Forecast Accuracy\n52   52 2022-12-27                    Star Trek Timelines\n                                              Source\n1                                                   \n2                                               USDA\n3                                   Flavors of Cacao\n4                                             Kaggle\n5                               American Kennel Club\n6  Commemorative Airforce (CAF) by way of the VA-TUG\n7                                     Anthony Starks\n8                               UN and Freedom House\n9                                             US DOT\n10                                    Data.Europa.eu\n11                              Robert Flight GitHub\n12                       US babynames &  nzbabynames\n13                 Equity in Athletics Data Analysis\n14                                     Project Oasis\n15                                OurWorldInData.org\n16                             Cryptics.georgeho.org\n17                                            Kaggle\n18                                      Berkeley Lab\n19                                       Post45 Data\n20                                        Eurovision\n21                       Women's Rugby - ScrumQueens\n22                             Axios and Harris Poll\n23                                 Data For Progress\n24                                       Drought.gov\n25                WEB DuBois style by Anthony Starks\n26                     gender-pay-gap.service.gov.uk\n27                                   Kate Pennington\n28                                       Eurocontrol\n29                                     data.nber.org\n30                                              None\n31                        usgs.gov spotted frog data\n32                                      ferriswheels\n33                 Open-Source Psychometrics Project\n34                                      CHIP Dataset\n35                              US Dept of Education\n36                                       rebrickable\n37                                        Data.World\n38                                Macedo et al, 2022\n39                                          arts.gov\n40                                    components.one\n41                                       ravelry.com\n42                                         8flix.com\n43                                       bakeoff pkg\n44                                The Movie Database\n45                                         Wikipedia\n46                                   httpArchive.org\n47                  MuseWeb by way of Data Is Plural\n48                             Kaggle FIFA World Cup\n49                                    Elevators data\n50      US Census Bureau Monthly State Retails Sales\n51                Weather Forecast  Capstone Project\n52                                     rtrek package\n                                                         Article\n1                                                               \n2                                                   Bee Informed\n3                                       Will Canniford on Kaggle\n4                                                Alyssa Goldberg\n5                                                            Vox\n6               Wikipedia & Air Force Historical Research Agency\n7                                             Nightingale by DVS\n8                                                  Freedom House\n9                                                            EIA\n10                                                      Wimdu.co\n11                                          Robert Flight GitHub\n12                            Emily Kothe's nzbabynames vignette\n13                                                           NPR\n14                                          Project Oasis Report\n15                                            OurWorldInData.org\n16                                          Towards Data Science\n17                                Kaggle - Notebooks of the Week\n18                                           Berkeley Lab report\n19        Finding Trends in NY Times Best Sellers - Kailey Smith\n20                                                 Tanya Shapiro\n21                                                   ScrumQueens\n22                                               The Harris Poll\n23                                             Data For Progress\n24                                            Drought.gov report\n25                        Isabella Benabaye's blog on Juneteenth\n26                                                    ons.gov.uk\n27                                               Matrix-Berkeley\n28                                                  ec.europa.eu\n29                                                 www.cgdev.org\n30                                                          None\n31                                 usgs.gov spotted-frog-article\n32                                                  ferriswheels\n33                                         Character Personality\n34                                                   arxiv paper\n35                                                pell R package\n36                                                   rebrickable\n37                                               Finding Bigfoot\n38                                               HydroWASTE v1.0\n39                                      Artists in the Workforce\n40                 The Gamer and the Nihilist by Andrew Thompson\n41                                           {ravelRy} R package\n42                               freeCodeCamp & 'stringr things'\n43 Data Visualization in the Tidyverse - The Great Tidy Plot Off\n44                                 Tanya Shapiro's Horror Movies\n45                         Visualizing the Geography of FM Radio\n46                                  DataWrapper & Data is Plural\n47                                          MuseWeb Key Findings\n48                                             Dataset Notebooks\n49                           Elevators data package and examples\n50               Interactive Visualization from US Census Bureau\n51                            Weather Forecast  Capstone Project\n52                                                 rtrek package\n\n\nDownload data set. Note: As list.\n\nttdata <- tidytuesdayR::tt_load(x = 2022, week = 13)\n\n\n    Downloading file 1 of 1: `sports.csv`\n\n\nSelect data set of interest.\n\nsportdt <- ttdata[[1]]\n\nAlternative\nsportdt <- ttdata$sports"
  },
  {
    "objectID": "08_TT_202205.html#data-exploration",
    "href": "08_TT_202205.html#data-exploration",
    "title": "7  Revenue and expenditure in sport",
    "section": "7.3 Data Exploration",
    "text": "7.3 Data Exploration\nExplore data set\n\nglimpse(sportdt)\n\nRows: 132,327\nColumns: 28\n$ year                 <dbl> 2015, 2015, 2015, 2015, 2015, 2015, 2015, 2015, 2~\n$ unitid               <dbl> 100654, 100654, 100654, 100654, 100654, 100654, 1~\n$ institution_name     <chr> \"Alabama A & M University\", \"Alabama A & M Univer~\n$ city_txt             <chr> \"Normal\", \"Normal\", \"Normal\", \"Normal\", \"Normal\",~\n$ state_cd             <chr> \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"AL\", \"~\n$ zip_text             <chr> \"35762\", \"35762\", \"35762\", \"35762\", \"35762\", \"357~\n$ classification_code  <dbl> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1~\n$ classification_name  <chr> \"NCAA Division I-FCS\", \"NCAA Division I-FCS\", \"NC~\n$ classification_other <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N~\n$ ef_male_count        <dbl> 1923, 1923, 1923, 1923, 1923, 1923, 1923, 1923, 1~\n$ ef_female_count      <dbl> 2300, 2300, 2300, 2300, 2300, 2300, 2300, 2300, 2~\n$ ef_total_count       <dbl> 4223, 4223, 4223, 4223, 4223, 4223, 4223, 4223, 4~\n$ sector_cd            <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1~\n$ sector_name          <chr> \"Public, 4-year or above\", \"Public, 4-year or abo~\n$ sportscode           <dbl> 1, 2, 3, 7, 8, 15, 16, 22, 26, 33, 1, 2, 3, 8, 12~\n$ partic_men           <dbl> 31, 19, 61, 99, 9, NA, NA, 7, NA, NA, 32, 13, NA,~\n$ partic_women         <dbl> NA, 16, 46, NA, NA, 21, 25, 10, 16, 9, NA, 20, 68~\n$ partic_coed_men      <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N~\n$ partic_coed_women    <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N~\n$ sum_partic_men       <dbl> 31, 19, 61, 99, 9, 0, 0, 7, 0, 0, 32, 13, 0, 10, ~\n$ sum_partic_women     <dbl> 0, 16, 46, 0, 0, 21, 25, 10, 16, 9, 0, 20, 68, 7,~\n$ rev_men              <dbl> 345592, 1211095, 183333, 2808949, 78270, NA, NA, ~\n$ rev_women            <dbl> NA, 748833, 315574, NA, NA, 410717, 298164, 13114~\n$ total_rev_menwomen   <dbl> 345592, 1959928, 498907, 2808949, 78270, 410717, ~\n$ exp_men              <dbl> 397818, 817868, 246949, 3059353, 83913, NA, NA, 9~\n$ exp_women            <dbl> NA, 742460, 251184, NA, NA, 432648, 340259, 11388~\n$ total_exp_menwomen   <dbl> 397818, 1560328, 498133, 3059353, 83913, 432648, ~\n$ sports               <chr> \"Baseball\", \"Basketball\", \"All Track Combined\", \"~\n\n\nSelect variables of interest and define chr-variables as fct\n\nttdt_selection <- sportdt %>% \n  dplyr::select(year, institution_name, classification_name, partic_men, partic_women,\n         ef_male_count, ef_female_count, ef_total_count, rev_men,\n         rev_women,total_rev_menwomen, exp_men, exp_women,\n         total_exp_menwomen, sports) %>% \n  mutate(year = as.factor(year),\n         institution_name = as.factor(institution_name),\n         classification_name = as.factor(classification_name),\n         sports = as.factor(sports),\n         total_par = partic_men + partic_women) \n\nNow we can answer some questions:\nHow many years?\n\nsum(table(unique(ttdt_selection$year)))\n\n[1] 5\n\n\nOr:\n\nsum(table(fct_unique(ttdt_selection$year)))\n\n[1] 5\n\n\nHow many divisions?\n\nsum(table(unique(ttdt_selection$classification_name)))\n\n[1] 19\n\n\nHow may institutions?\n\nsum(table(unique(ttdt_selection$institution_name)))\n\n[1] 2212\n\n\nHow many sports?\n\nsum(table(unique(ttdt_selection$sports)))\n\n[1] 38\n\n\nHow many cases per wave?\n\nttdt_selection %>% \n  count(year)\n\n# A tibble: 5 x 2\n  year      n\n  <fct> <int>\n1 2015  17345\n2 2016  17414\n3 2017  17628\n4 2018  17772\n5 2019  62168\n\n\nHow many cases per sport?\n\nttdt_selection %>% \n  count(sports)\n\n# A tibble: 38 x 2\n   sports                 n\n   <fct>              <int>\n 1 All Track Combined  4870\n 2 Archery             1557\n 3 Badminton           1554\n 4 Baseball            8644\n 5 Basketball         10000\n 6 Beach Volleyball    1988\n 7 Bowling             2176\n 8 Diving              1530\n 9 Equestrian          1799\n10 Fencing             1687\n# ... with 28 more rows"
  },
  {
    "objectID": "08_TT_202205.html#missing-data",
    "href": "08_TT_202205.html#missing-data",
    "title": "7  Revenue and expenditure in sport",
    "section": "8.1 Missing data",
    "text": "8.1 Missing data\nIs any NA in any of my variables?\n\nsummary(ttdt_selection)\n\n   year                  institution_name \n 2015:17345   Westminster College:   238  \n 2016:17414   Union College      :   233  \n 2017:17628   Columbia College   :   187  \n 2018:17772   Bethel University  :   181  \n 2019:62168   Marian University  :   166  \n              Emmanuel College   :   162  \n              (Other)            :131160  \n                         classification_name   partic_men      partic_women   \n NCAA Division III with football   :18835    Min.   :  1.00   Min.   :  1.00  \n NCAA Division III without football:12310    1st Qu.: 13.00   1st Qu.: 11.00  \n NJCAA Division I                  :11831    Median : 22.00   Median : 16.00  \n NCAA Division II with football    :11535    Mean   : 30.86   Mean   : 20.71  \n NCAA Division I-FBS               :10052    3rd Qu.: 35.00   3rd Qu.: 23.00  \n NCAA Division II without football : 9571    Max.   :331.00   Max.   :327.00  \n (Other)                           :58193    NA's   :70462    NA's   :63442   \n ef_male_count   ef_female_count ef_total_count     rev_men         \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :       65  \n 1st Qu.:  513   1st Qu.:  652   1st Qu.: 1194   1st Qu.:    63428  \n Median :  986   Median : 1248   Median : 2259   Median :   158126  \n Mean   : 2126   Mean   : 2496   Mean   : 4622   Mean   :   809011  \n 3rd Qu.: 2385   3rd Qu.: 2860   3rd Qu.: 5237   3rd Qu.:   400604  \n Max.   :35954   Max.   :30325   Max.   :66279   Max.   :156147208  \n                                                 NA's   :70462      \n   rev_women        total_rev_menwomen     exp_men           exp_women      \n Min.   :       0   Min.   :      130   Min.   :      65   Min.   :     65  \n 1st Qu.:   58746   1st Qu.:    96299   1st Qu.:   63062   1st Qu.:  59301  \n Median :  138318   Median :   228776   Median :  159666   Median : 141800  \n Mean   :  279346   Mean   :   795231   Mean   :  662386   Mean   : 331594  \n 3rd Qu.:  331120   3rd Qu.:   541876   3rd Qu.:  424025   3rd Qu.: 361860  \n Max.   :21440365   Max.   :156147208   Max.   :69718059   Max.   :9485162  \n NA's   :63444      NA's   :45193       NA's   :70462      NA's   :63442    \n total_exp_menwomen        sports        total_par     \n Min.   :     130   Basketball:10000   Min.   :  2.00  \n 1st Qu.:   96436   Volleyball: 9122   1st Qu.: 22.00  \n Median :  234559   Soccer    : 8647   Median : 32.00  \n Mean   :  732422   Baseball  : 8644   Mean   : 45.66  \n 3rd Qu.:  585604   Softball  : 8560   3rd Qu.: 53.00  \n Max.   :69718059   Golf      : 7060   Max.   :617.00  \n NA's   :45191      (Other)   :80294   NA's   :88713   \n\n\nRemove NAs from revenues in men and women.\n\nmyselection <- ttdt_selection %>% \n  filter(!rev_men %in% NA & !rev_women %in% NA)\n\nCheck if NA’s in myselection dataset.\n\nsummary(myselection)\n\n   year                 institution_name\n 2015:8559   Westminster College:  103  \n 2016:8628   Bethel University  :   84  \n 2017:8767   Union College      :   84  \n 2018:8880   Emmanuel College   :   79  \n 2019:8780   Harvard University :   75  \n             Marian University  :   73  \n             (Other)            :43116  \n                         classification_name   partic_men      partic_women   \n NCAA Division III with football   : 8268    Min.   :  1.00   Min.   :  1.00  \n NCAA Division III without football: 5186    1st Qu.: 11.00   1st Qu.: 10.00  \n NCAA Division II without football : 3575    Median : 17.00   Median : 15.00  \n NCAA Division II with football    : 3415    Mean   : 24.18   Mean   : 21.48  \n NAIA Division II                  : 3313    3rd Qu.: 28.00   3rd Qu.: 25.00  \n NCAA Division I-FCS               : 3048    Max.   :290.00   Max.   :327.00  \n (Other)                           :16809                                     \n ef_male_count   ef_female_count ef_total_count     rev_men        \n Min.   :    0   Min.   :    0   Min.   :    0   Min.   :      65  \n 1st Qu.:  546   1st Qu.:  684   1st Qu.: 1268   1st Qu.:   55012  \n Median : 1004   Median : 1272   Median : 2284   Median :  131951  \n Mean   : 2140   Mean   : 2493   Mean   : 4633   Mean   :  405014  \n 3rd Qu.: 2393   3rd Qu.: 2830   3rd Qu.: 5237   3rd Qu.:  309113  \n Max.   :35954   Max.   :30325   Max.   :66279   Max.   :45632816  \n                                                                   \n   rev_women        total_rev_menwomen    exp_men           exp_women      \n Min.   :       0   Min.   :     130   Min.   :      65   Min.   :     65  \n 1st Qu.:   51180   1st Qu.:  108178   1st Qu.:   54786   1st Qu.:  51228  \n Median :  122982   Median :  259386   Median :  134146   Median : 125092  \n Mean   :  269807   Mean   :  674821   Mean   :  392666   Mean   : 319436  \n 3rd Qu.:  299104   3rd Qu.:  618145   3rd Qu.:  331960   3rd Qu.: 323727  \n Max.   :21440365   Max.   :48559421   Max.   :22178473   Max.   :9485162  \n                                                                           \n total_exp_menwomen                        sports        total_par     \n Min.   :     130   Basketball                : 9448   Min.   :  2.00  \n 1st Qu.:  107800   Soccer                    : 6657   1st Qu.: 22.00  \n Median :  261562   Tennis                    : 4628   Median : 32.00  \n Mean   :  712101   Golf                      : 4258   Mean   : 45.66  \n 3rd Qu.:  659871   All Track Combined        : 3604   3rd Qu.: 53.00  \n Max.   :28847845   Track and Field, X-Country: 3442   Max.   :617.00  \n                    (Other)                   :11577                   \n\n\nAlternative way\n\ntable(is.na(myselection))\n\n\n FALSE \n697824"
  },
  {
    "objectID": "08_TT_202205.html#revenues-and-expenditures",
    "href": "08_TT_202205.html#revenues-and-expenditures",
    "title": "7  Revenue and expenditure in sport",
    "section": "8.2 Revenues and expenditures",
    "text": "8.2 Revenues and expenditures\nCalculate revenues and expenditure per participant and add new variables.\n\nmyselection <- myselection %>% \n  mutate(exp_per_men = exp_men / partic_men,\n         exp_per_women = exp_women / partic_women,\n         exp_per_total = total_exp_menwomen / total_par, \n         rev_per_men = rev_men / partic_men,\n         rev_per_women = rev_women / partic_women,\n         rev_per_total = total_rev_menwomen / total_par)\n\n\n8.2.1 Revenues\nNow look at revenue in sports (Mean revenues per sport)\n\nrev_mean <- myselection %>% \n  group_by(sports) %>% \n  summarise(mean_rev_total = mean(total_rev_menwomen)) \n\nPlot mean revenues per sport\nmyselection %>% \n  group_by(sports) %>% \n  summarise(mean_rev_total = mean(total_rev_menwomen)) %>% \n  ggplot(aes(x = mean_rev_total, y = sports, color = sports)) +\n  geom_bar() +\n  labs(x = \"Mean Revenues\", y = \"Sports\")"
  },
  {
    "objectID": "09_TT_202205.html#introduction",
    "href": "09_TT_202205.html#introduction",
    "title": "8  Development of crime in population",
    "section": "8.1 Introduction",
    "text": "8.1 Introduction\nBelow you find the materials Wim Bernasco prepared for the Tidy Tuesday workshop on May 24th 2022. Here is the original link to this workshop and the materials. You find links to two small datasets. One (crime.csv) contains the number of police recorded residential burglaries, bike thefts and assaults in the Netherlands per month between January 2012 and April 2022. The other (population.csv) contains the number of inhabitants of the Netherlands during the same period, per first day of the month. In the workshop he tried to make sense of long-term temporal trends in these crimes, and hopefully also make useful statements about how things changed when the COVID pandemic arrived around February 2020. He worked out eight steps in the analysis.\nAcknowledgement: Franziska Yasrebi-de Kom corrected errors and provided fruitfull suggestions for improvement of the first draft."
  },
  {
    "objectID": "09_TT_202205.html#start-up",
    "href": "09_TT_202205.html#start-up",
    "title": "8  Development of crime in population",
    "section": "8.2 Start-up",
    "text": "8.2 Start-up\nCreate a new folder on the computer where you run R, and store the two datafiles crime.csv and residents.csv in the folder.\nYou will normally load libraries here at the top of your script, but in this example I will load libraries at the point where I need their functionality. This shows when and why they are needed.\nIf your project is reasonably small and all files (data, scripts, and output files) can be stored in a single folder without creating confusion, setting a working folder is a good idea. All reading from and writing to disk will be done from and to this folder.\nsetwd(\"X:/YYY/ZZZ\") # for example: setwd(\"C:/Users/bernasco/crime_trends_NL\")\nNote: In this script I will use the new |> piping symbol. It is equivalent to %>% but has two advantages, which are\n- (1) it is shorter (2 instead of 3 symbols), and\n- (2) it does not require you to load a library, as it has been built into base R"
  },
  {
    "objectID": "09_TT_202205.html#read-both-files-from-disk-and-assign-each-a-name.",
    "href": "09_TT_202205.html#read-both-files-from-disk-and-assign-each-a-name.",
    "title": "8  Development of crime in population",
    "section": "8.3 Read both files from disk and assign each a name.",
    "text": "8.3 Read both files from disk and assign each a name.\nAny name will do, but I suggest “crime” and ” residents”. Read data using the read_csv function in package readr. read_csv has a few advantages over read.csv but the latter will also do.\nread_csv is in the readr library, so we load readr first. I added tidyverse also already.\n\nlibrary(readr)     # read_csv function\n\nWarning: package 'readr' was built under R version 4.1.3\n\nlibrary(tidyverse)\n\nWarning: package 'tidyverse' was built under R version 4.1.3\n\n\n-- Attaching packages --------------------------------------- tidyverse 1.3.2 --\nv ggplot2 3.4.0     v dplyr   1.1.0\nv tibble  3.1.8     v stringr 1.5.0\nv tidyr   1.3.0     v forcats 1.0.0\nv purrr   1.0.1     \n\n\nWarning: package 'ggplot2' was built under R version 4.1.3\n\n\nWarning: package 'tibble' was built under R version 4.1.3\n\n\nWarning: package 'tidyr' was built under R version 4.1.3\n\n\nWarning: package 'purrr' was built under R version 4.1.3\n\n\nWarning: package 'dplyr' was built under R version 4.1.3\n\n\nWarning: package 'stringr' was built under R version 4.1.3\n\n\nWarning: package 'forcats' was built under R version 4.1.3\n\n\n-- Conflicts ------------------------------------------ tidyverse_conflicts() --\nx dplyr::filter() masks stats::filter()\nx dplyr::lag()    masks stats::lag()\n\n\nNote: in the live workshop we stumbled upon an error caused by our assumption that “crimes.csv” and “population.csv” had dates coded with dashes (like in “2022-05-24”) but my Excel version had written it with slashes (like in “2022/05/24”). Verify that after reading the files, their ‘date’ column has type ‘date’, not type ‘character’. You can use glimpse to verify this.\n\ncrimes <- read_csv(\"data/crimes.csv\")\n\npopulation <- read_csv(\"data/population.csv\")"
  },
  {
    "objectID": "09_TT_202205.html#explore-data",
    "href": "09_TT_202205.html#explore-data",
    "title": "8  Development of crime in population",
    "section": "8.4 Explore data",
    "text": "8.4 Explore data\nExplore the structure of the files. How many rows (observations), how many columns (variables), what are the variable names? What are their types: Are they integers, characters, dates, factors, .? keys? First explore the crime data.How many observations and how many variables (rows and columns)?\n\ncrimes |> dim()        # dim(crimes)\n\n[1] 372   3\n\n\nFor glimpse, slice-sample and count, we need library dplyr library(dplyr). Display the names and types of the variables, and show values for the first few observations column-wise. Note: verify that column date has type ‘date’\n\ncrimes |> glimpse()\n\nRows: 372\nColumns: 3\n$ date       <date> 2012-01-01, 2012-02-01, 2012-03-01, 2012-04-01, 2012-05-01~\n$ frequency  <dbl> 9787, 8237, 7944, 5955, 6198, 5493, 6168, 6481, 6102, 8178,~\n$ crime_type <chr> \"burglary\", \"burglary\", \"burglary\", \"burglary\", \"burglary\",~\n\n\nShow the first few cases row-wise\n\ncrimes |> head()\n\n# A tibble: 6 x 3\n  date       frequency crime_type\n  <date>         <dbl> <chr>     \n1 2012-01-01      9787 burglary  \n2 2012-02-01      8237 burglary  \n3 2012-03-01      7944 burglary  \n4 2012-04-01      5955 burglary  \n5 2012-05-01      6198 burglary  \n6 2012-06-01      5493 burglary  \n\n\nShow a random sample of 10 cases rather than the first ones. This will usually have more variation in values\n\ncrimes |> slice_sample(n=10) |> head()\n\n# A tibble: 6 x 3\n  date       frequency crime_type\n  <date>         <dbl> <chr>     \n1 2014-10-01     12151 bike theft\n2 2019-02-01      5526 bike theft\n3 2018-05-01      7470 bike theft\n4 2012-02-01      7748 bike theft\n5 2017-06-01      3213 burglary  \n6 2015-03-01      5324 burglary  \n\n\nFrequency table of crime types\n\ncrimes |> count(crime_type)\n\n# A tibble: 3 x 2\n  crime_type     n\n  <chr>      <int>\n1 assault      124\n2 bike theft   124\n3 burglary     124\n\n\nYou will see we have data for 124 months: 10 full years (2012-2021) + 4 months (Jan-April 2022)\nNext explore the population data\n\npopulation |> dim()\n\n[1] 123   2\n\n\nNote: verify that column date has type ‘date’.\n\npopulation |> glimpse()\n\nRows: 123\nColumns: 2\n$ date       <date> 2012-01-01, 2012-02-01, 2012-03-01, 2012-04-01, 2012-05-01~\n$ population <dbl> 16730348, 16731280, 16735690, 16737631, 16739764, 16742830,~\n\npopulation |> head()\n\n# A tibble: 6 x 2\n  date       population\n  <date>          <dbl>\n1 2012-01-01   16730348\n2 2012-02-01   16731280\n3 2012-03-01   16735690\n4 2012-04-01   16737631\n5 2012-05-01   16739764\n6 2012-06-01   16742830\n\npopulation |> slice_sample(n=10) |> head()\n\n# A tibble: 6 x 2\n  date       population\n  <date>          <dbl>\n1 2015-12-01   16975465\n2 2016-08-01   17022674\n3 2012-11-01   16778726\n4 2020-08-01   17430920\n5 2020-12-01   17476482\n6 2016-12-01   17079787"
  },
  {
    "objectID": "09_TT_202205.html#visualize-plot-population-and-crime-development",
    "href": "09_TT_202205.html#visualize-plot-population-and-crime-development",
    "title": "8  Development of crime in population",
    "section": "8.5 Visualize (plot) population and crime development",
    "text": "8.5 Visualize (plot) population and crime development\nVisualize (plot) the development of the population size of the Netherlands between January 2012 and April 2022, and do the same for the frequencies of residential burglary, bike theft and assault.The ggplot function is in the ggplot2 library.\n\nlibrary(ggplot2)\n\nPlot population as a scatterplot.\n\npopulation |> \n    ggplot() + \n    geom_point(mapping = aes(x = date, y = population))\n\n\n\n  # or as a line graph\n  population |> \n    ggplot() + \n    geom_line(mapping = aes(x = date, y = population))\n\n\n\n\nKeep it simple first. You can finetune later.Plot burglary frequencies\n\n  crimes %>%\n    filter(crime_type == \"burglary\") |>\n    ggplot() + \n    geom_line(mapping = aes(x=date, y=frequency))\n\n\n\n\nYou should see a seasonal pattern with highs in Winter (nov-jan) and lows in summer. Plot bike theft\n\n crimes %>%\n    filter(crime_type == \"bike theft\") |>\n    ggplot() + \n    geom_line(mapping = aes(x = date, y = frequency)) \n\n\n\n\nYou should also see a seasonal pattern, but with peaks in autumn (dep-nov)\nPlot assault\n\ncrimes %>%\n    filter(crime_type == \"assault\") |>\n    ggplot() + \n    geom_line(mapping = aes(x = date, y = frequency))\n\n\n\n\nThe seasonal pattern for assault shows peaks in spring (apr-jun). Plot the three crime types in a single graph and distinguish them by color.\n\ncrimes |>\n    ggplot() + \n    geom_line(aes(x = date, y = frequency, color = crime_type)) \n\n\n\n\nPlot them in separate panels.\n\ncrimes |>\n    ggplot() + \n    geom_line(aes(x = date, y = frequency)) +\n    # scales = \"free_y\" allows each panel to have its own\n    #  Y-axis scaling\n    facet_wrap(facets = \"crime_type\", scales = \"free_y\", ncol = 1)\n\n\n\n\nI would not advise it, but you can combine panels and color (if you do, hide the legend to prevent redundancy)\n\ncrimes |>\n    ggplot() + \n    geom_line(aes(x = date, y = frequency, color = crime_type)) +\n    facet_wrap(facets = \"crime_type\", scales = \"free_y\", ncol = 1) +\n    theme(legend.position=\"none\")"
  },
  {
    "objectID": "09_TT_202205.html#calculate-corrected-rate",
    "href": "09_TT_202205.html#calculate-corrected-rate",
    "title": "8  Development of crime in population",
    "section": "8.6 Calculate corrected rate",
    "text": "8.6 Calculate corrected rate\nCreate a residential burglary rate by relating number of residential burglaries to the size of the population, and think about how you can adjust for different months having a different numbers of days (28-31). To do this, you will need to merge (join) the “crime” dataframe with the “residents” dataframe by year and month.\nMerge crime and population by date (year and month).\n\n\n crime_population <- \n    # merge with crime type category labels\n    left_join(crimes, population, by = \"date\")\nTo calculate the number of days in the month of a date, you can use the day_in_month function which is in the lubridate library. Divide monthly crime frequency by number of days in the month to obtain the daily crime frequency, and divide by 100,000 to obtain daily crime rates per 100,000 population.\nFurther, I multiply the result by mean days per month to obtain the MONTHLY crime rate, but this is arbitrary (daily, weekly, of annual rates would be fine as well)\n\n  library(lubridate)\n\nWarning: package 'lubridate' was built under R version 4.1.3\n\n\n\nAttaching package: 'lubridate'\n\n\nThe following objects are masked from 'package:base':\n\n    date, intersect, setdiff, union\n\n  crime_population_corrected <-\n    crime_population |>\n    mutate(\n           # corrected for different month lengths\n           rate = frequency / days_in_month(date) * \n             (365.25/12) / (population / 100000))"
  },
  {
    "objectID": "09_TT_202205.html#visualize-development-of-corrected-crime-rates",
    "href": "09_TT_202205.html#visualize-development-of-corrected-crime-rates",
    "title": "8  Development of crime in population",
    "section": "8.7 Visualize development of corrected crime rates",
    "text": "8.7 Visualize development of corrected crime rates\n\ncrime_population_corrected |>\n    ggplot() + \n    geom_line(aes(x=date, y=rate, color=crime_type)) +\n    facet_wrap(facets = \"crime_type\", scales=\"free_y\", ncol=1)\n\nWarning: Removed 3 rows containing missing values (`geom_line()`).\n\n\n\n\n\nYou got this warning:\n#    Warning message:\n#    Removed 3 row(s) containing missing values    \nSo where are these three missing values?\n\ncrime_population_corrected |>\n    # select observations with NA (missing) values on 'rate'\n    filter(is.na(rate))\n\n# A tibble: 3 x 5\n  date       frequency crime_type population  rate\n  <date>         <dbl> <chr>           <dbl> <dbl>\n1 2022-04-01      1645 burglary           NA    NA\n2 2022-04-01      7096 bike theft         NA    NA\n3 2022-04-01      3416 assault            NA    NA\n\n\nAha! The population data of April 2022 were not yet online! This means we have valid data on both crime and population Jan 2012 to March 2022."
  },
  {
    "objectID": "09_TT_202205.html#crime-before-and-after-covid",
    "href": "09_TT_202205.html#crime-before-and-after-covid",
    "title": "8  Development of crime in population",
    "section": "8.8 Crime before and after covid",
    "text": "8.8 Crime before and after covid\nWhat can we say about the development of crime since February 2020, relative to the developments between 2012 and 2020? How can you quantify this with the data at hand?\nLet’s look at burglary and start with making a plot that highlights the distinction between the periods before and during the pandemic.\nFirst we create a new variable/column that contains an indicator for whether the month is a pandemic month or not.\nDefine the date the pandemic started (a single number of the type ‘date’)\n\ncovid_start <- as_date(\"2020-02-01\")  \n\nNote: The expression: date >= covid_start returns TRUE (1) for ‘covid_start’ and all later dates, and returns FALSE (0) for all dates before ‘covid_start’. The labels parameter assigns ‘before’ to 0 and ‘during’ to 1\n\ncrime_population_corrected_covid <-  \n  crime_population_corrected |>\n  mutate(covid = factor(date >= covid_start , \n                        labels=c(\"before\", \"during\")))\n\nWe could just add a vertical line at the month that the pandemic started (February 2022)\n\ncrime_population_corrected_covid |>\n    filter(crime_type == \"burglary\") |>\n    ggplot() + \n    geom_line(aes(x=date, y=rate)) +\n    # add a red vertical line at given point on X-axis\n    geom_vline(xintercept = covid_start, color=\"red\")\n\nWarning: Removed 1 row containing missing values (`geom_line()`).\n\n\n\n\n\nAlternatively, we could create a two-category variable indicating the before-after distinction, and then plot by color\n\ncrime_population_corrected_covid |>\n  filter(crime_type == \"burglary\") |>\n  ggplot() + \n  geom_line(aes(x=date, y=rate, color=covid))\n\nWarning: Removed 1 row containing missing values (`geom_line()`).\n\n\n\n\n\nA combined graph for the three crime types\n\ncrime_population_corrected_covid |>\n  ggplot() + \n  geom_line(aes(x=date, y=rate, color=covid)) +\n  facet_wrap(facets = \"crime_type\", scales=\"free_y\", ncol=1)\n\nWarning: Removed 1 row containing missing values (`geom_line()`).\n\n\n\n\n\nNote that there is a ‘hole’ in de line graphs between January 2020 and February 2020. This is because we are actually drawing two separate line graphs here, one ending Jan 2022 and one starting Feb 2022. When we create a line graph, we drawing an individual point graph and then connect consecutive points with lines. So there really is nothing between Jan 2020 and Feb 2020.\nAs we think of time as continuous (by day, or even hour), we may want to create a ‘before covid’ line that continues to Feb 2020.One way to do this is to explicitly draw two line graphs in the same plot. As you see this quickly becomes complicated ….\nNote: I used “#F8766D” and “#00BFC4” to get the same colors that ggplot uses by default when there are two categories in a discrete variable\n\ncrime_population_corrected |>\n  mutate(precovid_rate = if_else(date <= as_date(\"2020-02-01\"),\n                                 rate, as.numeric(NA)),\n         postcovid_rate =if_else(date >= as_date(\"2020-02-01\"),\n                                 rate, as.numeric(NA))) |>\n  ggplot() + \n  geom_line(aes(x=date, y=precovid_rate), color=\"#F8766D\") +\n  geom_line(aes(x=date, y=postcovid_rate), color=\"#00BFC4\") +\n  xlab(\"rate\") +\n  facet_wrap(facets = \"crime_type\", scales=\"free_y\", ncol=1)  \n\nWarning: Removed 26 rows containing missing values (`geom_line()`).\n\n\nWarning: Removed 98 rows containing missing values (`geom_line()`).\n\n\n\n\n\nNow let us quantify the trends. We first calculate annual rates as we are presently not interested in the seasonal variations.\n\nannual_rates_changes <-\n  crime_population_corrected |>\n  # create a variable indicating the year\n  mutate(year = year(date)) |>\n  # select only years 2012-2021 because we have not full 2022 data\n  filter(year < 2022) |>\n  # for each year and crime type, calculate annual crime rate\n  group_by(year, crime_type) |>\n  summarize(annual_rate = sum(rate)) |>\n  # Now calculate relative change: \n  #   By what proportion does this year's rate differ\n  #   from previous year's rate?\n  # We do this for each crime type separately\n  group_by(crime_type) |>\n  # sort by year \n  arrange(year) |>\n  # Copy last year's rate\n  mutate(lag_annual_rate = lag(annual_rate)) |>\n  # Relative change\n  # See, e.g. https://www.youtube.com/watch?v=muAkepkjpZI\n  mutate(annual_change = ((annual_rate - lag_annual_rate) / lag_annual_rate))\n\n`summarise()` has grouped output by 'year'. You can override using the\n`.groups` argument.\n\n\nJust to check that what you did generates the intended result: lag_annual_rate(2015) == annual_rate(2014) lag_annual_rate(2014) == annual_rate(2013) lag_annual_rate(2013) == annual_rate(2012) lag_annual_rate(2012) == NA (because annual_rate(2011) is unknown)\n\nannual_rates_changes |>\n  filter(crime_type == \"assault\") |>\n  head()\n\n# A tibble: 6 x 5\n# Groups:   crime_type [1]\n   year crime_type annual_rate lag_annual_rate annual_change\n  <dbl> <chr>            <dbl>           <dbl>         <dbl>\n1  2012 assault           336.             NA        NA     \n2  2013 assault           309.            336.       -0.0801\n3  2014 assault           295.            309.       -0.0456\n4  2015 assault           281.            295.       -0.0496\n5  2016 assault           271.            281.       -0.0335\n6  2017 assault           258.            271.       -0.0501\n\n\nPlot relative changes\n\nannual_rates_changes |>\n  ggplot() +\n  geom_line(aes(x=year, y=annual_rate, color=crime_type))\n\n\n\n\nDefine the covid years\n\ncovid_years <- c(2020, 2021)\n\nCompare annual change before and during the pandemic per crime type\n\nannual_rates_changes %>%\n  mutate(covid = factor(year %in% covid_years, labels = c(\"before\", \"during\"))) |>\n  group_by(crime_type, covid) |>\n  summarize(mean_change = mean(annual_change, na.rm=TRUE))\n\n`summarise()` has grouped output by 'crime_type'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 6 x 3\n# Groups:   crime_type [3]\n  crime_type covid  mean_change\n  <chr>      <fct>        <dbl>\n1 assault    before     -0.0463\n2 assault    during     -0.0799\n3 bike theft before     -0.0587\n4 bike theft during     -0.0718\n5 burglary   before     -0.116 \n6 burglary   during     -0.233"
  },
  {
    "objectID": "09_TT_202205.html#do-anything-else-with-the-data-that-you-find-fun-or-seems",
    "href": "09_TT_202205.html#do-anything-else-with-the-data-that-you-find-fun-or-seems",
    "title": "8  Development of crime in population",
    "section": "8.9 Do anything else with the data that you find fun or seems",
    "text": "8.9 Do anything else with the data that you find fun or seems\nTo make senseYou can see that there is an overall decline for each crime type (mean_change is always negative) and the decline is more pronounced (mean_change is more negative) during the pandemic than before the pandemic, in particular for assault and burglary.\nFor more rigorous statistical tests, we would need to dive into time series analysis."
  }
]